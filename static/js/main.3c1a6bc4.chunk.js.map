{"version":3,"sources":["app/constants/data/data.ts","app/text/headerText.ts","app/types/data/data.ts","app/helpers/data/formatText.ts","app/helpers/stringGetters.ts","app/styles/colors.ts","app/styles/font.ts","app/components-style/header/headerStyle.ts","app/components/header/Header.tsx","app/text/footerText.ts","app/components-style/footer/footerStyle.ts","app/components/footer/Footer.tsx","app/helpers/react/useUpdatedRef.ts","app/helpers/react/useDebounce.ts","app/constants/data/DataLoadState.ts","app/constants/views-general/ViewType.ts","app/helpers/data/data.ts","app/constants/layout/layout.ts","icons/BrushOffSvg.tsx","icons/TooltipSvg.tsx","app/constants/data/sampleDataset.tsx","app/constants/data/DataLoadError.ts","app/text/siteText.ts","app/constants/sort/SortType.ts","app/components-style/content/top-toolbar/topToolbarStyle.ts","app/constants/mui.ts","app/components-style/content/top-toolbar/items/buttons/topToolbarButtonStyle.ts","app/components/content/top-toolbar/items/buttons/ClickableButton.tsx","app/helpers/data/dataConvertors.ts","app/constants/others.ts","app/components-style/content/top-toolbar/items/file-reader/fileReaderStyle.ts","app/components-style/content/common/dialogStyle.ts","app/components/content/common/dialogs/SelectionDialog.tsx","app/components/content/common/dialogs/InformationDialog.tsx","app/components/content/top-toolbar/items/file-reader/NullDialog.tsx","app/components/content/top-toolbar/items/file-reader/FileReader.tsx","app/components/content/top-toolbar/items/buttons/ToggleButtonSingle.tsx","app/components-style/content/top-toolbar/items/buttons/openSettingsButtonStyle.ts","app/components/content/top-toolbar/items/buttons/OpenSettingsButton.tsx","app/components-style/content/top-toolbar/items/buttons/colorButtonStyle.ts","app/components/content/top-toolbar/items/buttons/ColorButton.tsx","app/constants/debounce/debounce.ts","app/components/content/top-toolbar/TopToolbar.tsx","app/constants/svg.ts","app/helpers/d3/setDisplay.ts","app/constants/views-general/tooltip.ts","app/text/views-and-settings/common.ts","app/components-style/content/views/viewGridStyle.ts","app/text/settingsDrawerText.ts","app/components-style/content/data-drawer/settingsDrawerStyle.ts","app/constants/views/parallelCoordinates.ts","app/text/views-and-settings/parallelCoordinates.ts","app/components-style/content/data-drawer/settingsDrawerItemStyle.ts","app/components-style/content/data-drawer/items/attributeCheckerStyle.ts","app/components/content/data-drawer/items/AttributeChecker.tsx","app/components/content/data-drawer/items/CategorySelector.tsx","app/components-style/content/data-drawer/items/numberInputStyles.ts","app/components-style/content/data-drawer/items/settingsTextStyle.ts","app/components/content/data-drawer/items/MarginInput.tsx","app/helpers/basic/getInputPropsPositiveNumber.ts","app/components/content/data-drawer/items/OpacityInput.tsx","app/components/content/data-drawer/items/NumberInput.tsx","app/components-style/content/data-drawer/items/palettePickerStyle.ts","app/components/content/data-drawer/items/PalettePicker.tsx","app/components/content/views/parallel-coordinates/ParallelCoordinatesSettingsComponent.tsx","app/types/views/settings/ParallelCoordinatesSettings.ts","app/constants/views/scatterPlotMatrix.ts","app/text/views-and-settings/scatterPlotMatrix.ts","app/components/content/views/scatter-plot-matrix/ScatterPlotMatrixSettingsComponent.tsx","app/types/views/settings/ScatterPlotMatrixSettings.ts","app/constants/views/glyphs.ts","app/constants/brushing-type/ParallelSetsBrushingType.ts","app/text/views-and-settings/glyphs.ts","app/components/content/data-drawer/items/Selector.tsx","app/components-style/content/data-drawer/items/toggleButtonsStyle.ts","app/components/content/data-drawer/items/ToggleButtons.tsx","app/components/content/views/glyphs/GlyphsSettingsComponent.tsx","app/types/views/settings/GlyphsSettings.ts","app/constants/views/scatterPlotGlyphs.ts","app/text/views-and-settings/scatterPlotGlyphs.ts","app/components/content/views/scatter-plot-glyphs/ScatterPlotGlyphsSettingsComponent.tsx","app/types/views/settings/ScatterPlotGlyphsSettings.ts","app/constants/views/dataTable.ts","app/constants/views-general/defaultSettableColors.ts","app/text/views-and-settings/dataTable.ts","app/components-style/content/data-drawer/items/colorPickerStyle.ts","app/components/content/data-drawer/items/ColorPicker.tsx","app/components/content/views/data-table/DataTableSettingsComponent.tsx","app/types/views/settings/DataTableSettings.ts","app/constants/views/parallelSetsBundled.ts","app/constants/actions/BrushAction.ts","app/constants/actions/MouseAction.ts","app/text/views-and-settings/parallelSetsBundled.ts","app/components/content/views/parallel-sets-bundeled/ParallelSetsBundledSettingsComponent.tsx","app/types/views/settings/ParallelSetsBundledSettings.ts","app/components/content/data-drawer/SettingsDrawer.tsx","app/constants/public-path.ts","app/components/content/top-toolbar/items/layout/LayoutDialog.tsx","app/components-style/content/views/gridItemStyle.ts","app/types/styling/Margin.ts","app/helpers/basic/range.ts","app/helpers/d3/extent.ts","app/helpers/views/togglingYShift.ts","app/helpers/d3/categoryColor.ts","app/helpers/d3/tooltip.ts","app/constants/save/save.ts","app/components-style/content/views/parallel-coordinates/parallelCoordinatesStyle.ts","app/components-style/content/views/getViewsNotDisplayStyle.tsx","app/components/content/views/parallel-coordinates/ParallelCoordinates.tsx","app/helpers/views/matrix.ts","app/components-style/content/views/scatter-plot-matrix/scatterPlotMatrixStyle.ts","app/components/content/views/scatter-plot-matrix/ScatterPlotMatrix.tsx","app/helpers/data/comparator.ts","app/components-style/content/views/glyphs/glyphsStyle.ts","app/components/content/views/glyphs/Glyphs.tsx","app/constants/views-general/glyphs-general.ts","app/components-style/content/views/scatter-plot-glyphs/scatterPlotGlyphsStyle.ts","app/components/content/views/scatter-plot-glyphs/ScatterPlotGlyphs.tsx","app/components-style/content/views/data-table/dataTableStyle.ts","app/components/content/views/data-table/DataTableBody.tsx","app/components/content/views/data-table/DataTable.tsx","lib/d3-sankey/src/align.js","lib/d3-sankey/src/constant.js","lib/d3-sankey/src/sankey.js","lib/d3-sankey/src/sankeyLinkHorizontal.js","app/helpers/data/lineShifts.ts","app/components-style/content/views/parallel-sets-bundled/parallelSetsBundledStyle.ts","app/components/content/views/parallel-sets-bundeled/ParallelSetsBundled.tsx","app/constants/views-general/view.tsx","app/components/content/views/View.tsx","app/components-style/content/views/viewStyle.ts","app/text/gridItemText.ts","app/components-style/content/common/inlineButtonStyles.ts","app/components/content/grid/items/ViewCloseButton.tsx","app/components-style/content/common/helpDialogStyle.ts","app/components/content/grid/items/ViewHelpButton.tsx","app/helpers/d3/saveSvg.ts","app/components/content/common/dialogs/ConfirmationDialog.tsx","app/components/content/grid/items/ViewSaveButton.tsx","app/components/content/grid/items/GlyphAxesText.tsx","app/components/content/grid/items/DataFilterButton.tsx","app/components/content/grid/GridItem.tsx","app/components/content/grid/ViewGrid.tsx","app/components-style/content/no-data/emptyDataStyle.ts","app/components/content/no-data/EmptyData.tsx","app/components/content/no-data/Loading.tsx","app/components/content/context/DataContext.tsx","app/appStyle.ts","app/App.tsx","index.tsx"],"names":["AcceptableFileTypes","DataNullOptionType","HEADER_TEXT","SelectedKey","withoutSpaces","otherCasesToWhitespaces","text","String","replace","replaceAll","trim","toLowerCase","dataToReadable","data","px","values","map","val","join","calc","plus","important","border","value","color","getTranslate","translate","getClass","className","getSpaced","getAttributeFormatted","attribute","getAttributeFromMatrixFormatted","item","rowKey","getAttributeValuesWithLabel","Object","keys","filter","key","getLinkDataPointValuesWithLabel","filteredData","from","names","to","count","selected","reduce","acc","sel","getNodeDataPointValuesWithLabel","name","countSelected","getLabelledAttribute","label","getDisplayAttributesInParentheses","displayAttributes","HEADER_COLORS","FOOTER_COLORS","TOP_TOOLBAR_COLORS","DIALOG_COLORS","BUTTON_COLORS","CARD_COLORS","VIEW_COLORS","SETTINGS_DRAWER_COLORS","PLOT_COLORS","SITE_COLORS","ERROR_COLORS","HIGHLIGHT_COLOR","TABLE_COLORS","HEADER_FONT","titleFontSize","descriptionFontSize","FOOTER_FONT","fontSize","SETTINGS_DRAWER_FONT","PLOT_FONT","PLOT_FONT_BOX_SIZE","headerStyle","headerContainer","bgcolor","padding","width","display","flexDirection","alignItems","justifyContent","title","description","Header","Box","sx","FOOTER_TEXT","footerStyle","footerContainer","Footer","useUpdatedRef","valueRef","useRef","current","useDebounce","delay","useState","debouncedValue","setDebouncedValue","useEffect","handler","setTimeout","clearTimeout","DataLoadState","ViewType","DATA_NULL_OPTION_TYPES","getAttributeKeys","dataset","getDatasetSample","getDefaultQuantitativeAttributesKeys","getQuantitativeAttributesKeys","every","isNaN","Number","getCategoryAttributesKeys","Set","size","getDefaultAllAttributesChecked","fromEntries","getDefaultQuantitativeAttributesChecked","defaultQuantitativeAttributesKeys","possibleQuantitativeAttributesKeys","some","kk","getDefaultNominalAttributesChecked","getNominalValueProperties","nominalValuePropertiesArr","containedIdx","findIndex","prev","newNominalValueProperties","sort","a","b","nvp","idx","order","getNominalValuesRecord","brushView","isBrushView","component","ScatterPlotMatrix","ScatterPlotGlyphs","ParallelCoordinates","DRAG_HANDLE","VIEW_DEFAULT_SIZE","height","VIEW_LIMITS","minW","minH","Glyphs","ParallelSetsBundled","DataTable","DEFAULT_VIEW_DIMENSIONS","w","h","DEFAULT_GRID_LAYOUT_QUANTITATIVE","i","x","y","DEFAULT_GRID_LAYOUT_NOMINAL","LAYOUT_OPT_2","LAYOUT_OPT_3","LAYOUT_OPT_4","LAYOUT_OPTIONS","BrushOffSvg","forwardRef","props","ref","style","userSelect","fill","flexShrink","viewBox","d","id","displayName","TooltipSvg","strokeWidth","SampleDataset","DataLoadError","SAMPLE_DATASET_OPTIONS","sampleDatasetIcons","flowers","LocalFlorist","birds","Twitter","cars","DirectionsCar","titanic","DirectionsBoat","parallelCars","AirportShuttle","sampleDatasets","flowerJson","birdJson","carJson","titanicJson","parallelCarsJson","SortType","EMPTY_DATA_TEXT","header","subHeader","close","sample","file","viewsHelp","add","layout","tooltip","skip","brush","brushOff","settings","TOP_TOOLBAR_TEXT","SAVE_TEXT","VIEW_INFO_TEXT","brushing","options","FILE_READER_TEXT","button","sampleDataLabel","sampleDataDialogTitle","sampleDataDialogText","alertDialog","unsupportedFile","unsupportedFormat","nullDialog","confirm","optionsText","leave","change","optionsDescription","changeTo","LAYOUT_DIALOG_TEXT","topToolbarStyle","toolbar","flexWrap","separator","margin","borderLeft","left","middle","right","COMPONENT_TYPE","BUTTON_VARIANT","DRAWER_VARIANT","ANCHOR","CELL_PADDING","DIALOG_MAX_WIDTH","topToolbarButtonStyle","minWidth","ClickableButton","icon","onClick","disabled","Button","variant","Tooltip","isJsonValue","isArrayOfDataType","Array","isArray","length","example","CsvParse","textCsv","parse","output","numValue","HTML","INPUT_TYPE","INPUT_PROPS","positiveNumber","inputMode","min","getFileReaderBoxStyle","isHighlighted","transition","borderRadius","fileReaderStyle","paddingLeft","dialogStyle","dialog","alert","innerContent","contentBox","toggleDialogGroup","marginBottom","toggleDialogButton","flexGrow","attHeader","fontWeight","paddingBottom","textInput","alignSelf","card","opacity","image","cardContent","itemText","SelectionDialog","isOpen","onClose","handleListItemClick","noOptionText","Dialog","open","DialogTitle","Divider","List","option","ListItem","ListItemAvatar","Avatar","ListItemText","primary","Typography","InformationDialog","confirmText","DialogContent","DialogContentText","DialogActions","autoFocus","NullDialog","nullContainingAttributes","setDataset","att","optionsChosen","setOptionsChosen","replaceValue","setReplaceValue","getFixedDataset","useCallback","newValue","handleNullDialogConfirm","datasetFixed","forEach","handleToggleChange","handleReplaceChange","ToggleButtonGroup","exclusive","onChange","e","optType","ToggleButton","TextField","defaultValue","target","addSelected","FILE_INPUT_ID","FileReader","setDataLoadState","isSampleDataDialogOpen","setIsSampleDataDialogOpen","isNullDialogOpen","setIsNullDialogOpen","setNullContainingAttributes","rawDataset","setRawDataset","isAlertDialogOpen","setIsAlertDialogOpen","alertDialogText","setAlertDialogText","optionKey","Loaded","closeDialog","getDatasetFromFile","fileType","selectedFile","json","csv","JSON","handleFileChange","files","Loading","type","dataLoadErrorType","NoData","selectableDataset","document","getElementById","AutoGraph","UploadFile","hidden","ON_VALUE","ToggleButtonSingle","setValue","handleChange","event","checked","openSettingsButtonStyle","OpenSettingsButton","Settings","getColorInputStyle","getColorInputBoxStyle","minHeight","ml","colorInputStyle","inputBox","position","ColorButton","handleSetColor","currentColor","setCurrentColor","debouncedColor","disableHoverListener","TopToolbar","openDrawer","isToolsDisabled","isDetailsVisible","setIsDetailsVisible","isBrushingOnEndOfMove","setIsBrushingOnEndOfMove","isBrushingActive","clearBrushes","setIsAddViewDialogOpen","setIsLayoutDialogOpen","removeLayout","brushColor","setBrushColor","AddCircle","Dashboard","SkipNext","Brush","SVG","svg","g","circle","rect","path","div","class","transform","cx","cy","r","stroke","textAnchor","top","none","block","start","end","setDisplay","isVisible","displayClass","selectAll","TOOLTIP_CLASS","TOOLTIP","bottom","lr","SETTINGS_BASE_TEXT","more","empty","SETTINGS_TEXT","attributes","category","MARGIN_SETTINGS_TEXT","OPACITY_SETTINGS_TEXT","PALETTE_PICKER_TEXT","categoriesLabel","VIEW_NAMES","INFO_DIALOG_TEXT","descriptionBrushing","descriptionSettings","descriptionSettingsMore","viewGridStyle","pointerEvents","zIndex","SETTINGS_DRAWER_TEXT","settingsDrawerStyle","drawer","chevron","setting","footer","githubIcon","paddingRight","PARALLEL_COORDINATES_DEFAULT","margins","lineWidth","colorCategory","schemeCategory10","PARALLEL_COORDINATES_TEXT","PARALLEL_COORDINATES_SETTINGS_TEXT","unavailable","settingsDrawerItemStyle","drawerSettings","textAlign","borderBottom","marginTop","insufficientAttributeNum","accordion","attributeCheckerStyle","buttons","control","AttributeChecker","viewType","attributesKeys","handleChangeSettings","getNewSettings","setSettings","setChecked","setAttributesKeys","handleCheckboxChange","eventChecked","newChecked","prevSettings","newSettings","handleMove","newAttributesKeys","onUpButton","onDownButton","FormControlLabel","ArrowDropUp","ArrowDropDown","Checkbox","CategorySelector","handleSelectCategoryChange","categoryAttribute","undefined","select","MenuItem","numberInputStyles","vertical","horizontal","textField","settingsTextStyle","MarginInput","currentMargins","setCurrentMargins","debouncedMargins","handleMarginChange","newMargin","oldMargins","newMargins","inputProps","getInputPropsPositiveNumber","max","minVal","maxVal","OpacityInput","opacities","currentOpacities","setCurrentOpacities","debouncedOpacities","handleOpacityChange","newOpacity","oldOpacities","newOpacities","NumberInput","valueKey","currentValue","setCurrentValue","handleChangeValue","getPalettePickerColorInputStyle","colors","index","palettePickerStyle","picker","row","col","PalettePicker","currentColors","setCurrentColors","debouncedColors","newColor","oldColors","newColors","getInput","ParallelCoordinatesSettingsComponent","cleanSelectedIfViewWasBrushing","parallelCoordinatesSettings","quantitativeAttributesKeys","setQuantitativeAttributesKeys","categoricalAttributes","getCurrentDisplayAttributes","currChecked","createParallelCoordinatesSettings","newQaKeys","defaultCategoryAttribute","newParallelCoordinates","getNewSettingsForAttributeChecker","Accordion","AccordionSummary","expandIcon","ExpandMore","AccordionDetails","SCATTER_PLOT_MATRIX_DEFAULT","pointSize","horizontalSpacing","verticalSpacing","SCATTER_PLOT_MATRIX_TEXT","SCATTER_PLOT_MATRIX_SETTINGS_TEXT","sizes","ScatterPlotMatrixSettingsComponent","scatterPlotMatrixSettings","createScatterPlotMatrixSettings","newScatterPlotMatrix","ParallelSetsBrushingType","GLYPHS_DEFAULT","sortType","asc","glyphSize","glyphSpacing","GLYPHS_TEXT","GLYPHS_SETTINGS_TEXT","sorting","Selector","settingsKey","handleSelectChange","toggleButtonsStyle","box","group","ToggleButtons","handleToggleButtonChange","newSetting","opt","GlyphsSettingsComponent","glyphsSettings","sortableAttributes","createGlyphsSettings","defaultSortAttribute","newGlyphs","sortAttribute","newSortableAttributes","SCATTER_PLOT_GLYPHS_DEFAULT","SCATTER_PLOT_GLYPHS_TEXT","SCATTER_PLOT_GLYPHS_SETTINGS_TEXT","xAttribute","yAttribute","ScatterPlotGlyphsSettingsComponent","scatterPlotGlyphsSettings","defaultX","useMemo","defaultY","createScatterPlotGlyphsSettings","newScatterPlotGlyphsSettings","DATA_TABLE_DEFAULT","rowHeight","selectedBackgroundColor","selectedFontColor","DATA_TABLE_SETTINGS_TEXT","DATA_TABLE_TEXT","checkboxTooltip","desc","getColorPickerInputStyle","colorPickerStyle","ColorPicker","handleChangeColor","DataTableSettingsComponent","dataTableSettings","createDataTableSettings","newKeys","newDataTableSettings","BrushAction","MouseAction","PARALLEL_SETS_BUNDLED_DEFAULT","tabWidth","tabSpacing","tabGap","brushingType","fontColor","PARALLEL_SETS_BUNDLED_TEXT","PARALLEL_SETS_SETTINGS_TEXT","ParallelSetsBundledSettingsComponent","parallelSetsBundledSettings","nominalAttributesKeys","setNominalAttributesKeys","createParallelSetsBundledSettings","newCatKeys","newParallelSetsBundled","SettingsDrawer","views","settingsComponents","view","Drawer","anchor","ChevronRight","Link","href","GitHub","PUBLIC_IMAGE_PATH","PUBLIC_PATH","LAYOUT_IMAGES","imgName","BRUSHING_IMAGES","address","LayoutDialog","setLayout","lastLayout","layoutItems","Card","CardContent","CardMedia","alt","gridItemStyle","gridItem","borderColor","borderWidth","borderStyle","textBox","whiteSpace","overflow","textOverflow","textIcon","GRID_HEADER_HEIGHT","cursor","borderBottomWidth","borderBottomStyle","Margin","toString","this","isInRanges","ranges","getExtentInDomains","domains","calculatedExtent","extent","Error","getExtendedExtentInDomains","percentDown","percentUp","extentSize","p","finalExtent","TEXT_Y_SHIFTS","odd","even","TOGGLE_Y_SHIFT","Math","getTogglingYShift","_","getCategoryColor","onMouseOverTooltip","stringFunction","clientX","clientY","duration","html","onMouseOutTooltip","SAVE_ID","CONTAINER_SAVE_ID","CONTAINER_EMPTY","PARALLEL_COORDINATES_CLASS","SELECTED_CLASS","AXES_TEXT_CLASS","getParallelCoordinatesStyle","isBrushActive","font","getViewsNotDisplayStyle","refreshViews","registerCleanBrushing","setComponentBrushing","scaleOrdinal","upperPadding","innerWidth","innerHeight","classed","createParallelCoordinates","node","remove","extentInDomains","xScale","scalePoint","domain","yScales","scaleLinear","selections","getDefaultSelectionForAttributes","setBrushingSelection","dimension","selectedRange","number","range","valueOnAxis","onBrush","move","brushEvent","axisName","selection","brushExtent","BRUSH_WIDTH","brushY","on","enter","append","attr","line","mouseOver","mouseOut","brushableAxes","each","elements","call","axisLeft","axis","clear","selLKey","getMatrix","rowIdx","colKey","colIdx","flat","getCellInnerSize","spacing","getCellTranslateInMatrix","maxIdx","DATA_POINT_CLASS","DUPLICATES_CLASS","AXIS_CLASS","getScatterPlotMatrixStyle","shapeRendering","fillOpacity","TICKS","createScatterPlotMatrix","attributesCount","yScale","axisBottom","xAxis","yAxis","ticks","tickSize","setAxis","plotMatrixItem","matrixItem","cell","clearBrush","brushSelection","makeBrush","descCompare","orderBy","getComparator","GLYPHS_CLASS","getGlyphsStyle","sortableDataset","sortedDataset","glyphSizeWithSpacing","glyphsCountPerLine","floor","glyphsCountPerHeight","ceil","glyphRadius","createGlyphs","lineRadialGenerator","lineRadial","radialScales","scaleRadial","getTransform","indexOf","getGlyphPath","PI","onMouseClick","changedData","click","SCATTER_PLOT_GLYPHS_CLASS","AXIS_TEXT_CLASS","getScatterPlotGlyphsStyle","createScatterPlotGlyphs","linearExtentInDomains","radialExtentInDomains","makeGlyphs","rotate","axisX","axisY","getDataTableRowStyle","paddingTop","dataTableStyle","tableHead","tableHeadRow","tableBody","filterRow","filterCell","filterIcon","notDisplayed","checkboxAll","DataTableBody","handleSelectClick","TableBody","TableRow","hover","TableCell","showFilter","redrawTime","setOrder","setOrderBy","doResort","setDoResort","filterValues","setFilterValues","filteredDataset","includes","handleSelectAllClick","handleRequestSort","property","isAsc","handleFilterValueChange","createSortHandler","sortTooltipTitle","headCellId","getTableHead","indeterminate","allChecked","TableHead","checkAll","TableSortLabel","active","direction","orderedByActive","sortDirection","FilterListOutlined","TableContainer","Table","container","justify","n","sourceLinks","depth","constant","ascendingSourceBreadth","ascendingBreadth","source","ascendingTargetBreadth","y0","defaultId","defaultNodes","graph","nodes","defaultLinks","links","find","nodeById","get","computeLinkBreadths","y1","link","targetLinks","Sankey","py","linkSort","x0","x1","dx","dy","align","iterations","sankey","apply","arguments","computeNodeLinks","computeNodeValues","computeNodeDepths","computeNodeHeights","computeNodeBreadths","entries","Map","push","fixedValue","sum","next","columns","kx","layer","computeNodeLayers","c","ky","reorderLinks","initializeNodeBreadths","alpha","pow","beta","relaxRightToLeft","relaxLeftToRight","column","v","reorderNodeLinks","resolveCollisions","subject","resolveCollisionsBottomToTop","resolveCollisionsTopToBottom","update","nodeId","nodeAlign","nodeSort","nodeWidth","nodePadding","horizontalSource","horizontalTarget","getCurrentWidth","currentCount","all","getStrokeWidth","isBrush","isOverlay","catAttributeValuesCounts","currentWidth","selectedFraction","getSelectionWidth","getYShift","valuesCount","yFormerShift","formerCount","slice","curr","getYFormerShift","yCatShift","getShift","TABS_CLASS","getParallelSetsBundledStyle","fontColorInner","mixBlendMode","nominalValuesRecord","setNominalValuesRecord","createParallelSetsBundled","displayPairs","getNeighborAttributes","pairWidth","valueCounts","arr","spacesAllMax","isLeft","half","displayPair","pairIdx","spacesPairMax","pairExtent","sankeyLayout","record","attFrom","attTo","toIdxStart","catAttributeOptions","flatMap","idxFrom","idxTo","filtered","getGraph","getPath","linkHorizontal","xShift","connectors","colorCategories","overlay","getViewRecord","s","f","View","dataProps","settingsCurr","overflowX","overflowY","GRID_ITEM_TEXT","inlineButton","inlineButtonStyles","buttonClose","buttonActive","ViewCloseButton","onRemove","Close","helpDialogStyle","iconedHeaderBox","brushContainer","topText","iconTextBox","inlineIcon","marginRight","ViewHelpButton","isDialogOpen","setIsDialogOpen","fullWidth","maxWidth","Help","saveSvg","svgContainer","querySelector","containerClass","classList","cls","newStyleNodes","querySelectorAll","sheet","cssRules","rules","cssText","createElement","innerHTML","insertBefore","firstChild","svgEl","fileName","setAttribute","svgBlob","Blob","outerHTML","svgUrl","URL","createObjectURL","downloadLink","download","body","appendChild","removeChild","saveSvgToFile","console","error","getSaveIsDisabled","ConfirmationDialog","onConfirm","cancelText","ViewSaveButton","openDialog","Save","GlyphAxesText","RotateRight","DataFilterButton","setShowFilter","FilterList","GridItem","isResizeFinished","rest","contextButton","isGlyphs","useSize","ReactGridLayout","WidthProvider","GridLayout","BaseViewGrid","isDrawerOpen","closeDrawer","isAddViewDialogOpen","isLayoutDialogOpen","viewProps","viewResizing","setViewResizing","setLastLayout","useWindowSize","windowWidth","windowHeight","updateLayout","newLayout","filteredLayout","addView","posY","removeView","dialogOptions","onLayoutChange","draggableHandle","onResizeStart","onResizeStop","cols","isResizable","ViewGrid","memo","emptyDataStyle","content","EmptyData","DataContext","dataLoadState","componentBrushing","setCurrentComponentBrushing","cleanBrushing","setCleanBrushing","Date","now","currentRedrawTime","setRedrawTime","setDrawerOpen","cleanBrushingRef","componentBrushingRef","setDatasetAndRemoveBrushing","cleanAllBrushes","deletePrevSelection","clearBrushesOnButton","newComponent","setIsBrushingOnEndOfMoveAndRemoveBrushing","newIsBrushingOnEndOfMove","topToolbarComponent","appStyle","app","App","ReactDOM","render"],"mappings":"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","file":"static/js/main.3c1a6bc4.chunk.js","sourcesContent":["export const CATEGORY_LIMIT = 10\n\nexport enum AcceptableFileTypes {\n  json = `application/json`,\n  csv = `text/csv`,\n}\n\nexport enum DataNullOptionType {\n  leave = `leave`,\n  change = `change`,\n  filter = `filter`,\n}\n\nexport const DATA_NULL_OPTION_TYPES = Object.values(DataNullOptionType)\n","export const HEADER_TEXT = {\n  title: `Tabular Data Visualizer`,\n  description: `Web Application for Tabular Data Visualization`,\n}\n","/**\n * Key to indicate whether the attribute is selected\n */\nexport const SelectedKey = `selected`\n\n/**\n * Acceptable simple JSON values for our data\n */\nexport type JsonValue = string | number | boolean | null\n\n/**\n * Interface for loaded JSON data\n */\nexport interface DataType {\n  readonly [key: string]: JsonValue\n}\n\n/**\n * Interface for loaded JSON data with selected flag\n */\nexport interface SelectableDataType extends DataType {\n  [SelectedKey]: boolean\n}\n\n/**\n * Interface that assigns attributes boolean value.\n * Used for selecting what axes to display.\n */\nexport interface CheckedForSelectableDataType {\n  [key: keyof SelectableDataType]: boolean\n}\n\n/**\n * Interface for properties of nominal value of attributes\n */\nexport interface NominalValueProperties {\n  name: string\n  attribute: keyof SelectableDataType\n  count: number\n  order: number\n  countSelected: number\n}\n\n/**\n * Interface for nominal value records\n * -- every attribute has array of possible values with additional info\n */\nexport interface NominalRecord {\n  [key: keyof SelectableDataType]: Array<NominalValueProperties>\n}\n\n/**\n * Interface for properties of pair of data, used for on graph\n * Also can include properties counts for third attribute values\n */\nexport type DataLink = {\n  source: number\n  target: number\n  catAttributeValuesCounts: number[] | undefined\n  selected: number[]\n  names: Array<string>\n  value: number\n}\n\n/**\n * Interface that assigns attributes numerical extent or null.\n * Used for axes' range.\n */\nexport interface ExtentForSelectableDataType {\n  [key: keyof SelectableDataType]: [number, number] | null\n}\n\n/**\n * Interface that assigns attributes numerical extent.\n * Used for axes' range.\n */\nexport interface ExtentReqForSelectableDataType {\n  [key: keyof SelectableDataType]: [number, number]\n}\n","import { JsonValue } from '../../types/data/data'\n\nconst withoutSpaces = /([A-Z])([A-Z])([a-z])|([a-z])([A-Z])/g\n\nexport const otherCasesToWhitespaces = (text: string | number): string =>\n  String(text).replace(withoutSpaces, `$1$4 $2$3$5`).replaceAll(`_`, ` `).trim().toLowerCase()\n\nexport const dataToReadable = (data: JsonValue): string => (data === null ? `null` : String(data))\n","import { SelectableDataType, SelectedKey } from '../types/data/data'\nimport { MatrixItem } from '../types/data/MatrixData'\nimport { LinkDataPoint, NodeDataPoint } from '../types/d3-sankey'\n\nimport { otherCasesToWhitespaces } from './data/formatText'\n\nexport const px = (...values: number[]): string => values.map((val) => `${val}px`).join(` `)\n\nexport const calc = (px: number, plus: string): string => `calc(${px}px + ${plus})`\n\nexport const important = (val: string | number): string => `${val} !important`\n\nexport const border = (value: number, color: string): string => `${value}px solid ${color}`\n\nexport const getEverything = (): `*` => `*`\n\nexport const getTranslate = (translate: [number, number]): string => `translate(${translate[0]}, ${translate[1]})`\n\nexport const getRotate = (rotate: number): string => `rotate(${rotate})`\n\nexport const getClass = (className: string): string => `.${className}`\n\nexport const getSpaced = (...values: string[]): string => values.join(` `)\n\nexport const getAttributeFormatted = (attribute: keyof SelectableDataType): string =>\n  otherCasesToWhitespaces(String(attribute))\n\nexport const getAttributeFromMatrixFormatted = (item: MatrixItem): string => getAttributeFormatted(item.rowKey)\n\nexport const getAttributeValuesWithLabel = (data: SelectableDataType): string[] =>\n  Object.keys(data)\n    .filter((key) => key !== SelectedKey)\n    .map((attribute) => [getAttributeFormatted(attribute), data[attribute] ?? `null`].join(`: `))\n\nexport type FilterKeys = Pick<LinkDataPoint, `y0` | `y1` | `width`>\n\nexport const getLinkDataPointValuesWithLabel = (data: LinkDataPoint): string[] => {\n  const filteredData: Record<string, string> = {\n    from: data.names[0],\n    to: data.names[1],\n    count: String(data.value),\n    selected: String(data.selected.reduce((acc, sel) => acc + sel, 0)),\n  }\n  return Object.keys(filteredData).map((key) => `${getAttributeFormatted(key)}: ${filteredData[key]}`)\n}\n\nexport const getNodeDataPointValuesWithLabel = (data: NodeDataPoint): string[] => {\n  const filteredData: Record<string, string> = {\n    attribute: otherCasesToWhitespaces(data.attribute),\n    name: data.name,\n    count: String(data.count),\n    selected: String(data.countSelected),\n  }\n  return Object.keys(filteredData).map((key) => `${getAttributeFormatted(key)}: ${filteredData[key]}`)\n}\n\nexport const getLabelledAttribute = (label: string, attribute: keyof SelectableDataType): string =>\n  getSpaced(label, otherCasesToWhitespaces(attribute))\n\nexport const getDisplayAttributesInParentheses = (displayAttributes: Array<keyof SelectableDataType>): string =>\n  `(` + displayAttributes.map((attribute) => otherCasesToWhitespaces(attribute)).join(`; `) + `)`\n","export const HEADER_COLORS = {\n  background: `#282c34`,\n  font: `#d6e1ff`,\n}\n\nexport const FOOTER_COLORS = {\n  background: `#1f2528`,\n  font: `#a3abc0`,\n}\n\nexport const TOP_TOOLBAR_COLORS = {\n  background: `#363a46`,\n  font: `#bcc7e7`,\n  border: `rgba(72, 80, 100, 0.8)`,\n}\n\nexport const DIALOG_COLORS = {\n  font: `#212121`,\n}\n\nexport const BUTTON_COLORS = {\n  buttonDisableBackground: `#363b46`,\n  buttonOffBackground: `#2d3548`,\n  buttonHoverBackground: `#b3bede`,\n  buttonOnBackground: `#d6e1ff`,\n  fontOn: `rgba(0, 0, 0, 0.87)`,\n  fontOff: `rgba(214, 225, 255, 0.6)`,\n  fontDisabled: `rgba(0, 0, 0, 0.26)`,\n  buttonInlined: `#576e9f`,\n  buttonInlinedFontOn: `#3965c4`,\n  buttonInlinedBgOn: `#e9eeff`,\n  buttonClose: `#4c4f56`,\n  border: `rgba(0, 0, 0, 0.12)`,\n  colorBorder: `#42495d`,\n  buttonDialogBackground: `#363a46`,\n  buttonDialogHoverBackground: `#1f2528`,\n  buttonDialogFont: `#d6e1ff`,\n}\n\nexport const CARD_COLORS = {\n  background: `#f7f8fd`,\n  backgroundHover: `#dce1ef`,\n  border: `#b3bede`,\n}\n\nexport const VIEW_COLORS = {\n  itemBackground: `#f2f3fa`,\n  border: `#9ea8be`,\n}\n\nexport const SETTINGS_DRAWER_COLORS = {\n  background: `#23262d`,\n  border: `#363a46`,\n  icon: `#c4cbdc`,\n  drawerItemBackground: `#edf1fd`,\n  drawerItemBackgroundDimmed: `#e4eafd`,\n  drawerItemBorder: `#98a1b6`,\n  label: `#404242`,\n}\n\nexport const PLOT_COLORS = {\n  backgroundColor: `rgba(250, 250, 250, 0.7)`,\n  fontColor: `#1f1f1f`,\n  tooltipBackground: `rgb(0, 66, 70)`,\n  tooltipFont: `#ccffff`,\n  axisLines: `#dddddd`,\n  axisLinesDark: `#999999`,\n  dataBox: `#aaaaaa`,\n}\n\nexport const SITE_COLORS = {\n  font: `#0d4b4d`,\n}\n\nexport const ERROR_COLORS = {\n  font: `#700000`,\n}\n\nexport const HIGHLIGHT_COLOR = {\n  border: `#da3512`,\n  background: `rgba(201, 30, 0, 0.5)`,\n  backgroundGone: `rgba(201, 30, 0, 0)`,\n}\n\nexport const TABLE_COLORS = {\n  headerFont: `#bcc7e7`,\n  headerFontActive: `#e1e7fc`,\n  headerBackground: `#363a46`,\n  filterIconFont: `#656d86`,\n  filterBackground: `#52586c`,\n  rowsBackground: `rgb(250, 250, 254)`,\n}\n","import { calc } from '../helpers/stringGetters'\n\nexport const HEADER_FONT = {\n  titleFontSize: calc(5, `2vmin`),\n  descriptionFontSize: calc(2, `1vmin`),\n}\n\nexport const FOOTER_FONT = {\n  fontSize: calc(2, `1vmin`),\n}\n\nexport const SETTINGS_DRAWER_FONT = {\n  headerFontSize: 15,\n  labelFontSize: `0.8em`,\n  fontSize: 12,\n}\n\nexport const PLOT_FONT = {\n  fontSize: 12,\n}\n\nexport const PLOT_FONT_BOX_SIZE = PLOT_FONT.fontSize + 2 // font box, 2px bigger than the fontSize\n","import { SxProps } from '@mui/system'\n\nimport { px } from '../../helpers/stringGetters'\n\nimport { HEADER_COLORS } from '../../styles/colors'\nimport { HEADER_FONT } from '../../styles/font'\n\nexport const headerStyle: Record<string, SxProps> = {\n  headerContainer: {\n    bgcolor: HEADER_COLORS.background,\n    padding: px(10, 0),\n    width: `100%`,\n    display: `flex`,\n    flexDirection: `row`,\n    alignItems: `flex-end`,\n    justifyContent: `space-between`,\n    color: HEADER_COLORS.font,\n  },\n  title: {\n    fontSize: HEADER_FONT.titleFontSize,\n    padding: px(0, 20),\n  },\n  description: {\n    padding: px(0, 15),\n    fontSize: HEADER_FONT.descriptionFontSize,\n  },\n}\n","import { VoidFunctionComponent } from 'react'\nimport { Box } from '@mui/material'\n\nimport { HEADER_TEXT } from '../../text/headerText'\n\nimport { headerStyle } from '../../components-style/header/headerStyle'\n\nexport const Header: VoidFunctionComponent = () => (\n  <Box sx={headerStyle.headerContainer}>\n    <Box sx={headerStyle.title}>{HEADER_TEXT.title}</Box>\n    <Box sx={headerStyle.description}>{HEADER_TEXT.description}</Box>\n  </Box>\n)\n","export const FOOTER_TEXT = {\n  author: `Zuzana ttinov`,\n  school: `CTU FEE`,\n  year: `2021-2022`,\n}\n","import { SxProps } from '@mui/system'\n\nimport { px } from '../../helpers/stringGetters'\n\nimport { FOOTER_COLORS } from '../../styles/colors'\nimport { FOOTER_FONT } from '../../styles/font'\n\nexport const footerStyle: Record<string, SxProps> = {\n  footerContainer: {\n    bgcolor: FOOTER_COLORS.background,\n    color: FOOTER_COLORS.font,\n    padding: px(10, 0),\n    width: `100%`,\n    display: `flex`,\n    flexDirection: `column`,\n    alignItems: `flex-end`,\n    justifyContent: `flex-end`,\n  },\n  text: {\n    padding: px(0, 15),\n    fontSize: FOOTER_FONT.fontSize,\n  },\n}\n","import { VoidFunctionComponent } from 'react'\nimport { Box } from '@mui/material'\n\nimport { FOOTER_TEXT } from '../../text/footerText'\n\nimport { footerStyle } from '../../components-style/footer/footerStyle'\n\nexport const Footer: VoidFunctionComponent = () => (\n  <Box sx={footerStyle.footerContainer}>\n    <Box sx={footerStyle.text}>{FOOTER_TEXT.author},</Box>\n    <Box sx={footerStyle.text}>\n      &copy; {FOOTER_TEXT.school}, {FOOTER_TEXT.year}\n    </Box>\n  </Box>\n)\n","import { MutableRefObject, useRef } from 'react'\n\nexport const useUpdatedRef = <T>(value: T): MutableRefObject<T> => {\n  const valueRef = useRef<T>(value)\n  valueRef.current = value\n  return valueRef\n}\n","import { useEffect, useState } from 'react'\n\nexport const useDebounce = <T>(value: T, delay: number): T => {\n  const [debouncedValue, setDebouncedValue] = useState(value)\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedValue(value)\n    }, delay)\n    return () => {\n      clearTimeout(handler)\n    }\n  }, [value, delay])\n  return debouncedValue\n}\n","export enum DataLoadState {\n  NoData = `no-data`,\n  Loading = `loading`,\n  Loaded = `loaded`,\n}\n","export enum ViewType {\n  ParallelCoordinates = `parallelCoordinates`,\n  ScatterPlotMatrix = `scatterPlotMatrix`,\n  Glyphs = `glyphs`,\n  ScatterPlotGlyphs = `ScatterPlotGlyphs`,\n  ParallelSetsBundled = `parallelSetsBundled`,\n  DataTable = `dataTable`,\n}\n\n/**\n * Any view with brushing extents (rectangles)\n */\nexport type brushViewType = `brushView`\nexport const brushView: brushViewType = `brushView`\n\nexport const isViewType = (viewType: string): viewType is ViewType => Object.values<string>(ViewType).includes(viewType)\n\n/**\n * True if the view have brushing with extents (rectangles)\n * @param component - component tested\n */\nexport const isBrushView = (component: ViewType | null): boolean =>\n  component === ViewType.ScatterPlotMatrix ||\n  component === ViewType.ScatterPlotGlyphs ||\n  component === ViewType.ParallelCoordinates\n","import {\n  CheckedForSelectableDataType,\n  DataLink,\n  ExtentForSelectableDataType,\n  NominalRecord,\n  NominalValueProperties,\n  SelectableDataType,\n  SelectedKey,\n} from '../../types/data/data'\nimport { NodeDataPoint, SankeyGraph } from '../../types/d3-sankey'\n\nimport { CATEGORY_LIMIT } from '../../constants/data/data'\n\nconst getDatasetSample = (dataset: ReadonlyArray<SelectableDataType>) => dataset[0]\n\nexport const getAttributeKeys = (dataset: ReadonlyArray<SelectableDataType>): Array<keyof SelectableDataType> =>\n  Object.keys(getDatasetSample(dataset)).filter((key) => key !== SelectedKey)\n\nexport const getDefaultQuantitativeAttributesKeys = (\n  dataset: ReadonlyArray<SelectableDataType>,\n): Array<keyof SelectableDataType> => getAttributeKeys(dataset).filter((key) => typeof dataset[0][key] === `number`)\n\nexport const getQuantitativeAttributesKeys = (\n  dataset: ReadonlyArray<SelectableDataType>,\n): Array<keyof SelectableDataType> =>\n  getAttributeKeys(dataset).filter((key) => dataset.every((data) => !isNaN(Number(data[key]))))\n\nexport const getCategoryAttributesKeys = (\n  dataset: ReadonlyArray<SelectableDataType>,\n): Array<keyof SelectableDataType> => {\n  const keys = getAttributeKeys(dataset)\n  return keys.filter((key) => {\n    const uniqueValues = new Set(dataset.map((data) => data[key]))\n    return uniqueValues.size < CATEGORY_LIMIT\n  })\n}\n\nexport const getDefaultAllAttributesChecked = (\n  dataset: ReadonlyArray<SelectableDataType>,\n): CheckedForSelectableDataType => {\n  const keys = getAttributeKeys(dataset)\n  return Object.fromEntries(keys.map((key) => [key, true]))\n}\n\nexport const getDefaultQuantitativeAttributesChecked = (\n  dataset: ReadonlyArray<SelectableDataType>,\n): CheckedForSelectableDataType => {\n  const defaultQuantitativeAttributesKeys = getDefaultQuantitativeAttributesKeys(dataset)\n  const possibleQuantitativeAttributesKeys = getQuantitativeAttributesKeys(dataset)\n\n  return Object.fromEntries(\n    possibleQuantitativeAttributesKeys.map((key) => [key, defaultQuantitativeAttributesKeys.some((kk) => kk === key)]),\n  )\n}\n\nexport const getDefaultNominalAttributesChecked = (\n  dataset: ReadonlyArray<SelectableDataType>,\n): CheckedForSelectableDataType => Object.fromEntries(getCategoryAttributesKeys(dataset).map((key) => [key, true]))\n\nexport const getDefaultSelectionForAttributes = (\n  displayAttributes: Array<keyof SelectableDataType>,\n): ExtentForSelectableDataType => Object.fromEntries(displayAttributes.map((key) => [key, null]))\n\nexport const getNominalValueProperties = (\n  dataset: ReadonlyArray<SelectableDataType>,\n  attribute: keyof SelectableDataType,\n): Array<NominalValueProperties> =>\n  dataset\n    .reduce((nominalValuePropertiesArr, data) => {\n      const containedIdx = nominalValuePropertiesArr.findIndex((values) => values.name === String(data[attribute]))\n      if (containedIdx !== -1) {\n        const prev = nominalValuePropertiesArr[containedIdx]\n        nominalValuePropertiesArr[containedIdx] = {\n          ...prev,\n          count: prev.count + 1,\n          countSelected: prev.countSelected + (data.selected ? 1 : 0),\n        }\n        return nominalValuePropertiesArr\n      }\n      const newNominalValueProperties: Omit<NominalValueProperties, `order`> = {\n        name: String(data[attribute]),\n        attribute,\n        count: 1,\n        countSelected: data.selected ? 1 : 0,\n      }\n      nominalValuePropertiesArr = [...nominalValuePropertiesArr, newNominalValueProperties]\n      return nominalValuePropertiesArr\n    }, [] as Array<Omit<NominalValueProperties, `order`>>)\n    .sort((a, b) => (b.name < a.name ? 1 : b.name > a.name ? -1 : 0))\n    .map((nvp, idx) => ({ ...nvp, order: idx }))\n\nexport const getNominalValuesRecord = (dataset: ReadonlyArray<SelectableDataType>): NominalRecord =>\n  Object.fromEntries(\n    getCategoryAttributesKeys(dataset).map((attribute) => [attribute, getNominalValueProperties(dataset, attribute)]),\n  )\n\nexport const getNeighborAttributes = (\n  displayAttributes: Array<keyof SelectableDataType>,\n): Array<[keyof SelectableDataType, keyof SelectableDataType]> =>\n  displayAttributes.slice(0, -1).map((att, idx) => [att, displayAttributes[idx + 1]])\n\nexport const getGraph = (\n  dataset: ReadonlyArray<SelectableDataType>,\n  categoryAttribute: keyof SelectableDataType | undefined,\n  record: NominalRecord,\n  attFrom: keyof SelectableDataType,\n  attTo: keyof SelectableDataType,\n): SankeyGraph => {\n  const nodes: Array<NodeDataPoint> = [...record[attFrom], ...record[attTo]]\n  const toIdxStart = record[attFrom].length\n\n  const catAttributeOptions = categoryAttribute ? record[categoryAttribute].map((props) => props.name) : []\n\n  const links: DataLink[] = record[attFrom].flatMap((from, idxFrom) =>\n    record[attTo].map((to, idxTo) => {\n      const filtered = dataset.filter(\n        (data) => String(data[attFrom]) === String(from.name) && String(data[attTo]) === String(to.name),\n      )\n      return {\n        source: idxFrom,\n        target: idxTo + toIdxStart,\n        names: [from.name, to.name],\n        catAttributeValuesCounts: catAttributeOptions.length\n          ? catAttributeOptions.map(\n              (value) => filtered.filter((data) => String(data[categoryAttribute!]) === value).length,\n            )\n          : undefined,\n        selected: catAttributeOptions.length\n          ? catAttributeOptions.map(\n              (value) => filtered.filter((data) => data.selected && String(data[categoryAttribute!]) === value).length,\n            )\n          : [filtered.filter((data) => data.selected).length],\n        value: filtered.length,\n      }\n    }),\n  )\n\n  return { nodes, links }\n}\n","import { Dimensions } from '../../types/basic/dimensions'\nimport { GridLayoutItem } from '../../types/views/Grid'\nimport { ViewType } from '../views-general/ViewType'\n\nexport const GRID_HEADER_HEIGHT = 30\n\nexport const DRAG_HANDLE = `drag-handle`\n\nexport const VIEW_DEFAULT_SIZE: Dimensions = {\n  width: 0,\n  height: 0,\n}\n\nexport const COLUMNS_COUNT = 25\nexport const ROW_HEIGHT = 10\n\nexport const VIEW_LIMITS: Record<ViewType, Required<Pick<GridLayoutItem, `minW` | `minH`>>> = {\n  [ViewType.ParallelCoordinates]: {\n    minW: 4,\n    minH: 8,\n  },\n  [ViewType.ScatterPlotMatrix]: {\n    minW: 4,\n    minH: 8,\n  },\n  [ViewType.Glyphs]: {\n    minW: 4,\n    minH: 6,\n  },\n  [ViewType.ScatterPlotGlyphs]: {\n    minW: 4,\n    minH: 8,\n  },\n  [ViewType.ParallelSetsBundled]: {\n    minW: 4,\n    minH: 8,\n  },\n  [ViewType.DataTable]: {\n    minW: 4,\n    minH: 10,\n  },\n}\n\nexport const DEFAULT_VIEW_DIMENSIONS: Record<ViewType, Required<Pick<GridLayoutItem, `w` | `h` | `minW` | `minH`>>> = {\n  [ViewType.ParallelCoordinates]: {\n    w: 12,\n    h: 16,\n    ...VIEW_LIMITS[ViewType.ParallelCoordinates],\n  },\n  [ViewType.ScatterPlotMatrix]: {\n    w: 14,\n    h: 26,\n    ...VIEW_LIMITS[ViewType.ScatterPlotMatrix],\n  },\n  [ViewType.Glyphs]: {\n    w: 12,\n    h: 12,\n    ...VIEW_LIMITS[ViewType.Glyphs],\n  },\n  [ViewType.ScatterPlotGlyphs]: {\n    w: 12,\n    h: 20,\n    ...VIEW_LIMITS[ViewType.ScatterPlotGlyphs],\n  },\n  [ViewType.ParallelSetsBundled]: {\n    w: 12,\n    h: 16,\n    ...VIEW_LIMITS[ViewType.ParallelSetsBundled],\n  },\n  [ViewType.DataTable]: {\n    w: 18,\n    h: 20,\n    ...VIEW_LIMITS[ViewType.DataTable],\n  },\n}\n\nexport const DEFAULT_GRID_LAYOUT_QUANTITATIVE: GridLayoutItem[] = [\n  {\n    i: ViewType.ParallelCoordinates,\n    w: 14,\n    h: 17,\n    x: 0,\n    y: 0,\n    ...VIEW_LIMITS[ViewType.ParallelCoordinates],\n  },\n  {\n    i: ViewType.ScatterPlotMatrix,\n    w: 11,\n    h: 30,\n    x: 14,\n    y: 0,\n    ...VIEW_LIMITS[ViewType.ScatterPlotMatrix],\n  },\n  {\n    i: ViewType.Glyphs,\n    w: 14,\n    h: 13,\n    x: 0,\n    y: 17,\n    ...VIEW_LIMITS[ViewType.Glyphs],\n  },\n]\n\nexport const DEFAULT_GRID_LAYOUT_NOMINAL: GridLayoutItem[] = [\n  {\n    i: ViewType.ParallelSetsBundled,\n    w: 25,\n    h: 20,\n    x: 0,\n    y: 0,\n    ...VIEW_LIMITS[ViewType.ParallelSetsBundled],\n  },\n]\n\nexport const LAYOUT_OPT_2: GridLayoutItem[] = [\n  {\n    i: ViewType.ParallelCoordinates,\n    w: 30,\n    h: 16,\n    x: 0,\n    y: 0,\n    ...VIEW_LIMITS[ViewType.ParallelCoordinates],\n  },\n  {\n    i: ViewType.ParallelSetsBundled,\n    w: 30,\n    h: 14,\n    x: 17,\n    y: 0,\n    ...VIEW_LIMITS[ViewType.ParallelSetsBundled],\n  },\n]\n\nexport const LAYOUT_OPT_3: GridLayoutItem[] = [\n  {\n    i: ViewType.ParallelCoordinates,\n    w: 14,\n    h: 16,\n    x: 0,\n    y: 0,\n    ...VIEW_LIMITS[ViewType.ParallelCoordinates],\n  },\n  {\n    i: ViewType.ScatterPlotMatrix,\n    w: 11,\n    h: 20,\n    x: 14,\n    y: 0,\n    ...VIEW_LIMITS[ViewType.ScatterPlotMatrix],\n  },\n  {\n    i: ViewType.Glyphs,\n    w: 11,\n    h: 10,\n    x: 14,\n    y: 20,\n    ...VIEW_LIMITS[ViewType.Glyphs],\n  },\n  {\n    i: ViewType.ParallelSetsBundled,\n    w: 14,\n    h: 14,\n    x: 0,\n    y: 16,\n    ...VIEW_LIMITS[ViewType.ParallelSetsBundled],\n  },\n]\nexport const LAYOUT_OPT_4: GridLayoutItem[] = [\n  {\n    i: ViewType.ParallelCoordinates,\n    w: 14,\n    h: 15,\n    x: 11,\n    y: 0,\n    ...VIEW_LIMITS[ViewType.ParallelCoordinates],\n  },\n  {\n    i: ViewType.ScatterPlotMatrix,\n    w: 11,\n    h: 30,\n    x: 0,\n    y: 0,\n    ...VIEW_LIMITS[ViewType.ScatterPlotMatrix],\n  },\n  {\n    i: ViewType.ScatterPlotGlyphs,\n    w: 14,\n    h: 15,\n    x: 11,\n    y: 15,\n    ...VIEW_LIMITS[ViewType.ScatterPlotGlyphs],\n  },\n]\n\nexport const LAYOUT_OPTIONS = [\n  DEFAULT_GRID_LAYOUT_QUANTITATIVE,\n  DEFAULT_GRID_LAYOUT_NOMINAL,\n  LAYOUT_OPT_2,\n  LAYOUT_OPT_3,\n  LAYOUT_OPT_4,\n]\n","import { forwardRef } from 'react'\nimport { Box } from '@mui/material'\n\nexport const BrushOffSvg = forwardRef((props, ref) => (\n  <Box ref={ref} style={{ height: 24 }} {...props}>\n    <svg\n      className=\"MuiSvgIcon-root MuiSvgIcon-fontSizeMedium\"\n      style={{\n        userSelect: `none`,\n        width: `1em`,\n        height: `1em`,\n        display: `inline-block`,\n        fill: `currentColor`,\n        flexShrink: 0,\n        fontSize: `1.5rem`,\n      }}\n      aria-hidden=\"true\"\n      viewBox=\"0 0 24 24\"\n    >\n      <path\n        d=\"M7 14c-1.66 0-3 1.34-3 3 0 1.31-1.16 2-2 2 .92 1.22 2.49 2 4 2 2.21 0 4-1.79 4-4 0-1.66-1.34-3-3-3zm13.71-9.37-1.34-1.34a.9959.9959 0 0 0-1.41 0L9 12.25 11.75 15l8.96-8.96c.39-.39.39-1.02 0-1.41z\"\n        id=\"path2\"\n      />\n      <path\n        d=\"M 3.27,3.26 2,4.53 C 19.47,22 2,4.53 19.47,22 l 1.27,-1.27 c -17.47,-17.47 0,0 -17.47,-17.47 z\"\n        id=\"path4\"\n      />\n    </svg>\n  </Box>\n))\n\nBrushOffSvg.displayName = `ButtonOffSvg`\n","import { forwardRef } from 'react'\nimport { Box } from '@mui/material'\n\nexport const TooltipSvg = forwardRef((props, ref) => (\n  <Box ref={ref} style={{ height: 24 }} {...props}>\n    <svg\n      className=\"MuiSvgIcon-root MuiSvgIcon-fontSizeMedium\"\n      style={{\n        userSelect: `none`,\n        width: `1em`,\n        height: `1em`,\n        display: `inline-block`,\n        fill: `currentColor`,\n        flexShrink: 0,\n        fontSize: `1.5rem`,\n      }}\n      aria-hidden=\"true\"\n      viewBox=\"0 0 24 24\"\n    >\n      <path\n        id=\"path2-2\"\n        style={{ strokeWidth: 1 }}\n        d=\"m 2.0292969,2.6826315 0.039063,15.5214845 c 0,1.091591 0.8902343,1.984375 1.9902344,1.984375 H 20.058594 c 1.1,0 2,-0.892784 2,-1.984375 V 6.2959128 c 0,-1.0915916 -0.900007,-1.988315 -2,-1.984375 L 3.7167969,4.3701315 Z M 5.1757812,8.3642721 H 12.84375 V 9.4170065 H 5.1757812 Z m 0,2.4999999 H 18.375 v 1.052734 H 5.1757812 Z m 0.1171876,2.5 h 8.8671872 v 1.052735 H 5.2929688 Z m -0.015625,2.5 H 17.130859 v 1.052735 H 5.2773438 Z\"\n      />\n    </svg>\n  </Box>\n))\n\nTooltipSvg.displayName = `TooltipSvg`\n","import { AirportShuttle, DirectionsBoat, DirectionsCar, LocalFlorist, Twitter } from '@mui/icons-material'\n\nimport flowerJson from '../../../test-data/flowerData.json'\nimport birdJson from '../../../test-data/birdData.json'\nimport carJson from '../../../test-data/carData.json'\nimport titanicJson from '../../../test-data/titanicData.json'\nimport parallelCarsJson from '../../../test-data/parallelCarsData.json'\n\nimport { DataType } from '../../types/data/data'\n\nexport enum SampleDataset {\n  flowers = `flower`,\n  birds = `bird`,\n  cars = `car`,\n  titanic = `titanic`,\n  parallelCars = `parallelCars`,\n}\n\nexport const SAMPLE_DATASET_OPTIONS = Object.values(SampleDataset)\n\nexport const sampleDatasetIcons: Record<SampleDataset, JSX.Element> = {\n  [SampleDataset.flowers]: <LocalFlorist />,\n  [SampleDataset.birds]: <Twitter />,\n  [SampleDataset.cars]: <DirectionsCar />,\n  [SampleDataset.titanic]: <DirectionsBoat />,\n  [SampleDataset.parallelCars]: <AirportShuttle />,\n}\n\nexport const sampleDatasets: Record<SampleDataset, DataType[]> = {\n  [SampleDataset.flowers]: flowerJson,\n  [SampleDataset.birds]: birdJson,\n  [SampleDataset.cars]: carJson,\n  [SampleDataset.titanic]: titanicJson,\n  [SampleDataset.parallelCars]: parallelCarsJson,\n}\n","export enum DataLoadError {\n  unsupportedFile = `unsupportedFile`,\n  unsupportedFormat = `unsupportedFileFormat`,\n}\n","import { SampleDataset } from '../constants/data/sampleDataset'\nimport { DataNullOptionType } from '../constants/data/data'\nimport { DataLoadError } from '../constants/data/DataLoadError'\n\nexport const EMPTY_DATA_TEXT = {\n  content: `To use the application, first load the dataset from a JSON or CSV file. You can also try this application with sample data.`,\n  firstTime: `Trying for the first time?`,\n  loading: `loading...`,\n  helpDialog: {\n    header: `About Tabular Data Visualizer`,\n    description: `The purpose of this application is to visualize multidimensional tabular data.`,\n    subHeader: `Options`,\n    close: `Close`,\n    sample: `To try the application, you can select one of the sample datasets. You can use flower or car dataset for quantitative data visualizations, titanic or parallel cars for category visualization, or bird dataset for combination of both.`,\n    file: `You use applications with your own datasets, JSON or CSV files. Files need to have the right format, for JSON it is the array of the same objects with only simple values.`,\n    viewsHelp: `To get more information about a specific view, you can look at its help, which can be found in its header.`,\n    add: `... add a new view type to the visualization board`,\n    layout: `... set one of the predefined layouts`,\n    tooltip: `... turn on/off tooltips or data items`,\n    skip: `... turn on/off brushing only at the end of the move. Works for range brushes (scatter plot, parallel coordinates). Enabling this option is recommended if the application runs too slow during brushing.`,\n    brush: `... change the color of the brush`,\n    brushOff: `... clean all active brushing`,\n    settings: `... show more settings for views`,\n  },\n}\n\nexport const TOP_TOOLBAR_TEXT = {\n  labelDetailsVisible: `Display tooltips`,\n  labelClearBrushes: `Clear brushes`,\n  labelAddView: `Add a view`,\n  labelBrushingOnEOM: `Set brushing at the end of the move only`,\n  labelBrushColor: `Brush color`,\n  addViewDialogTitle: `Add a view`,\n  labelDialogTitle: `Set predefined layout`,\n  noOption: `All view options are currently displayed.`,\n  settings: `Settings`,\n  filter: `Filter`,\n}\n\nexport const SAVE_TEXT = {\n  header: `Save to file`,\n  description: `Do you want to save the visualization to an SVG file?`,\n  save: `Save as SVG`,\n  confirm: `Save`,\n  cancel: `Cancel`,\n}\n\nexport const VIEW_INFO_TEXT = {\n  buttonLabel: `Show view information`,\n  dialog: {\n    brushing: `Brushing`,\n    settings: `Settings`,\n    options: `Options`,\n    close: `Close`,\n  },\n}\n\nexport const FILE_READER_TEXT = {\n  button: `Select a file`,\n  sampleDataLabel: `Try it on the sample data`,\n  sampleDataDialogTitle: `Select sample dataset`,\n  sampleDataDialogText: {\n    [SampleDataset.flowers]: `Flower dataset`,\n    [SampleDataset.birds]: `Bird dataset`,\n    [SampleDataset.cars]: `Car dataset`,\n    [SampleDataset.titanic]: `Titanic dataset`,\n    [SampleDataset.parallelCars]: `Car parallel dataset`,\n  },\n  alertDialog: {\n    [DataLoadError.unsupportedFile]: {\n      title: `File type not supported`,\n      description: `This file type is not supported. Use JSON or CSV file.`,\n    },\n    [DataLoadError.unsupportedFormat]: {\n      title: `File format not supported`,\n      description: `The file format is invalid. The valid JSON file format is an array of objects with the same keys and simple JSON values (number, string, boolean, null).`,\n    },\n    confirm: `OK`,\n  },\n  nullDialog: {\n    title: `Data with null values occurred!`,\n    description: `This application provides only basic operations for modifying null data values. For better processing, use applications designed for this purpose.`,\n    confirm: `Confirm`,\n    optionsText: {\n      [DataNullOptionType.leave]: `Leave as is`,\n      [DataNullOptionType.filter]: `Filter`,\n      [DataNullOptionType.change]: `Change all`,\n    },\n    optionsDescription: {\n      [DataNullOptionType.leave]: `This option leaves the data as is. On numeric scales, null values will be cast to 0, in the table they will be displayed as null; for categorical data a separate category will be created.`,\n      [DataNullOptionType.filter]: `This option filters out all data with null values. These data will not be considered further in the application.`,\n      [DataNullOptionType.change]: `This option replaces all null values with the value entered below.`,\n    },\n    changeTo: `Change to`,\n    attribute: `Attribute:`,\n  },\n}\n\nexport const LAYOUT_DIALOG_TEXT = {\n  title: `Set a layout`,\n  alt: `Layout `,\n}\n","export enum SortType {\n  asc = `asc`,\n  desc = `desc`,\n}\n","import { SxProps } from '@mui/system'\n\nimport { border, px } from '../../../helpers/stringGetters'\n\nimport { TOP_TOOLBAR_COLORS } from '../../../styles/colors'\n\nexport const topToolbarStyle: Record<string, SxProps> = {\n  toolbar: {\n    width: `100%`,\n    padding: px(10, 0),\n    display: `flex`,\n    justifyContent: `space-between`,\n    alignItems: `stretch`,\n    bgcolor: TOP_TOOLBAR_COLORS.background,\n    color: TOP_TOOLBAR_COLORS.font,\n    flexWrap: `wrap`,\n  },\n  separator: {\n    height: `100%`,\n    margin: px(0, 4),\n    borderLeft: border(2, TOP_TOOLBAR_COLORS.border),\n  },\n  left: {\n    display: `flex`,\n    margin: px(0, 12),\n    alignItems: `center`,\n  },\n  middle: {\n    display: `flex`,\n    alignItems: `center`,\n  },\n  right: {\n    display: `flex`,\n    alignItems: `center`,\n  },\n}\n","/**\n * mui types\n */\nexport const COMPONENT_TYPE = {\n  image: `img` as `img`,\n  label: `label` as `label`,\n}\n\nexport const BUTTON_VARIANT = {\n  text: `text` as `text`,\n  outlined: `outlined` as `outlined`,\n  contained: `contained` as `contained`,\n}\n\nexport const DRAWER_VARIANT = {\n  permanent: `permanent` as `permanent`,\n  persistent: `persistent` as `persistent`,\n  temporary: `temporary` as `temporary`,\n}\n\nexport const ANCHOR = {\n  left: `left` as `left`,\n  top: `top` as `top`,\n  right: `right` as `right`,\n  bottom: `bottom` as `bottom`,\n}\n\nexport const CELL_PADDING = {\n  checkbox: `checkbox` as `checkbox`,\n  none: `none` as `none`,\n}\n\nexport const DIALOG_MAX_WIDTH = {\n  xs: `xs` as `xs`,\n  s: `sm` as `sm`,\n  m: `md` as `md`,\n  l: `lg` as `lg`,\n  xl: `xl` as `xl`,\n}\n","import { SxProps } from '@mui/system'\n\nimport { border, px } from '../../../../../helpers/stringGetters'\n\nimport { BUTTON_COLORS } from '../../../../../styles/colors'\n\nexport const topToolbarButtonStyle: Record<string, SxProps> = {\n  button: {\n    margin: px(0, 5),\n    padding: px(4),\n    minWidth: 0,\n    flexShrink: 0,\n    '&.MuiButtonBase-root': {\n      bgcolor: BUTTON_COLORS.buttonDisableBackground,\n      color: BUTTON_COLORS.fontDisabled,\n      border: border(1, BUTTON_COLORS.border),\n    },\n    '&.MuiButtonBase-root:not(.Mui-disabled)': {\n      bgcolor: BUTTON_COLORS.buttonOnBackground,\n      color: BUTTON_COLORS.fontOn,\n      '&:hover': {\n        bgcolor: BUTTON_COLORS.buttonHoverBackground,\n      },\n      '&.MuiToggleButton-root:not(.Mui-selected)': {\n        bgcolor: BUTTON_COLORS.buttonOffBackground,\n        color: BUTTON_COLORS.fontOff,\n      },\n    },\n  },\n}\n","import { VoidFunctionComponent } from 'react'\nimport { Button, Tooltip } from '@mui/material'\n\nimport { BUTTON_VARIANT } from '../../../../../constants/mui'\n\nimport { topToolbarButtonStyle } from '../../../../../components-style/content/top-toolbar/items/buttons/topToolbarButtonStyle'\n\nexport interface ClickableButtonDataProps {\n  onClick: () => void\n  disabled?: boolean\n  icon: JSX.Element\n  label: string\n}\n\nexport type ButtonProps = ClickableButtonDataProps\n\nexport const ClickableButton: VoidFunctionComponent<ButtonProps> = ({ icon, onClick, disabled, label }) => (\n  <Button variant={BUTTON_VARIANT.contained} onClick={onClick} sx={topToolbarButtonStyle.button} disabled={disabled}>\n    <Tooltip title={label}>{icon}</Tooltip>\n  </Button>\n)\n","import { parse } from 'csv-string'\nimport { DataType, JsonValue } from '../../types/data/data'\n\nexport const isJsonValue = (value: unknown): value is JsonValue =>\n  typeof value === `number` || typeof value === `string` || typeof value === `boolean` || value === null\n\nexport const isArrayOfDataType = (dataset: unknown): dataset is ReadonlyArray<DataType> => {\n  if (Array.isArray(dataset) && dataset.length > 0) {\n    const example = dataset[0]\n    const keys = Object.keys(example)\n    return dataset.every(\n      (data) => Object.keys(data).every((key, idx) => key === keys[idx]) && Object.values(data).every(isJsonValue),\n    )\n  }\n  return false\n}\n\nexport const CsvParse = (textCsv: string): DataType[] =>\n  parse(textCsv, { output: `objects` }).map((data) =>\n    Object.fromEntries(\n      Object.keys(data).map((key) => {\n        const value = data[key]\n        if (value.toLowerCase() === `null` || value === ``) return [key, null]\n        if (value.toLowerCase() === `true`) return [key, true]\n        if (value.toLowerCase() === `false`) return [key, false]\n        const numValue = Number(value.replace(`,`, `.`))\n        if (!isNaN(numValue)) return [key, numValue]\n        return [key, value]\n      }),\n    ),\n  )\n","import { InputBaseComponentProps } from '@mui/material/InputBase'\n\nexport const HTML = {\n  newLine: `<br/>`,\n}\n\nexport const INPUT_TYPE = {\n  color: `color`,\n  number: `number`,\n  file: `file`,\n}\n\nexport const INPUT_PROPS: Record<string, InputBaseComponentProps> = {\n  positiveNumber: { inputMode: `numeric`, min: 0 },\n}\n","import { SxProps } from '@mui/system'\n\nimport { border, px } from '../../../../../helpers/stringGetters'\n\nimport { BUTTON_COLORS, HIGHLIGHT_COLOR } from '../../../../../styles/colors'\n\nexport const getFileReaderBoxStyle = (isHighlighted: boolean): SxProps => ({\n  transition: `0.3s all ease`,\n  border: isHighlighted ? border(2, HIGHLIGHT_COLOR.border) : border(0, HIGHLIGHT_COLOR.border),\n  bgcolor: isHighlighted ? HIGHLIGHT_COLOR.background : HIGHLIGHT_COLOR.backgroundGone,\n  display: `flex`,\n  alignItems: `center`,\n  padding: isHighlighted ? px(8, 2) : 0,\n  borderRadius: px(10),\n})\n\nexport const fileReaderStyle: Record<string, SxProps> = {\n  button: {\n    margin: px(0, 3, 0, 2),\n    padding: px(6, 12, 6, 8),\n    minWidth: 0,\n    bgcolor: BUTTON_COLORS.buttonOnBackground,\n    color: BUTTON_COLORS.fontOn,\n    '&:hover': {\n      bgcolor: BUTTON_COLORS.buttonHoverBackground,\n    },\n    '& span': {\n      paddingLeft: px(5),\n    },\n    '@media (max-width: 600px)': {\n      padding: px(6, 8),\n      '& span': {\n        display: `none`,\n      },\n    },\n  },\n}\n","import { SxProps } from '@mui/system'\n\nimport { border, important, px } from '../../../helpers/stringGetters'\n\nimport { SITE_COLORS, ERROR_COLORS, BUTTON_COLORS, CARD_COLORS } from '../../../styles/colors'\n\nexport const dialogStyle: Record<string, SxProps> = {\n  dialog: {\n    '& .MuiPaper-root': {\n      minWidth: px(300),\n    },\n  },\n  alert: {\n    color: ERROR_COLORS.font,\n  },\n  description: {\n    padding: px(25, 30, 20),\n    color: SITE_COLORS.font,\n  },\n  innerContent: {\n    padding: px(0, 40, 10),\n  },\n  contentBox: {\n    height: px(120),\n    display: `flex`,\n    flexDirection: `column`,\n  },\n  text: {\n    color: SITE_COLORS.font,\n  },\n  toggleDialogGroup: {\n    width: `100%`,\n    marginBottom: px(5),\n    display: `flex`,\n  },\n  toggleDialogButton: {\n    flexGrow: 1,\n    padding: px(6),\n    '&.Mui-selected': {\n      bgcolor: BUTTON_COLORS.buttonDialogBackground,\n      color: BUTTON_COLORS.buttonDialogFont,\n      '&:hover': {\n        bgcolor: BUTTON_COLORS.buttonDialogHoverBackground,\n      },\n    },\n  },\n  button: {\n    margin: px(0, 20, 20),\n  },\n  attHeader: {\n    fontSize: px(16),\n    fontWeight: `bold`,\n    paddingBottom: px(4),\n    color: SITE_COLORS.font,\n  },\n  textInput: {\n    minWidth: `95%`,\n    alignSelf: `center`,\n    '&.MuiFormControl-root': {\n      margin: px(20, 6, 6),\n    },\n    '& input': {\n      padding: px(8, 10, 6),\n    },\n  },\n  card: {\n    display: `flex`,\n    justifyContent: `space-between`,\n    minWidth: px(400),\n    border: border(1, CARD_COLORS.border),\n    margin: px(2),\n    bgcolor: CARD_COLORS.background,\n    '&:hover': {\n      bgcolor: important(CARD_COLORS.backgroundHover),\n      '& img': {\n        opacity: 0.6,\n      },\n    },\n    '@media (max-width: 520px)': {\n      minWidth: 0,\n    },\n  },\n  image: {\n    width: 220,\n    height: 85,\n    borderRadius: px(2),\n  },\n  cardContent: {\n    padding: px(10),\n  },\n  itemText: {\n    fontSize: px(10),\n  },\n}\n","import {\n  Avatar,\n  Dialog,\n  DialogTitle,\n  Divider,\n  List,\n  ListItem,\n  ListItemAvatar,\n  ListItemText,\n  Typography,\n} from '@mui/material'\n\nimport { dialogStyle } from '../../../../components-style/content/common/dialogStyle'\n\nexport interface Option<T> {\n  key: T\n  label: string\n  icon: JSX.Element\n}\n\nexport interface SelectionDialogProps<T> {\n  isOpen: boolean\n  onClose: () => void\n  title: string\n  options: Array<Option<T>>\n  handleListItemClick: (optionKey: T) => void\n  noOptionText?: string\n}\n\nexport const SelectionDialog = <T,>({\n  isOpen,\n  onClose,\n  title,\n  options,\n  handleListItemClick,\n  noOptionText,\n}: SelectionDialogProps<T>): JSX.Element => (\n  <Dialog onClose={onClose} open={isOpen} sx={dialogStyle.dialog}>\n    <DialogTitle>{title}</DialogTitle>\n    <Divider />\n    <List>\n      {options.map((option) => (\n        <ListItem button onClick={() => handleListItemClick(option.key)} key={String(option.key)}>\n          <ListItemAvatar>\n            <Avatar>{option.icon}</Avatar>\n          </ListItemAvatar>\n          <ListItemText primary={option.label} />\n        </ListItem>\n      ))}\n      {!options.length && <Typography sx={dialogStyle.description}>{noOptionText}</Typography>}\n    </List>\n  </Dialog>\n)\n","import { VoidFunctionComponent } from 'react'\nimport { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Divider } from '@mui/material'\n\nimport { dialogStyle } from '../../../../components-style/content/common/dialogStyle'\n\nexport interface InformationDialogProps {\n  isOpen: boolean\n  onClose: () => void\n  title?: string\n  description?: string\n  confirmText: string\n  alert?: boolean\n}\n\nexport const InformationDialog: VoidFunctionComponent<InformationDialogProps> = ({\n  isOpen,\n  onClose,\n  title,\n  description,\n  confirmText,\n  alert = false,\n}) => (\n  <Dialog onClose={onClose} open={isOpen}>\n    <DialogTitle>{title}</DialogTitle>\n    <Divider />\n    <DialogContent>\n      <DialogContentText sx={alert ? dialogStyle.alert : {}}>{description}</DialogContentText>\n    </DialogContent>\n    <DialogActions>\n      <Button onClick={onClose} autoFocus>\n        {confirmText}\n      </Button>\n    </DialogActions>\n  </Dialog>\n)\n","import { useCallback, useEffect, useState, VoidFunctionComponent } from 'react'\nimport {\n  Box,\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  Divider,\n  TextField,\n  ToggleButton,\n  ToggleButtonGroup,\n  Typography,\n} from '@mui/material'\n\nimport { SelectableDataType } from '../../../../../types/data/data'\n\nimport { getLabelledAttribute } from '../../../../../helpers/stringGetters'\n\nimport { DATA_NULL_OPTION_TYPES, DataNullOptionType } from '../../../../../constants/data/data'\nimport { BUTTON_VARIANT } from '../../../../../constants/mui'\n\nimport { FILE_READER_TEXT } from '../../../../../text/siteText'\n\nimport { dialogStyle } from '../../../../../components-style/content/common/dialogStyle'\n\nexport interface NullDialogProps {\n  isOpen: boolean\n  onClose: () => void\n  nullContainingAttributes: Array<keyof SelectableDataType>\n  dataset: Array<SelectableDataType>\n  setDataset: (dataset: Array<SelectableDataType>) => void\n}\n\nexport const NullDialog: VoidFunctionComponent<NullDialogProps> = ({\n  isOpen,\n  onClose,\n  nullContainingAttributes,\n  dataset,\n  setDataset,\n}) => {\n  const [optionsChosen, setOptionsChosen] = useState<Record<keyof SelectableDataType, DataNullOptionType>>(\n    Object.fromEntries(nullContainingAttributes.map((att) => [att, DataNullOptionType.leave])),\n  )\n  const [replaceValue, setReplaceValue] = useState<Record<keyof SelectableDataType, string>>(\n    Object.fromEntries(nullContainingAttributes.map((att) => [att, ``])),\n  )\n\n  useEffect(() => {\n    setOptionsChosen(Object.fromEntries(nullContainingAttributes.map((att) => [att, DataNullOptionType.leave])))\n    setReplaceValue(Object.fromEntries(nullContainingAttributes.map((att) => [att, ``])))\n  }, [nullContainingAttributes])\n\n  const getFixedDataset = useCallback(\n    (dataset: SelectableDataType[], attribute: keyof SelectableDataType) => {\n      switch (optionsChosen[attribute]) {\n        case DataNullOptionType.filter:\n          return dataset.filter((data) => data[attribute] !== null)\n        case DataNullOptionType.change: {\n          const newValue = !isNaN(Number(replaceValue[attribute]))\n            ? Number(replaceValue[attribute])\n            : replaceValue[attribute]\n          return dataset.map((data) => ({\n            ...data,\n            [attribute]: data[attribute] === null ? newValue : data[attribute],\n          }))\n        }\n        case DataNullOptionType.leave:\n        default:\n          return dataset\n      }\n    },\n    [optionsChosen, replaceValue],\n  )\n\n  const handleNullDialogConfirm = useCallback(() => {\n    let datasetFixed: SelectableDataType[] = dataset\n    nullContainingAttributes.forEach((attribute) => {\n      datasetFixed = getFixedDataset(datasetFixed, attribute)\n    })\n    setDataset(datasetFixed)\n  }, [dataset, getFixedDataset, nullContainingAttributes, setDataset])\n\n  const handleToggleChange = useCallback(\n    (value: DataNullOptionType | null, attribute: keyof SelectableDataType) =>\n      setOptionsChosen((prev) => ({\n        ...prev,\n        [attribute]: value ? value : prev[attribute],\n      })),\n    [],\n  )\n  const handleReplaceChange = useCallback(\n    (value: string, attribute: keyof SelectableDataType) =>\n      setReplaceValue((prev) => ({\n        ...prev,\n        [attribute]: value,\n      })),\n    [],\n  )\n\n  return (\n    <Dialog onClose={onClose} open={isOpen}>\n      <DialogTitle>{FILE_READER_TEXT.nullDialog.title}</DialogTitle>\n      <Divider />\n      <DialogContent>\n        <DialogContentText sx={dialogStyle.description}>{FILE_READER_TEXT.nullDialog.description}</DialogContentText>\n        {nullContainingAttributes.map((attribute) => {\n          const option = optionsChosen[attribute]\n          return (\n            <Box key={attribute} sx={dialogStyle.innerContent}>\n              <Typography sx={dialogStyle.attHeader}>\n                {getLabelledAttribute(FILE_READER_TEXT.nullDialog.attribute, attribute)}\n              </Typography>\n              <ToggleButtonGroup\n                sx={dialogStyle.toggleDialogGroup}\n                value={option}\n                exclusive\n                onChange={(e, value) => handleToggleChange(value, attribute)}\n              >\n                {DATA_NULL_OPTION_TYPES.map((optType, idx) => (\n                  <ToggleButton sx={dialogStyle.toggleDialogButton} value={optType} key={idx}>\n                    {FILE_READER_TEXT.nullDialog.optionsText[optType]}\n                  </ToggleButton>\n                ))}\n              </ToggleButtonGroup>\n              <Box sx={dialogStyle.contentBox}>\n                <Typography sx={dialogStyle.text}>{FILE_READER_TEXT.nullDialog.optionsDescription[option]}</Typography>\n                {option === DataNullOptionType.change && (\n                  <TextField\n                    label={FILE_READER_TEXT.nullDialog.changeTo}\n                    sx={dialogStyle.textInput}\n                    defaultValue={replaceValue[attribute]}\n                    onChange={(e) => handleReplaceChange(e.target.value, attribute)}\n                  />\n                )}\n              </Box>\n            </Box>\n          )\n        })}\n      </DialogContent>\n      <DialogActions>\n        <Button variant={BUTTON_VARIANT.contained} onClick={handleNullDialogConfirm} sx={dialogStyle.button} autoFocus>\n          {FILE_READER_TEXT.nullDialog.confirm}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n","import { Dispatch, VoidFunctionComponent, SetStateAction, useState, useCallback, ChangeEvent } from 'react'\nimport { Box, Button, Tooltip } from '@mui/material'\nimport { AutoGraph, UploadFile } from '@mui/icons-material'\n\nimport { DataType, SelectableDataType } from '../../../../../types/data/data'\n\nimport { CsvParse, isArrayOfDataType } from '../../../../../helpers/data/dataConvertors'\nimport { getAttributeKeys } from '../../../../../helpers/data/data'\n\nimport { AcceptableFileTypes } from '../../../../../constants/data/data'\nimport { DataLoadState } from '../../../../../constants/data/DataLoadState'\nimport {\n  SAMPLE_DATASET_OPTIONS,\n  SampleDataset,\n  sampleDatasetIcons,\n  sampleDatasets,\n} from '../../../../../constants/data/sampleDataset'\nimport { BUTTON_VARIANT, COMPONENT_TYPE } from '../../../../../constants/mui'\nimport { INPUT_TYPE } from '../../../../../constants/others'\nimport { DataLoadError } from '../../../../../constants/data/DataLoadError'\n\nimport { FILE_READER_TEXT } from '../../../../../text/siteText'\n\nimport {\n  fileReaderStyle,\n  getFileReaderBoxStyle,\n} from '../../../../../components-style/content/top-toolbar/items/file-reader/fileReaderStyle'\n\nimport { SelectionDialog } from '../../../common/dialogs/SelectionDialog'\nimport { InformationDialog } from '../../../common/dialogs/InformationDialog'\n\nimport { ClickableButton } from '../buttons/ClickableButton'\nimport { NullDialog } from './NullDialog'\n\nexport interface FileReaderDataProps {\n  setDataset: (dataset: ReadonlyArray<SelectableDataType> | null) => void\n  setDataLoadState: Dispatch<SetStateAction<DataLoadState>>\n}\n\nexport interface FileReaderProps extends FileReaderDataProps {\n  isHighlighted: boolean\n}\n\nexport const addSelected = (data: Array<DataType>): Array<SelectableDataType> =>\n  data.map((d) => ({ ...d, selected: false }))\n\nconst FILE_INPUT_ID = `FILE_INPUT`\n\nexport const FileReader: VoidFunctionComponent<FileReaderProps> = ({ setDataset, setDataLoadState, isHighlighted }) => {\n  const [isSampleDataDialogOpen, setIsSampleDataDialogOpen] = useState(false)\n\n  const [isNullDialogOpen, setIsNullDialogOpen] = useState(false)\n  const [nullContainingAttributes, setNullContainingAttributes] = useState<Array<keyof SelectableDataType>>([])\n  const [rawDataset, setRawDataset] = useState<Array<SelectableDataType>>([])\n\n  const [isAlertDialogOpen, setIsAlertDialogOpen] = useState(false)\n  const [alertDialogText, setAlertDialogText] = useState<{ title: string; description: string } | null>(null)\n\n  const handleListItemClick = useCallback(\n    (optionKey: SampleDataset) => {\n      setIsSampleDataDialogOpen(false)\n      const dataset = sampleDatasets[optionKey]\n      setDataset(addSelected(dataset))\n      setDataLoadState(DataLoadState.Loaded)\n    },\n    [setDataLoadState, setDataset],\n  )\n\n  const closeDialog = useCallback(() => {\n    setIsNullDialogOpen(false)\n    setRawDataset([])\n    setNullContainingAttributes([])\n  }, [])\n\n  const getDatasetFromFile = useCallback(\n    async (fileType: AcceptableFileTypes | string, selectedFile: File): Promise<DataType[] | null> => {\n      switch (fileType) {\n        case AcceptableFileTypes.json: {\n          const text = await selectedFile.text()\n          return JSON.parse(text)\n        }\n        case AcceptableFileTypes.csv: {\n          const textCsv = await selectedFile.text()\n          return CsvParse(textCsv)\n        }\n        default: {\n          return null\n        }\n      }\n    },\n    [],\n  )\n\n  const handleFileChange = useCallback(\n    async (e: ChangeEvent<HTMLInputElement>) => {\n      if (e.target.files?.length) {\n        setDataLoadState(DataLoadState.Loading)\n        const selectedFile = e.target.files[0]\n        const fileType = selectedFile.type\n        const dataset = await getDatasetFromFile(fileType, selectedFile)\n\n        if (dataset === null || !isArrayOfDataType(dataset)) {\n          const dataLoadErrorType = dataset === null ? DataLoadError.unsupportedFile : DataLoadError.unsupportedFormat\n          setDataLoadState(DataLoadState.NoData)\n          setAlertDialogText(FILE_READER_TEXT.alertDialog[dataLoadErrorType])\n          setIsAlertDialogOpen(true)\n          setDataset(null)\n          return\n        }\n\n        const selectableDataset = addSelected(dataset)\n        const nullContainingAttributes = getAttributeKeys(selectableDataset).filter((att) =>\n          dataset.some((data) => data[att] === null),\n        )\n        if (nullContainingAttributes.length) {\n          setNullContainingAttributes(nullContainingAttributes)\n          setRawDataset(selectableDataset)\n          setIsNullDialogOpen(true)\n          const fileEl = document.getElementById(FILE_INPUT_ID) as unknown as { value: null }\n          fileEl.value = null\n          return\n        }\n        setDataset(selectableDataset)\n        setDataLoadState(DataLoadState.Loaded)\n      }\n    },\n    [getDatasetFromFile, setDataLoadState, setDataset],\n  )\n\n  return (\n    <>\n      <SelectionDialog\n        isOpen={isSampleDataDialogOpen}\n        onClose={() => setIsSampleDataDialogOpen(false)}\n        title={FILE_READER_TEXT.sampleDataDialogTitle}\n        options={SAMPLE_DATASET_OPTIONS.map((key) => ({\n          key,\n          label: FILE_READER_TEXT.sampleDataDialogText[key],\n          icon: sampleDatasetIcons[key],\n        }))}\n        handleListItemClick={handleListItemClick}\n      />\n      <InformationDialog\n        isOpen={isAlertDialogOpen}\n        onClose={() => setIsAlertDialogOpen(false)}\n        title={alertDialogText?.title}\n        description={alertDialogText?.description}\n        confirmText={FILE_READER_TEXT.alertDialog.confirm}\n        alert={true}\n      />\n      <NullDialog\n        isOpen={isNullDialogOpen}\n        onClose={() => {\n          setDataLoadState(DataLoadState.NoData)\n          closeDialog()\n        }}\n        nullContainingAttributes={nullContainingAttributes}\n        dataset={rawDataset}\n        setDataset={(dataset) => {\n          setDataset(dataset)\n          setDataLoadState(DataLoadState.Loaded)\n          closeDialog()\n        }}\n      />\n      <Box sx={getFileReaderBoxStyle(isHighlighted)}>\n        <ClickableButton\n          onClick={() => setIsSampleDataDialogOpen(true)}\n          icon={<AutoGraph />}\n          label={FILE_READER_TEXT.sampleDataLabel}\n        />\n        <Button sx={fileReaderStyle.button} variant={BUTTON_VARIANT.contained} component={COMPONENT_TYPE.label}>\n          <Tooltip title={FILE_READER_TEXT.button}>\n            <UploadFile />\n          </Tooltip>\n          <span>{FILE_READER_TEXT.button}</span>\n          <input type={INPUT_TYPE.file} hidden id={FILE_INPUT_ID} onChange={handleFileChange} />\n        </Button>\n      </Box>\n    </>\n  )\n}\n","import { Dispatch, VoidFunctionComponent, MouseEvent, SetStateAction, useCallback } from 'react'\nimport { ToggleButton, ToggleButtonGroup, Tooltip } from '@mui/material'\n\nimport { topToolbarButtonStyle } from '../../../../../components-style/content/top-toolbar/items/buttons/topToolbarButtonStyle'\n\ntype SetValue = Dispatch<SetStateAction<boolean>> | ((newValue: boolean) => void)\n\nexport interface ToggleButtonProps {\n  value: boolean\n  setValue: SetValue\n  icon: JSX.Element\n  label: string\n  disabled?: boolean\n}\nconst ON_VALUE = `on`\n\nexport const ToggleButtonSingle: VoidFunctionComponent<ToggleButtonProps> = ({\n  icon,\n  value,\n  setValue,\n  label,\n  disabled,\n}) => {\n  const handleChange = useCallback(\n    (event: MouseEvent<HTMLElement>, checked: string[]) => {\n      if (checked.length && checked[0] === ON_VALUE) {\n        return setValue(true)\n      }\n      return setValue(false)\n    },\n    [setValue],\n  )\n  return (\n    <ToggleButtonGroup value={value ? [ON_VALUE] : []} onChange={handleChange}>\n      <ToggleButton sx={topToolbarButtonStyle.button} value={ON_VALUE} disabled={disabled}>\n        <Tooltip title={label}>{icon}</Tooltip>\n      </ToggleButton>\n    </ToggleButtonGroup>\n  )\n}\n","import { SxProps } from '@mui/system'\n\nimport { px } from '../../../../../helpers/stringGetters'\n\nimport { BUTTON_COLORS } from '../../../../../styles/colors'\n\nexport const openSettingsButtonStyle: Record<string, SxProps> = {\n  settings: {\n    margin: px(0, 10, 0, 6),\n    padding: px(4),\n    color: BUTTON_COLORS.buttonOnBackground,\n    minWidth: 0,\n    '& svg': {\n      fontSize: px(30),\n    },\n    '& .Mui-disabled': {\n      color: BUTTON_COLORS.buttonOnBackground,\n    },\n  },\n}\n","import { VoidFunctionComponent } from 'react'\nimport { Button, Tooltip } from '@mui/material'\nimport { Settings } from '@mui/icons-material'\n\nimport { TOP_TOOLBAR_TEXT } from '../../../../../text/siteText'\nimport { openSettingsButtonStyle } from '../../../../../components-style/content/top-toolbar/items/buttons/openSettingsButtonStyle'\n\nexport interface OpenSettingsButtonProps {\n  disabled?: boolean\n  open: () => void\n}\n\nexport const OpenSettingsButton: VoidFunctionComponent<OpenSettingsButtonProps> = ({ disabled, open }) => (\n  <Button disabled={disabled} onClick={open} sx={openSettingsButtonStyle.settings}>\n    <Tooltip title={TOP_TOOLBAR_TEXT.settings}>\n      <Settings />\n    </Tooltip>\n  </Button>\n)\n","import { SxProps } from '@mui/system'\n\nimport { border, px } from '../../../../../helpers/stringGetters'\n\nimport { BUTTON_COLORS } from '../../../../../styles/colors'\n\nexport const getColorInputStyle = (disabled?: boolean): SxProps => ({\n  display: `flex`,\n  '& .MuiSvgIcon-root': {\n    color: disabled ? BUTTON_COLORS.fontDisabled : BUTTON_COLORS.buttonOnBackground,\n  },\n})\n\nexport const getColorInputBoxStyle = (color: string, disabled?: boolean): SxProps => ({\n  bgcolor: disabled ? BUTTON_COLORS.fontDisabled : color,\n  minWidth: px(25),\n  minHeight: px(25),\n  borderRadius: px(5),\n  ml: px(2),\n  border: border(1, disabled ? BUTTON_COLORS.buttonDisableBackground : BUTTON_COLORS.colorBorder),\n})\n\nexport const colorInputStyle: Record<string, SxProps> = {\n  inputBox: {\n    position: `relative`,\n    '& input': {\n      width: `100%`,\n      opacity: 0,\n      position: `absolute`,\n      left: 0,\n    },\n  },\n}\n","import { useEffect, useState, VoidFunctionComponent } from 'react'\nimport { Box, Tooltip } from '@mui/material'\n\nimport { useDebounce } from '../../../../../helpers/react/useDebounce'\n\nimport { COLOR_DEBOUNCE } from '../../../../../constants/debounce/debounce'\nimport { INPUT_TYPE } from '../../../../../constants/others'\n\nimport {\n  colorInputStyle,\n  getColorInputBoxStyle,\n  getColorInputStyle,\n} from '../../../../../components-style/content/top-toolbar/items/buttons/colorButtonStyle'\n\nexport interface ColorButtonProps {\n  color: string\n  handleSetColor: (color: string) => void\n  tooltip: string\n  disabled?: boolean\n  icon: JSX.Element\n}\n\nexport const ColorButton: VoidFunctionComponent<ColorButtonProps> = ({\n  color,\n  handleSetColor,\n  tooltip,\n  disabled,\n  icon,\n}) => {\n  const [currentColor, setCurrentColor] = useState(color)\n  const debouncedColor = useDebounce(currentColor, COLOR_DEBOUNCE)\n  useEffect(() => {\n    handleSetColor(debouncedColor)\n  }, [debouncedColor, handleSetColor])\n\n  return (\n    <Tooltip title={tooltip} disableHoverListener={disabled}>\n      <Box sx={colorInputStyle.inputBox}>\n        <input\n          disabled={disabled}\n          type={INPUT_TYPE.color}\n          value={color}\n          onChange={(e) => setCurrentColor(e.target.value)}\n        />\n        <Box sx={getColorInputStyle(disabled)}>\n          {icon}\n          <Box sx={getColorInputBoxStyle(color, disabled)} />\n        </Box>\n      </Box>\n    </Tooltip>\n  )\n}\n","export const TEXT_INPUT_DEBOUNCE = 400\n\nexport const BRUSH_DEBOUNCE = 10\n\nexport const COLOR_DEBOUNCE = 60\n","import { Dispatch, VoidFunctionComponent, SetStateAction } from 'react'\nimport { Box } from '@mui/material'\nimport { AddCircle, Brush, Dashboard, SkipNext } from '@mui/icons-material'\n\nimport { BrushOffSvg } from '../../../../icons/BrushOffSvg'\nimport { TooltipSvg } from '../../../../icons/TooltipSvg'\n\nimport { TOP_TOOLBAR_TEXT } from '../../../text/siteText'\n\nimport { topToolbarStyle } from '../../../components-style/content/top-toolbar/topToolbarStyle'\n\nimport { ClickableButton } from './items/buttons/ClickableButton'\nimport { FileReader, FileReaderDataProps } from './items/file-reader/FileReader'\nimport { ToggleButtonSingle } from './items/buttons/ToggleButtonSingle'\nimport { OpenSettingsButton } from './items/buttons/OpenSettingsButton'\nimport { ColorButton } from './items/buttons/ColorButton'\n\nexport interface TopToolbarProps extends FileReaderDataProps {\n  openDrawer: () => void\n  isToolsDisabled: boolean\n\n  isDetailsVisible: boolean\n  setIsDetailsVisible: Dispatch<SetStateAction<boolean>>\n  isBrushingOnEndOfMove: boolean\n  setIsBrushingOnEndOfMove: (newIsBrushingOnEndOfMove: boolean) => void\n\n  isBrushingActive: boolean\n  clearBrushes: () => void\n\n  setIsLayoutDialogOpen: Dispatch<SetStateAction<boolean>>\n  setIsAddViewDialogOpen: Dispatch<SetStateAction<boolean>>\n  removeLayout: () => void\n\n  brushColor: string\n  setBrushColor: Dispatch<SetStateAction<string>>\n}\n\nexport const TopToolbar: VoidFunctionComponent<TopToolbarProps> = ({\n  openDrawer,\n  isToolsDisabled,\n  isDetailsVisible,\n  setIsDetailsVisible,\n  isBrushingOnEndOfMove,\n  setIsBrushingOnEndOfMove,\n  isBrushingActive,\n  clearBrushes,\n  setDataset,\n  setDataLoadState,\n  setIsAddViewDialogOpen,\n  setIsLayoutDialogOpen,\n  removeLayout,\n  brushColor,\n  setBrushColor,\n}) => (\n  <Box sx={topToolbarStyle.toolbar}>\n    <Box sx={topToolbarStyle.left}>\n      <ClickableButton\n        icon={<AddCircle />}\n        onClick={() => setIsAddViewDialogOpen(true)}\n        disabled={isToolsDisabled}\n        label={TOP_TOOLBAR_TEXT.labelAddView}\n      />\n      <ClickableButton\n        onClick={() => {\n          setIsLayoutDialogOpen(true)\n          removeLayout()\n        }}\n        icon={<Dashboard />}\n        disabled={isToolsDisabled}\n        label={TOP_TOOLBAR_TEXT.labelDialogTitle}\n      />\n      <Box sx={topToolbarStyle.separator} />\n      <ToggleButtonSingle\n        icon={<TooltipSvg />}\n        value={isDetailsVisible}\n        setValue={setIsDetailsVisible}\n        disabled={isToolsDisabled}\n        label={TOP_TOOLBAR_TEXT.labelDetailsVisible}\n      />\n      <ToggleButtonSingle\n        icon={<SkipNext />}\n        value={isBrushingOnEndOfMove}\n        setValue={setIsBrushingOnEndOfMove}\n        disabled={isToolsDisabled}\n        label={TOP_TOOLBAR_TEXT.labelBrushingOnEOM}\n      />\n    </Box>\n    <Box sx={topToolbarStyle.middle}>\n      <ColorButton\n        color={brushColor}\n        handleSetColor={(color) => setBrushColor(color)}\n        icon={<Brush />}\n        disabled={isToolsDisabled}\n        tooltip={TOP_TOOLBAR_TEXT.labelBrushColor}\n      />\n      <Box sx={topToolbarStyle.separator} />\n      <ClickableButton\n        icon={<BrushOffSvg />}\n        onClick={clearBrushes}\n        disabled={!isBrushingActive}\n        label={TOP_TOOLBAR_TEXT.labelClearBrushes}\n      />\n    </Box>\n    <Box sx={topToolbarStyle.right}>\n      <FileReader setDataset={setDataset} setDataLoadState={setDataLoadState} isHighlighted={isToolsDisabled} />\n      <OpenSettingsButton open={openDrawer} disabled={isToolsDisabled} />\n    </Box>\n  </Box>\n)\n","/**\n * Constants to work with svg D3.js.\n */\nexport const SVG = {\n  elements: {\n    svg: `svg` as `svg`,\n    g: `g` as `g`,\n    circle: `circle` as `circle`,\n    rect: `rect` as `rect`,\n    path: `path` as `path`,\n    text: `text` as `text`,\n    div: `div` as `div`,\n  },\n  attributes: {\n    class: `class`,\n    d: `d`,\n    transform: `transform`,\n    x: `x`,\n    y: `y`,\n    width: `width`,\n    height: `height`,\n    cx: `cx`,\n    cy: `cy`,\n    r: `r`,\n    stroke: `stroke`,\n    strokeWidth: `stroke-width`,\n    textAnchor: `text-anchor`,\n  },\n  style: {\n    fill: `fill`,\n    stroke: `stroke`,\n    opacity: `opacity`,\n    left: `left`,\n    top: `top`,\n    display: `display`,\n  },\n  values: {\n    none: `none`,\n    block: `block`,\n    start: `start`,\n    end: `end`,\n    middle: `middle`,\n  },\n}\n","import { selectAll } from 'd3'\n\nimport { SVG } from '../../constants/svg'\n\nimport { getClass } from '../stringGetters'\n\nexport const setDisplay = (isVisible: boolean | undefined, displayClass: string): void => {\n  if (isVisible) {\n    selectAll(getClass(displayClass)).style(SVG.style.display, SVG.values.block)\n    return\n  }\n  selectAll(getClass(displayClass)).style(SVG.style.display, SVG.values.none)\n}\n","export const TOOLTIP_CLASS = `tooltip-class`\n\nexport const TOOLTIP = {\n  visible: 1,\n  invisible: 0,\n  easeIn: 200,\n  easeOut: 500,\n  padding: {\n    top: 5,\n    bottom: 10,\n    lr: 5,\n  },\n}\n","import { ViewType } from '../../constants/views-general/ViewType'\n\nexport const SETTINGS_BASE_TEXT = {\n  more: `More options`,\n  empty: `-----`,\n}\n\nexport const SETTINGS_TEXT = {\n  attributes: `Display attributes:`,\n  category: `Colored by`,\n  ...SETTINGS_BASE_TEXT,\n}\n\nexport const MARGIN_SETTINGS_TEXT = {\n  header: `Margin`,\n  top: `Top`,\n  right: `Right`,\n  bottom: `Bottom`,\n  left: `Left`,\n}\n\nexport const OPACITY_SETTINGS_TEXT = {\n  all: `Brushing not active`,\n  selected: `Selected`,\n  notSelected: `Not selected`,\n}\n\nexport const PALETTE_PICKER_TEXT = {\n  header: `Category colors`,\n  categoriesLabel: [`c1`, `c2`, `c3`, `c4`, `c5`, `c6`, `c7`, `c8`, `c9`, `c10`],\n}\n\nexport const VIEW_NAMES: Record<ViewType, string> = {\n  [ViewType.ParallelCoordinates]: `Parallel Coordinates`,\n  [ViewType.ScatterPlotMatrix]: `Scatter Plot Matrix`,\n  [ViewType.Glyphs]: `Glyphs`,\n  [ViewType.ScatterPlotGlyphs]: `Scatter Plot Glyphs`,\n  [ViewType.ParallelSetsBundled]: `Parallel Sets (bundled layout)`,\n  [ViewType.DataTable]: `Data Table`,\n}\n\ninterface InfoDialogText {\n  description: string\n  descriptionBrushing: string\n  descriptionSettings: string\n  descriptionSettingsMore: string\n}\n\nexport const INFO_DIALOG_TEXT: Record<ViewType, InfoDialogText> = {\n  [ViewType.ParallelCoordinates]: {\n    description: `Parallel coordinates are used to display the values of quantitative attributes. Each axis corresponds to one attribute, and its range is from the minimum to the maximum of its values. The individual items are then displayed as a polyline between these axes. To use this method, the dataset must contain at least two numeric attributes.`,\n    descriptionBrushing: `Parallel coordinates use brushing on their axes. On them, you can drag to select the ranges that determine the selected items. Items that traverse all ranges are selected. Brushing is exclusive for parallel coordinates, so it deletes the previous selection from other views.`,\n    descriptionSettings: `In the settings you can specify which attributes are displayed on the axes or change their order. You can also specify the nominal attribute according to which the individual polylines will be colored.`,\n    descriptionSettingsMore: `In the detailed settings you can also change the margin of the internal svg (e.g. to reveal labels), the width of the polyline, the transparency when brushing or the colors for coloring with the nominal attribute.`,\n  },\n  [ViewType.ScatterPlotMatrix]: {\n    description: `The scatter plot matrix is used to display the values of quantitative attributes. Attributes are assigned to the rows and columns of the matrix so that each has exactly one row and one column of the same index. In the matrix, the value of the attribute is plotted on the y-axis in each row and on the x-axis in each column, so it creates a scatter plot in every cell. The items are displayed in each of these scatter plots as data points.  To use this method, the dataset must contain at least two numeric attributes.`,\n    descriptionBrushing: `The scatter plot matrix uses brushing in one of its cells. In the cell, select desired points with rectangle selection; in other scatter plots, selected points will be highlighted. Brushing is exclusive for the scatter plot matrix, so it deletes the previous selection from other views.`,\n    descriptionSettings: `In the settings you can specify which attributes are displayed in the matrix or change their order.  You can also specify the nominal attribute according to which the individual points will be colored.`,\n    descriptionSettingsMore: `In the detailed settings you can also change the margin of the internal svg (e.g. to reveal labels), the size of the point, horizontal or vertical spacing between cells, the transparency when brushing, or the colors for coloring with the nominal attribute.`,\n  },\n  [ViewType.Glyphs]: {\n    description: `Glyphs are used to display the values of quantitative attributes. An axis is created for each attribute, and these axes are arranged in a circle, gradually from the upper axis in a clockwise direction. Values are plotted on these axes so that the minima are close to the center and the maxima are far from it. The glyphs are then sorted by one attribute and displayed in lines (as in text). To use this method, the dataset must contain at least three numeric attributes.`,\n    descriptionBrushing: `Glyphs use brushing by clicking on them. After clicking on an unselected glyph, it is added to the selection; if it is already selected, it is removed. Brushing is not exclusive for glyphs, so the previous selection is used.`,\n    descriptionSettings: `In the settings you can specify which attributes are displayed on radial scales (on glyph), or change their order. You can also specify a nominal attribute to color individual glyphs and choose which attribute to use for sorting and whether to sort ascending or descending.`,\n    descriptionSettingsMore: `In the detailed settings you can also change the margin of the internal svg, the size of the glyph, spacing between glyphs, the transparency when brushing, or the colors for coloring with the nominal attribute.`,\n  },\n  [ViewType.ScatterPlotGlyphs]: {\n    description: `Scatter plot glyphs are used to display the values of quantitative attributes. An axis is created for each attribute, and these axes are arranged in a circle, gradually from the upper axis in a clockwise direction. Values are plotted on these axes so that the minima are close to the center and the maxima are far from it. Two attributes are used for the x and y axes, and the glyphs are then positioned according to the values of these attributes. To use this method, the dataset must contain at least three numeric attributes.`,\n    descriptionBrushing: `Scatter plot glyphs use brushes in the form of a rectangular selection; glyphs are selected if their center is inside it. Brushing is exclusive for scatter plot glyphs, so it deletes the previous selection from other views.`,\n    descriptionSettings: `In the settings you can specify which attributes are displayed on radial scales (on glyph), or change their order. You can select the attributes to be used for the x-axis and y-axis. You can also specify a nominal attribute to color individual glyphs.`,\n    descriptionSettingsMore: `In the detailed settings you can also change the margin of the internal svg (e.g. to reveal labels), the size of the glyph, the transparency when brushing, or the colors for coloring with the nominal attribute.`,\n  },\n  [ViewType.ParallelSetsBundled]: {\n    description: `Parallel sets (bundled) are used to display the ratios of the nominal attribute values. Each axis corresponds to one nominal attribute and is divided into parts according to the possible values of the attribute. The length of the parts is then determined by the ratio of the values to the total number of items. From these parts, the curves lead to parts of adjacent axes, with thickness according to the ratio of items that have both values of the attributes, relative to the length of the part. To use this method, the dataset must contain at least two nominal attributes.`,\n    descriptionBrushing: `Parallel sets use brushing on their axes by clicking on parts with specific values. When you click on this section, the highlighted ratios with this value will be displayed on each curve. If the part is already selected (the line is brushed - colored), all items with this value are removed from the selection and are thus also removed from the ratios. This allows various Boolean operations by this brushing. Brushing is not exclusive for parallel sets, so the previous selection is used.`,\n    descriptionSettings: `In the settings you can specify which attributes are displayed on the axes or change their order. You can also specify the nominal attribute according to which the individual curves will be divided (with their value ratio) and colored, and you can choose whether brushing will be displayed over the curves or in the top part.`,\n    descriptionSettingsMore: `In the detailed settings you can also change the margin of the internal svg (e.g. to reveal labels), the width of the tabs, horizontal spacing between tabs, vertical gaps between tabs, color of inner value font, the transparency when brushing, or the colors for coloring with the nominal attribute.`,\n  },\n  [ViewType.DataTable]: {\n    description: `The data table is used to display the values of all attributes. Items are displayed in rows; they can be filtered (the filter can be turned on in the view top bar), sorted by any attribute (by clicking on the arrow next to the label, also by selected) ascending or descending.`,\n    descriptionBrushing: `The table allows brushing using the check box in the row. The table also has a Select All checkbox, which selects/deselects all values that pass filters when clicked. Brushing is not exclusive for the data table, so the previous selection is used.`,\n    descriptionSettings: `In the settings you can specify which attributes are displayed in the columns or change their order.`,\n    descriptionSettingsMore: `In the detailed settings you can also change the table row height, selected background color, and selected font color.`,\n  },\n}\n","import { SxProps } from '@mui/system'\n\nimport { px } from '../../../helpers/stringGetters'\n\nimport { TOOLTIP } from '../../../constants/views-general/tooltip'\n\nimport { PLOT_COLORS } from '../../../styles/colors'\n\nexport const viewGridStyle: Record<string, SxProps> = {\n  tooltip: {\n    position: `fixed`,\n    padding: px(TOOLTIP.padding.top, TOOLTIP.padding.lr, TOOLTIP.padding.bottom),\n    bgcolor: PLOT_COLORS.tooltipBackground,\n    color: PLOT_COLORS.tooltipFont,\n    borderRadius: px(5),\n    pointerEvents: `none`,\n    opacity: 0,\n    zIndex: 10,\n  },\n}\n","export const SETTINGS_DRAWER_TEXT = {\n  description: `This application uses React and D3.js.`,\n  openSource: `Source code is available at`,\n  github: `GitHub`,\n  hide: `Hide`,\n}\n\nexport const GITHUB_LINK = `https://github.com/stetizu1/tabular-data-visualization`\n","import { SxProps } from '@mui/system'\n\nimport { border, calc, px } from '../../../helpers/stringGetters'\n\nimport { SETTINGS_DRAWER_COLORS } from '../../../styles/colors'\n\nexport const settingsDrawerStyle: Record<string, SxProps> = {\n  drawer: {\n    width: px(250),\n    flexShrink: 0,\n    '& .MuiDrawer-paper': {\n      bgcolor: SETTINGS_DRAWER_COLORS.background,\n      width: px(250),\n      alignItems: `flex-end`,\n      border: border(1, SETTINGS_DRAWER_COLORS.border),\n    },\n    '& hr': {\n      width: `100%`,\n    },\n    '& .MuiSelect-select': {\n      padding: px(10, 12, 8),\n    },\n  },\n  fill: {\n    flexGrow: 1,\n  },\n  header: {},\n  chevron: {\n    color: SETTINGS_DRAWER_COLORS.icon,\n  },\n  setting: {\n    width: `100%`,\n    display: `flex`,\n    flexDirection: `column`,\n    flexGrow: 1,\n  },\n  footer: {\n    width: calc(-20, `100%`),\n    padding: px(10),\n  },\n  githubIcon: {\n    paddingRight: px(6),\n    fontSize: px(18),\n  },\n  text: {\n    color: SETTINGS_DRAWER_COLORS.icon,\n    fontSize: px(9),\n    display: `flex`,\n    alignItems: `center`,\n    justifyContent: `center`,\n  },\n  button: {\n    minWidth: 0,\n  },\n}\n","import { schemeCategory10 } from 'd3'\n\nimport { ColorArray } from '../../types/styling/ColorArray'\nimport { ParallelCoordinatesSettings } from '../../types/views/settings/ParallelCoordinatesSettings'\n\nexport const MIN_PARALLEL_COORDINATES_ATTRIBUTE_COUNT = 2\n\nexport const PARALLEL_COORDINATES_DEFAULT: Pick<\n  ParallelCoordinatesSettings,\n  `margins` | `lineWidth` | `opacity` | `colorCategory`\n> = {\n  margins: [10, 55, 25, 60],\n  lineWidth: 1,\n  opacity: [50, 60, 20],\n  colorCategory: schemeCategory10 as ColorArray,\n}\n","import { ViewType } from '../../constants/views-general/ViewType'\n\nimport { SETTINGS_TEXT, VIEW_NAMES } from './common'\n\nexport const PARALLEL_COORDINATES_TEXT = {\n  unavailable: `The parallel coordinates plot cannot be displayed with a single attribute. To generate a parallel coordinates plot, select multiple attributes from the settings.`,\n}\n\nexport const PARALLEL_COORDINATES_SETTINGS_TEXT = {\n  header: VIEW_NAMES[ViewType.ParallelCoordinates],\n  unavailable: `The parallel coordinates plot cannot be used while data have less than 2 numerical attributes. Try to use different type of visualization that fits your data.`,\n  opacity: `Opacity of lines`,\n  lineWidth: `Line width`,\n  ...SETTINGS_TEXT,\n}\n","import { SxProps } from '@mui/system'\n\nimport { calc, border, px } from '../../../helpers/stringGetters'\n\nimport { SETTINGS_DRAWER_COLORS, ERROR_COLORS } from '../../../styles/colors'\nimport { SETTINGS_DRAWER_FONT } from '../../../styles/font'\n\nexport const settingsDrawerItemStyle: Record<string, SxProps> = {\n  drawerSettings: {\n    width: calc(-22, `100%`),\n    padding: px(10),\n    display: `flex`,\n    flexDirection: `column`,\n    textAlign: `left`,\n    bgcolor: SETTINGS_DRAWER_COLORS.drawerItemBackground,\n    border: border(1, SETTINGS_DRAWER_COLORS.drawerItemBorder),\n    borderRadius: px(4),\n    borderBottom: border(2, SETTINGS_DRAWER_COLORS.drawerItemBorder),\n    '& h1': {\n      borderBottom: border(1, SETTINGS_DRAWER_COLORS.drawerItemBorder),\n      fontSize: SETTINGS_DRAWER_FONT.headerFontSize,\n      width: `100%`,\n    },\n    '& hr': {\n      margin: px(4, 0, 3),\n    },\n    '& label': {\n      fontSize: SETTINGS_DRAWER_FONT.labelFontSize,\n      color: SETTINGS_DRAWER_COLORS.label,\n    },\n    '& .MuiFormControlLabel-root': {\n      padding: px(2, 10),\n    },\n    '& .MuiCheckbox-root ': {\n      padding: 0,\n    },\n    '& > div': {\n      marginTop: px(10),\n    },\n  },\n  insufficientAttributeNum: {\n    padding: px(10),\n    fontSize: SETTINGS_DRAWER_FONT.fontSize,\n    color: ERROR_COLORS.font,\n  },\n  accordion: {\n    '&.MuiPaper-root': {\n      borderRadius: 0,\n    },\n    '& .MuiButtonBase-root': {\n      minHeight: 0,\n      bgcolor: SETTINGS_DRAWER_COLORS.drawerItemBackgroundDimmed,\n      '&.Mui-expanded': {\n        minHeight: 0,\n      },\n    },\n    '& .MuiAccordionSummary-content': {\n      margin: px(2, 0, 5),\n      '&.Mui-expanded': {\n        margin: px(2, 0, 5),\n      },\n    },\n    '& .MuiAccordionDetails-root': {\n      padding: 0,\n      '& > *:not(hr)': {\n        padding: px(5, 7),\n      },\n    },\n  },\n}\n","import { SxProps } from '@mui/system'\n\nimport { px } from '../../../../helpers/stringGetters'\n\nexport const attributeCheckerStyle: Record<string, SxProps> = {\n  buttons: {\n    display: `flex`,\n    flexDirection: `column`,\n  },\n  control: {\n    margin: px(0, 5),\n    padding: 0,\n    minWidth: 0,\n    height: 15,\n  },\n}\n","import { Dispatch, SetStateAction, useCallback } from 'react'\nimport { Box, Button, Checkbox, FormControlLabel } from '@mui/material'\nimport { ArrowDropDown, ArrowDropUp } from '@mui/icons-material'\n\nimport { CheckedForSelectableDataType, SelectableDataType } from '../../../../types/data/data'\nimport { Settings, SettingsType } from '../../../../types/views/settings/Settings'\n\nimport { otherCasesToWhitespaces } from '../../../../helpers/data/formatText'\n\nimport { ViewType } from '../../../../constants/views-general/ViewType'\n\nimport { attributeCheckerStyle } from '../../../../components-style/content/data-drawer/items/attributeCheckerStyle'\n\nexport interface AttributeCheckerProps<Opt extends SettingsType> {\n  viewType: ViewType\n  attributesKeys: Array<keyof SelectableDataType>\n  handleChangeSettings?: () => void\n  getNewSettings: (newChecked: CheckedForSelectableDataType, prevSettings: Opt) => Partial<Opt>\n  setSettings: Dispatch<SetStateAction<Settings>>\n  label: string\n\n  checked: CheckedForSelectableDataType\n  setChecked: Dispatch<SetStateAction<CheckedForSelectableDataType>>\n  setAttributesKeys: Dispatch<SetStateAction<Array<keyof SelectableDataType>>>\n}\n\nexport const AttributeChecker = <Opt extends SettingsType>({\n  viewType,\n  attributesKeys,\n  handleChangeSettings,\n  getNewSettings,\n  setSettings,\n  label,\n  checked,\n  setChecked,\n  setAttributesKeys,\n}: AttributeCheckerProps<Opt>): JSX.Element => {\n  const handleCheckboxChange = useCallback(\n    (eventChecked: boolean, key: keyof SelectableDataType) => {\n      const newChecked = { ...checked, [key]: eventChecked }\n      setChecked(newChecked)\n      if (handleChangeSettings) handleChangeSettings()\n      setSettings((prev) => {\n        const prevSettings = prev[viewType]! as Opt\n        const newSettings = getNewSettings(newChecked, prevSettings)\n        return {\n          ...prev,\n          [viewType]: {\n            ...prevSettings,\n            ...newSettings,\n          },\n        }\n      })\n    },\n    [checked, getNewSettings, handleChangeSettings, setChecked, setSettings, viewType],\n  )\n  const handleMove = useCallback(\n    (newAttributesKeys: Array<keyof SelectableDataType>) => {\n      if (handleChangeSettings) handleChangeSettings()\n      setAttributesKeys(newAttributesKeys)\n      setSettings((prev) => {\n        const prevSettings = prev[viewType]! as Opt\n        return {\n          ...prev,\n          [viewType]: {\n            ...prevSettings,\n            displayAttributes: newAttributesKeys.filter((key) => checked[key]),\n          },\n        }\n      })\n    },\n    [checked, handleChangeSettings, setAttributesKeys, setSettings, viewType],\n  )\n\n  const onUpButton = useCallback(\n    (idx: number) => {\n      const newAttributesKeys = [...attributesKeys]\n      ;[newAttributesKeys[idx - 1], newAttributesKeys[idx]] = [newAttributesKeys[idx], newAttributesKeys[idx - 1]]\n      handleMove(newAttributesKeys)\n    },\n    [attributesKeys, handleMove],\n  )\n\n  const onDownButton = useCallback(\n    (idx: number) => {\n      const newAttributesKeys = [...attributesKeys]\n      ;[newAttributesKeys[idx + 1], newAttributesKeys[idx]] = [newAttributesKeys[idx], newAttributesKeys[idx + 1]]\n      handleMove(newAttributesKeys)\n    },\n    [attributesKeys, handleMove],\n  )\n\n  return (\n    <>\n      <label>{label}</label>\n      {attributesKeys.map((key, idx) => (\n        <FormControlLabel\n          control={\n            <>\n              <Box sx={attributeCheckerStyle.buttons}>\n                <Button onClick={() => onUpButton(idx)} disabled={idx === 0} sx={attributeCheckerStyle.control}>\n                  <ArrowDropUp />\n                </Button>\n                <Button\n                  onClick={() => onDownButton(idx)}\n                  disabled={idx === attributesKeys.length - 1}\n                  sx={attributeCheckerStyle.control}\n                >\n                  <ArrowDropDown />\n                </Button>\n              </Box>\n              <Checkbox checked={checked[key]} onChange={(e) => handleCheckboxChange(e.target.checked, key)} />\n            </>\n          }\n          label={otherCasesToWhitespaces(key)}\n          key={`check-${viewType}-${idx}`}\n        />\n      ))}\n    </>\n  )\n}\n","import { Dispatch, VoidFunctionComponent, SetStateAction, useCallback } from 'react'\nimport { MenuItem, TextField } from '@mui/material'\n\nimport { SelectableDataType } from '../../../../types/data/data'\nimport { Settings } from '../../../../types/views/settings/Settings'\n\nimport { otherCasesToWhitespaces } from '../../../../helpers/data/formatText'\n\nimport { ViewType } from '../../../../constants/views-general/ViewType'\n\nimport { SETTINGS_TEXT } from '../../../../text/views-and-settings/common'\n\nexport interface CategorySelectorProps {\n  viewType: ViewType\n  value: keyof SelectableDataType\n  attributesKeys: Array<keyof SelectableDataType>\n  setSettings: Dispatch<SetStateAction<Settings>>\n  label: string\n}\n\nexport const CategorySelector: VoidFunctionComponent<CategorySelectorProps> = ({\n  viewType,\n  value,\n  attributesKeys,\n  setSettings,\n  label,\n}) => {\n  const handleSelectCategoryChange = useCallback(\n    (categoryAttribute: keyof SelectableDataType | -1) => {\n      setSettings((prev) => {\n        const prevSettings = prev[viewType]!\n        return {\n          ...prev,\n          [viewType]: {\n            ...prevSettings,\n            categoryAttribute: categoryAttribute === -1 ? undefined : categoryAttribute,\n          },\n        }\n      })\n    },\n    [setSettings, viewType],\n  )\n\n  return (\n    <TextField value={value ?? -1} onChange={(e) => handleSelectCategoryChange(e.target.value)} select label={label}>\n      {attributesKeys.map((key, idx) => (\n        <MenuItem value={key} key={`category-${viewType}-${idx}`}>\n          {otherCasesToWhitespaces(key)}\n        </MenuItem>\n      ))}\n      <MenuItem value={-1}>{SETTINGS_TEXT.empty}</MenuItem>\n    </TextField>\n  )\n}\n","import { SxProps } from '@mui/system'\n\nimport { px } from '../../../../helpers/stringGetters'\n\nexport const numberInputStyles: Record<string, SxProps> = {\n  vertical: {\n    display: `flex`,\n    flexDirection: `column`,\n  },\n  horizontal: {\n    display: `flex`,\n    flexDirection: `row`,\n  },\n  textField: {\n    '&.MuiFormControl-root': {\n      margin: px(6, 6, 4),\n    },\n    '& input': {\n      padding: px(5, 10, 4),\n    },\n  },\n}\n","import { SxProps } from '@mui/system'\n\nimport { px } from '../../../../helpers/stringGetters'\n\nimport { SETTINGS_DRAWER_FONT } from '../../../../styles/font'\n\nexport const settingsTextStyle: Record<string, SxProps> = {\n  text: {\n    fontSize: px(SETTINGS_DRAWER_FONT.fontSize),\n    padding: px(6, 5, 3),\n  },\n}\n","import { Dispatch, VoidFunctionComponent, SetStateAction, useCallback, useState, useEffect } from 'react'\nimport { Box, TextField, Typography } from '@mui/material'\n\nimport { MarginArray } from '../../../../types/styling/Margin'\nimport { Settings } from '../../../../types/views/settings/Settings'\n\nimport { useDebounce } from '../../../../helpers/react/useDebounce'\n\nimport { ViewType } from '../../../../constants/views-general/ViewType'\nimport { TEXT_INPUT_DEBOUNCE } from '../../../../constants/debounce/debounce'\nimport { INPUT_PROPS, INPUT_TYPE } from '../../../../constants/others'\n\nimport { MARGIN_SETTINGS_TEXT } from '../../../../text/views-and-settings/common'\n\nimport { numberInputStyles } from '../../../../components-style/content/data-drawer/items/numberInputStyles'\nimport { settingsTextStyle } from '../../../../components-style/content/data-drawer/items/settingsTextStyle'\n\nexport interface MarginInputProps {\n  margins: MarginArray\n  setSettings: Dispatch<SetStateAction<Settings>>\n  viewType: ViewType\n  handleChangeSettings?: () => void\n}\n\nexport const MarginInput: VoidFunctionComponent<MarginInputProps> = ({\n  margins,\n  setSettings,\n  viewType,\n  handleChangeSettings,\n}) => {\n  const [currentMargins, setCurrentMargins] = useState<MarginArray>(margins)\n  const debouncedMargins = useDebounce(currentMargins, TEXT_INPUT_DEBOUNCE)\n\n  const handleMarginChange = useCallback((newMargin: number, idx: number) => {\n    setCurrentMargins((oldMargins) => {\n      const newMargins: MarginArray = [...oldMargins]\n      newMargins[idx] = newMargin\n      return newMargins\n    })\n  }, [])\n\n  useEffect(() => {\n    if (handleChangeSettings) handleChangeSettings()\n    setSettings((prev) => {\n      const prevSettings = prev[viewType]!\n      return {\n        ...prev,\n        [viewType]: {\n          ...prevSettings,\n          margins: debouncedMargins,\n        },\n      }\n    })\n  }, [debouncedMargins, handleChangeSettings, setSettings, viewType])\n\n  return (\n    <Box sx={numberInputStyles.vertical}>\n      <Typography sx={settingsTextStyle.text}>{MARGIN_SETTINGS_TEXT.header}</Typography>\n      <Box sx={numberInputStyles.horizontal}>\n        <TextField\n          label={MARGIN_SETTINGS_TEXT.top}\n          type={INPUT_TYPE.number}\n          defaultValue={margins[0]}\n          sx={numberInputStyles.textField}\n          inputProps={INPUT_PROPS.positiveNumber}\n          onChange={(e) => handleMarginChange(Number(e.target.value), 0)}\n        />\n        <TextField\n          label={MARGIN_SETTINGS_TEXT.right}\n          type={INPUT_TYPE.number}\n          defaultValue={margins[1]}\n          sx={numberInputStyles.textField}\n          inputProps={INPUT_PROPS.positiveNumber}\n          onChange={(e) => handleMarginChange(Number(e.target.value), 1)}\n        />\n      </Box>\n      <Box sx={numberInputStyles.horizontal}>\n        <TextField\n          label={MARGIN_SETTINGS_TEXT.bottom}\n          type={INPUT_TYPE.number}\n          defaultValue={margins[2]}\n          sx={numberInputStyles.textField}\n          inputProps={INPUT_PROPS.positiveNumber}\n          onChange={(e) => handleMarginChange(Number(e.target.value), 2)}\n        />\n        <TextField\n          label={MARGIN_SETTINGS_TEXT.left}\n          type={INPUT_TYPE.number}\n          defaultValue={margins[3]}\n          sx={numberInputStyles.textField}\n          inputProps={INPUT_PROPS.positiveNumber}\n          onChange={(e) => handleMarginChange(Number(e.target.value), 3)}\n        />\n      </Box>\n    </Box>\n  )\n}\n","import { InputBaseComponentProps } from '@mui/material/InputBase'\n\nimport { INPUT_PROPS } from '../../constants/others'\n\nexport const getInputPropsPositiveNumber = ({ min, max }: { min?: number; max?: number }): InputBaseComponentProps => {\n  const minVal = min ? { min } : {}\n  const maxVal = max ? { max } : {}\n  return {\n    ...INPUT_PROPS.positiveNumber,\n    ...minVal,\n    ...maxVal,\n  }\n}\n","import { Dispatch, VoidFunctionComponent, SetStateAction, useState, useCallback, useEffect } from 'react'\nimport { Box, TextField, Typography } from '@mui/material'\n\nimport { Opacity } from '../../../../types/styling/Opacity'\nimport { Settings } from '../../../../types/views/settings/Settings'\n\nimport { useDebounce } from '../../../../helpers/react/useDebounce'\nimport { getInputPropsPositiveNumber } from '../../../../helpers/basic/getInputPropsPositiveNumber'\n\nimport { ViewType } from '../../../../constants/views-general/ViewType'\nimport { TEXT_INPUT_DEBOUNCE } from '../../../../constants/debounce/debounce'\nimport { INPUT_TYPE } from '../../../../constants/others'\n\nimport { OPACITY_SETTINGS_TEXT } from '../../../../text/views-and-settings/common'\n\nimport { numberInputStyles } from '../../../../components-style/content/data-drawer/items/numberInputStyles'\nimport { settingsTextStyle } from '../../../../components-style/content/data-drawer/items/settingsTextStyle'\n\nexport interface OpacityInputProps {\n  header: string\n  opacities: Opacity\n  setSettings: Dispatch<SetStateAction<Settings>>\n  viewType: ViewType\n}\n\nexport const OpacityInput: VoidFunctionComponent<OpacityInputProps> = ({\n  header,\n  opacities,\n  setSettings,\n  viewType,\n}) => {\n  const [currentOpacities, setCurrentOpacities] = useState<Opacity>(opacities)\n  const debouncedOpacities = useDebounce(currentOpacities, TEXT_INPUT_DEBOUNCE)\n\n  const handleOpacityChange = useCallback((newOpacity: number, idx: number) => {\n    setCurrentOpacities((oldOpacities) => {\n      const newOpacities: Opacity = [...oldOpacities]\n      newOpacities[idx] = newOpacity\n      return newOpacities\n    })\n  }, [])\n\n  useEffect(() => {\n    setSettings((prev) => {\n      const prevSettings = prev[viewType]!\n      return {\n        ...prev,\n        [viewType]: {\n          ...prevSettings,\n          opacity: debouncedOpacities,\n        },\n      }\n    })\n  }, [debouncedOpacities, setSettings, viewType])\n\n  return (\n    <Box sx={numberInputStyles.vertical}>\n      <Typography sx={settingsTextStyle.text}>{header}</Typography>\n      <TextField\n        label={OPACITY_SETTINGS_TEXT.all}\n        type={INPUT_TYPE.number}\n        defaultValue={opacities[0]}\n        sx={numberInputStyles.textField}\n        inputProps={getInputPropsPositiveNumber({ max: 100 })}\n        onChange={(e) => handleOpacityChange(Number(e.target.value), 0)}\n      />\n      <Box sx={numberInputStyles.horizontal}>\n        <TextField\n          label={OPACITY_SETTINGS_TEXT.selected}\n          type={INPUT_TYPE.number}\n          defaultValue={opacities[1]}\n          sx={numberInputStyles.textField}\n          inputProps={getInputPropsPositiveNumber({ max: 100 })}\n          onChange={(e) => handleOpacityChange(Number(e.target.value), 1)}\n        />\n        <TextField\n          label={OPACITY_SETTINGS_TEXT.notSelected}\n          type={INPUT_TYPE.number}\n          defaultValue={opacities[2]}\n          sx={numberInputStyles.textField}\n          inputProps={getInputPropsPositiveNumber({ max: 100 })}\n          onChange={(e) => handleOpacityChange(Number(e.target.value), 2)}\n        />\n      </Box>\n    </Box>\n  )\n}\n","import { Dispatch, SetStateAction, useCallback, useEffect, useState } from 'react'\nimport { Box, TextField } from '@mui/material'\n\nimport { Settings } from '../../../../types/views/settings/Settings'\n\nimport { useDebounce } from '../../../../helpers/react/useDebounce'\nimport { getInputPropsPositiveNumber } from '../../../../helpers/basic/getInputPropsPositiveNumber'\n\nimport { ViewType } from '../../../../constants/views-general/ViewType'\nimport { TEXT_INPUT_DEBOUNCE } from '../../../../constants/debounce/debounce'\nimport { INPUT_TYPE } from '../../../../constants/others'\n\nimport { numberInputStyles } from '../../../../components-style/content/data-drawer/items/numberInputStyles'\n\nexport interface NumberInputProps<Opt> {\n  viewType: ViewType\n  label: string\n  valueKey: keyof Opt\n  value: number\n  setSettings: Dispatch<SetStateAction<Settings>>\n  min?: number\n  max?: number\n  handleChangeSettings?: () => void\n}\n\nexport const NumberInput = <Opt,>({\n  label,\n  value,\n  valueKey,\n  setSettings,\n  viewType,\n  min,\n  max,\n  handleChangeSettings,\n}: NumberInputProps<Opt>): JSX.Element => {\n  const [currentValue, setCurrentValue] = useState(value)\n  const debouncedValue = useDebounce(currentValue, TEXT_INPUT_DEBOUNCE)\n\n  const handleChangeValue = useCallback((newValue: number) => {\n    setCurrentValue(newValue)\n  }, [])\n\n  useEffect(() => {\n    if (handleChangeSettings) handleChangeSettings()\n    setSettings((prev) => {\n      const prevSettings = prev[viewType]!\n      return {\n        ...prev,\n        [viewType]: {\n          ...prevSettings,\n          [valueKey]: debouncedValue,\n        },\n      }\n    })\n  }, [debouncedValue, setSettings, valueKey, viewType, handleChangeValue, handleChangeSettings])\n\n  return (\n    <Box>\n      <TextField\n        label={label}\n        type={INPUT_TYPE.number}\n        defaultValue={value}\n        sx={numberInputStyles.textField}\n        inputProps={getInputPropsPositiveNumber({ min, max })}\n        onChange={(e) => handleChangeValue(Number(e.target.value))}\n      />\n    </Box>\n  )\n}\n","import { SxProps } from '@mui/system'\n\nimport { ColorArray } from '../../../../types/styling/ColorArray'\n\nimport { px } from '../../../../helpers/stringGetters'\n\nimport { SETTINGS_DRAWER_FONT } from '../../../../styles/font'\n\nexport const getPalettePickerColorInputStyle = (colors: ColorArray, index: number): SxProps => ({\n  bgcolor: colors[index],\n  '& input': {\n    width: `100%`,\n    height: px(20),\n    opacity: 0,\n  },\n})\n\nexport const palettePickerStyle: Record<string, SxProps> = {\n  picker: {\n    margin: px(5, 7),\n  },\n  text: {\n    fontSize: px(SETTINGS_DRAWER_FONT.fontSize),\n  },\n  row: {\n    display: `flex`,\n    flexDirection: `row`,\n  },\n  col: {\n    display: `flex`,\n    flexDirection: `column`,\n    width: `20%`,\n  },\n}\n","import { Dispatch, VoidFunctionComponent, SetStateAction, useState, useEffect, useCallback } from 'react'\nimport { Box, Typography } from '@mui/material'\n\nimport { ColorArray } from '../../../../types/styling/ColorArray'\nimport { Settings } from '../../../../types/views/settings/Settings'\n\nimport { useDebounce } from '../../../../helpers/react/useDebounce'\n\nimport { ViewType } from '../../../../constants/views-general/ViewType'\nimport { COLOR_DEBOUNCE } from '../../../../constants/debounce/debounce'\nimport { INPUT_TYPE } from '../../../../constants/others'\n\nimport { PALETTE_PICKER_TEXT } from '../../../../text/views-and-settings/common'\n\nimport {\n  getPalettePickerColorInputStyle,\n  palettePickerStyle,\n} from '../../../../components-style/content/data-drawer/items/palettePickerStyle'\n\nexport interface PalettePickerProps {\n  viewType: ViewType\n  colors: ColorArray\n  setSettings: Dispatch<SetStateAction<Settings>>\n  handleChangeSettings?: () => void\n}\n\nexport const PalettePicker: VoidFunctionComponent<PalettePickerProps> = ({\n  colors,\n  setSettings,\n  viewType,\n  handleChangeSettings,\n}) => {\n  const [currentColors, setCurrentColors] = useState<ColorArray>(colors)\n  const debouncedColors = useDebounce(currentColors, COLOR_DEBOUNCE)\n\n  const handleSetColor = useCallback((newColor: string, idx: number) => {\n    if (newColor) {\n      setCurrentColors((oldColors) => {\n        const newColors: ColorArray = [...oldColors]\n        newColors[idx] = newColor\n        return newColors\n      })\n    }\n  }, [])\n\n  useEffect(() => {\n    if (handleChangeSettings) handleChangeSettings()\n    setSettings((prev) => {\n      const prevSettings = prev[viewType]!\n      return {\n        ...prev,\n        [viewType]: {\n          ...prevSettings,\n          colorCategory: debouncedColors,\n        },\n      }\n    })\n  }, [debouncedColors, setSettings, viewType, handleChangeSettings])\n\n  const getInput = useCallback(\n    (idx: number) => (\n      <Box sx={palettePickerStyle.col} key={idx}>\n        <label>{PALETTE_PICKER_TEXT.categoriesLabel[idx]}</label>\n        <Box sx={getPalettePickerColorInputStyle(colors, idx)}>\n          <input type={INPUT_TYPE.color} value={colors[idx]} onChange={(e) => handleSetColor(e.target.value, idx)} />\n        </Box>\n      </Box>\n    ),\n    [colors, handleSetColor],\n  )\n  return (\n    <Box sx={palettePickerStyle.picker}>\n      <Typography sx={palettePickerStyle.text}>{PALETTE_PICKER_TEXT.header}</Typography>\n      <Box sx={palettePickerStyle.row}>{[0, 1, 2, 3, 4].map((idx) => getInput(idx))}</Box>\n      <Box sx={palettePickerStyle.row}>{[5, 6, 7, 8, 9].map((idx) => getInput(idx))}</Box>\n    </Box>\n  )\n}\n","import { useCallback, useEffect, useState, VoidFunctionComponent } from 'react'\nimport { Accordion, AccordionDetails, AccordionSummary, Box, Divider, Typography } from '@mui/material'\nimport { ExpandMore } from '@mui/icons-material'\n\nimport { CheckedForSelectableDataType } from '../../../../types/data/data'\nimport { lineWidthKey, ParallelCoordinatesSettings } from '../../../../types/views/settings/ParallelCoordinatesSettings'\nimport { SettingsComponentProps } from '../../../../types/views/SettingsComponentProps'\n\nimport {\n  getCategoryAttributesKeys,\n  getDefaultQuantitativeAttributesChecked,\n  getQuantitativeAttributesKeys,\n} from '../../../../helpers/data/data'\n\nimport {\n  MIN_PARALLEL_COORDINATES_ATTRIBUTE_COUNT,\n  PARALLEL_COORDINATES_DEFAULT,\n} from '../../../../constants/views/parallelCoordinates'\nimport { ViewType } from '../../../../constants/views-general/ViewType'\n\nimport { PARALLEL_COORDINATES_SETTINGS_TEXT } from '../../../../text/views-and-settings/parallelCoordinates'\n\nimport { settingsDrawerItemStyle } from '../../../../components-style/content/data-drawer/settingsDrawerItemStyle'\n\nimport { AttributeChecker } from '../../data-drawer/items/AttributeChecker'\nimport { CategorySelector } from '../../data-drawer/items/CategorySelector'\nimport { MarginInput } from '../../data-drawer/items/MarginInput'\nimport { OpacityInput } from '../../data-drawer/items/OpacityInput'\nimport { NumberInput } from '../../data-drawer/items/NumberInput'\nimport { PalettePicker } from '../../data-drawer/items/PalettePicker'\n\nexport const ParallelCoordinatesSettingsComponent: VoidFunctionComponent<SettingsComponentProps> = ({\n  dataset,\n  settings,\n  setSettings,\n  cleanSelectedIfViewWasBrushing,\n}) => {\n  const viewType = ViewType.ParallelCoordinates\n  const parallelCoordinatesSettings = settings[viewType]\n\n  const [quantitativeAttributesKeys, setQuantitativeAttributesKeys] = useState(getQuantitativeAttributesKeys(dataset))\n  const [checked, setChecked] = useState<CheckedForSelectableDataType>(getDefaultQuantitativeAttributesChecked(dataset))\n\n  const categoricalAttributes = getCategoryAttributesKeys(dataset)\n\n  const getCurrentDisplayAttributes = useCallback(\n    (currChecked: CheckedForSelectableDataType) => quantitativeAttributesKeys.filter((key) => currChecked[key]),\n    [quantitativeAttributesKeys],\n  )\n\n  // first time empty\n  const createParallelCoordinatesSettings = useCallback(() => {\n    const newChecked = getDefaultQuantitativeAttributesChecked(dataset)\n    const newQaKeys = getQuantitativeAttributesKeys(dataset)\n    const defaultCategoryAttribute = getCategoryAttributesKeys(dataset)?.[0]\n    setChecked(newChecked)\n    setQuantitativeAttributesKeys(newQaKeys)\n    setSettings((prev) => {\n      const newParallelCoordinates: ParallelCoordinatesSettings = {\n        displayAttributes: newQaKeys.filter((key) => newChecked[key]),\n        categoryAttribute: defaultCategoryAttribute,\n        ...PARALLEL_COORDINATES_DEFAULT,\n      }\n      return { ...prev, [ViewType.ParallelCoordinates]: newParallelCoordinates }\n    })\n  }, [setSettings, dataset])\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(() => createParallelCoordinatesSettings(), [dataset])\n\n  const getNewSettingsForAttributeChecker = useCallback(\n    (newChecked: CheckedForSelectableDataType) => ({\n      displayAttributes: getCurrentDisplayAttributes(newChecked),\n    }),\n    [getCurrentDisplayAttributes],\n  )\n\n  const handleChangeSettings = useCallback(\n    () => cleanSelectedIfViewWasBrushing(ViewType.ParallelCoordinates),\n    [cleanSelectedIfViewWasBrushing],\n  )\n\n  if (parallelCoordinatesSettings) {\n    return (\n      <Box sx={settingsDrawerItemStyle.drawerSettings}>\n        <h1>{PARALLEL_COORDINATES_SETTINGS_TEXT.header}</h1>\n        {quantitativeAttributesKeys.length >= MIN_PARALLEL_COORDINATES_ATTRIBUTE_COUNT ? (\n          <>\n            <AttributeChecker\n              viewType={viewType}\n              attributesKeys={quantitativeAttributesKeys}\n              handleChangeSettings={handleChangeSettings}\n              getNewSettings={getNewSettingsForAttributeChecker}\n              setSettings={setSettings}\n              label={PARALLEL_COORDINATES_SETTINGS_TEXT.attributes}\n              checked={checked}\n              setChecked={setChecked}\n              setAttributesKeys={setQuantitativeAttributesKeys}\n            />\n            <CategorySelector\n              viewType={viewType}\n              value={parallelCoordinatesSettings.categoryAttribute!}\n              attributesKeys={categoricalAttributes}\n              setSettings={setSettings}\n              label={PARALLEL_COORDINATES_SETTINGS_TEXT.category}\n            />\n            <Accordion sx={settingsDrawerItemStyle.accordion}>\n              <AccordionSummary expandIcon={<ExpandMore />}>\n                <Typography>{PARALLEL_COORDINATES_SETTINGS_TEXT.more}</Typography>\n              </AccordionSummary>\n              <AccordionDetails>\n                <MarginInput\n                  margins={parallelCoordinatesSettings.margins}\n                  setSettings={setSettings}\n                  viewType={viewType}\n                  handleChangeSettings={handleChangeSettings}\n                />\n                <Divider />\n                <NumberInput\n                  value={parallelCoordinatesSettings.lineWidth}\n                  valueKey={lineWidthKey}\n                  setSettings={setSettings}\n                  label={PARALLEL_COORDINATES_SETTINGS_TEXT.lineWidth}\n                  viewType={viewType}\n                />\n                <Divider />\n                <OpacityInput\n                  header={PARALLEL_COORDINATES_SETTINGS_TEXT.opacity}\n                  opacities={parallelCoordinatesSettings.opacity}\n                  setSettings={setSettings}\n                  viewType={viewType}\n                />\n                <Divider />\n                <PalettePicker\n                  colors={parallelCoordinatesSettings.colorCategory}\n                  setSettings={setSettings}\n                  viewType={viewType}\n                  handleChangeSettings={handleChangeSettings}\n                />\n              </AccordionDetails>\n            </Accordion>\n          </>\n        ) : (\n          <Box sx={settingsDrawerItemStyle.insufficientAttributeNum}>\n            {PARALLEL_COORDINATES_SETTINGS_TEXT.unavailable}\n          </Box>\n        )}\n      </Box>\n    )\n  }\n  return null\n}\n","import { ViewVisualizationSettings } from './VisualizationSettings'\n\nexport const lineWidthKey = `lineWidth`\n\n/**\n * Settings for Parallel Coordinates view\n */\nexport interface ParallelCoordinatesSettings extends ViewVisualizationSettings {\n  /**\n   * Width of a data line\n   */\n  [lineWidthKey]: number\n}\n","import { schemeCategory10 } from 'd3'\n\nimport { ColorArray } from '../../types/styling/ColorArray'\nimport { ScatterPlotMatrixSettings } from '../../types/views/settings/ScatterPlotMatrixSettings'\n\nexport const MIN_SCATTER_PLOT_MATRIX_ATTRIBUTE_COUNT = 2\n\nexport const SCATTER_PLOT_MATRIX_DEFAULT: Pick<\n  ScatterPlotMatrixSettings,\n  `margins` | `pointSize` | `opacity` | `colorCategory` | `horizontalSpacing` | `verticalSpacing`\n> = {\n  margins: [15, 15, 20, 30],\n  pointSize: 3,\n  horizontalSpacing: 12,\n  verticalSpacing: 12,\n  opacity: [45, 80, 15],\n  colorCategory: schemeCategory10 as ColorArray,\n}\n","import { ViewType } from '../../constants/views-general/ViewType'\n\nimport { SETTINGS_TEXT, VIEW_NAMES } from './common'\n\nexport const SCATTER_PLOT_MATRIX_TEXT = {\n  tooSmall: `The scatter plot cannot be displayed because the window is too small. Change the size, number of attributes displayed, or margin to display scatter plot matrix.`,\n  unavailable: `The scatter plot cannot be displayed with a single attribute. To generate a scatter plot, select multiple attributes from the settings.`,\n}\n\nexport const SCATTER_PLOT_MATRIX_SETTINGS_TEXT = {\n  header: VIEW_NAMES[ViewType.ScatterPlotMatrix],\n  sizes: `Sizes`,\n  unavailable: `The scatter plot matrix plot cannot be used while data have less than 2 numerical attributes. Try to use different type of visualization that fits your data.`,\n  opacity: `Opacity of data points`,\n  pointSize: `Point size`,\n  horizontalSpacing: `Horizontal spacing`,\n  verticalSpacing: `Vertical spacing`,\n  ...SETTINGS_TEXT,\n}\n","import { VoidFunctionComponent, useCallback, useEffect, useState } from 'react'\nimport { Accordion, AccordionDetails, AccordionSummary, Box, Divider, Typography } from '@mui/material'\nimport { ExpandMore } from '@mui/icons-material'\n\nimport { CheckedForSelectableDataType } from '../../../../types/data/data'\nimport { SettingsComponentProps } from '../../../../types/views/SettingsComponentProps'\nimport {\n  horizontalSpacingKey,\n  pointSizeKey,\n  ScatterPlotMatrixSettings,\n  verticalSpacingKey,\n} from '../../../../types/views/settings/ScatterPlotMatrixSettings'\n\nimport {\n  getCategoryAttributesKeys,\n  getDefaultQuantitativeAttributesChecked,\n  getQuantitativeAttributesKeys,\n} from '../../../../helpers/data/data'\n\nimport { ViewType } from '../../../../constants/views-general/ViewType'\nimport {\n  MIN_SCATTER_PLOT_MATRIX_ATTRIBUTE_COUNT,\n  SCATTER_PLOT_MATRIX_DEFAULT,\n} from '../../../../constants/views/scatterPlotMatrix'\n\nimport { SCATTER_PLOT_MATRIX_SETTINGS_TEXT } from '../../../../text/views-and-settings/scatterPlotMatrix'\n\nimport { settingsDrawerItemStyle } from '../../../../components-style/content/data-drawer/settingsDrawerItemStyle'\nimport { settingsTextStyle } from '../../../../components-style/content/data-drawer/items/settingsTextStyle'\n\nimport { AttributeChecker } from '../../data-drawer/items/AttributeChecker'\nimport { CategorySelector } from '../../data-drawer/items/CategorySelector'\nimport { MarginInput } from '../../data-drawer/items/MarginInput'\nimport { NumberInput } from '../../data-drawer/items/NumberInput'\nimport { OpacityInput } from '../../data-drawer/items/OpacityInput'\nimport { PalettePicker } from '../../data-drawer/items/PalettePicker'\n\nexport const ScatterPlotMatrixSettingsComponent: VoidFunctionComponent<SettingsComponentProps> = ({\n  dataset,\n  settings,\n  setSettings,\n  cleanSelectedIfViewWasBrushing,\n}) => {\n  const viewType = ViewType.ScatterPlotMatrix\n  const scatterPlotMatrixSettings = settings[viewType]\n\n  const [quantitativeAttributesKeys, setQuantitativeAttributesKeys] = useState(getQuantitativeAttributesKeys(dataset))\n  const [checked, setChecked] = useState<CheckedForSelectableDataType>(getDefaultQuantitativeAttributesChecked(dataset))\n\n  const categoricalAttributes = getCategoryAttributesKeys(dataset)\n\n  const getCurrentDisplayAttributes = useCallback(\n    (currChecked: CheckedForSelectableDataType) => quantitativeAttributesKeys.filter((key) => currChecked[key]),\n    [quantitativeAttributesKeys],\n  )\n\n  // first time empty\n  const createScatterPlotMatrixSettings = useCallback(() => {\n    const newChecked = getDefaultQuantitativeAttributesChecked(dataset)\n    const newQaKeys = getQuantitativeAttributesKeys(dataset)\n    const defaultCategoryAttribute = getCategoryAttributesKeys(dataset)?.[0]\n    setChecked(newChecked)\n    setQuantitativeAttributesKeys(newQaKeys)\n    setSettings((prev) => {\n      const newScatterPlotMatrix: ScatterPlotMatrixSettings = {\n        displayAttributes: newQaKeys.filter((key) => newChecked[key]),\n        categoryAttribute: defaultCategoryAttribute,\n        ...SCATTER_PLOT_MATRIX_DEFAULT,\n      }\n      return { ...prev, [ViewType.ScatterPlotMatrix]: newScatterPlotMatrix }\n    })\n  }, [setSettings, dataset])\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(() => createScatterPlotMatrixSettings(), [dataset])\n\n  const getNewSettingsForAttributeChecker = useCallback(\n    (newChecked: CheckedForSelectableDataType) => ({\n      displayAttributes: getCurrentDisplayAttributes(newChecked),\n    }),\n    [getCurrentDisplayAttributes],\n  )\n\n  const handleChangeSettings = useCallback(\n    () => cleanSelectedIfViewWasBrushing(ViewType.ScatterPlotMatrix),\n    [cleanSelectedIfViewWasBrushing],\n  )\n\n  if (scatterPlotMatrixSettings) {\n    return (\n      <Box sx={settingsDrawerItemStyle.drawerSettings}>\n        <h1>{SCATTER_PLOT_MATRIX_SETTINGS_TEXT.header}</h1>\n        {quantitativeAttributesKeys.length >= MIN_SCATTER_PLOT_MATRIX_ATTRIBUTE_COUNT ? (\n          <>\n            <AttributeChecker\n              viewType={viewType}\n              attributesKeys={quantitativeAttributesKeys}\n              handleChangeSettings={handleChangeSettings}\n              getNewSettings={getNewSettingsForAttributeChecker}\n              setSettings={setSettings}\n              label={SCATTER_PLOT_MATRIX_SETTINGS_TEXT.attributes}\n              checked={checked}\n              setChecked={setChecked}\n              setAttributesKeys={setQuantitativeAttributesKeys}\n            />\n            <CategorySelector\n              viewType={viewType}\n              value={scatterPlotMatrixSettings.categoryAttribute!}\n              attributesKeys={categoricalAttributes}\n              setSettings={setSettings}\n              label={SCATTER_PLOT_MATRIX_SETTINGS_TEXT.category}\n            />\n            <Accordion sx={settingsDrawerItemStyle.accordion}>\n              <AccordionSummary expandIcon={<ExpandMore />}>\n                <Typography>{SCATTER_PLOT_MATRIX_SETTINGS_TEXT.more}</Typography>\n              </AccordionSummary>\n              <AccordionDetails>\n                <MarginInput\n                  margins={scatterPlotMatrixSettings.margins}\n                  setSettings={setSettings}\n                  viewType={viewType}\n                  handleChangeSettings={handleChangeSettings}\n                />\n                <Divider />\n                <Typography sx={settingsTextStyle.text}>{SCATTER_PLOT_MATRIX_SETTINGS_TEXT.sizes}</Typography>\n                <NumberInput\n                  value={scatterPlotMatrixSettings.pointSize}\n                  valueKey={pointSizeKey}\n                  setSettings={setSettings}\n                  label={SCATTER_PLOT_MATRIX_SETTINGS_TEXT.pointSize}\n                  viewType={viewType}\n                />\n                <NumberInput\n                  value={scatterPlotMatrixSettings.horizontalSpacing}\n                  valueKey={horizontalSpacingKey}\n                  setSettings={setSettings}\n                  label={SCATTER_PLOT_MATRIX_SETTINGS_TEXT.horizontalSpacing}\n                  viewType={viewType}\n                  handleChangeSettings={handleChangeSettings}\n                />\n                <NumberInput\n                  value={scatterPlotMatrixSettings.verticalSpacing}\n                  valueKey={verticalSpacingKey}\n                  setSettings={setSettings}\n                  label={SCATTER_PLOT_MATRIX_SETTINGS_TEXT.verticalSpacing}\n                  viewType={viewType}\n                  handleChangeSettings={handleChangeSettings}\n                />\n                <Divider />\n                <OpacityInput\n                  header={SCATTER_PLOT_MATRIX_SETTINGS_TEXT.opacity}\n                  opacities={scatterPlotMatrixSettings.opacity}\n                  setSettings={setSettings}\n                  viewType={viewType}\n                />\n                <Divider />\n                <PalettePicker\n                  colors={scatterPlotMatrixSettings.colorCategory}\n                  setSettings={setSettings}\n                  viewType={viewType}\n                  handleChangeSettings={handleChangeSettings}\n                />\n              </AccordionDetails>\n            </Accordion>\n          </>\n        ) : (\n          <Box sx={settingsDrawerItemStyle.insufficientAttributeNum}>\n            {SCATTER_PLOT_MATRIX_SETTINGS_TEXT.unavailable}\n          </Box>\n        )}\n      </Box>\n    )\n  }\n  return null\n}\n","import { ViewVisualizationSettings } from './VisualizationSettings'\n\nexport const pointSizeKey = `pointSize`\nexport const horizontalSpacingKey = `horizontalSpacing`\nexport const verticalSpacingKey = `verticalSpacing`\n\n/**\n * Settings for Scatter Plot Matrix view\n */\nexport interface ScatterPlotMatrixSettings extends ViewVisualizationSettings {\n  /**\n   * Size of a data point\n   */\n  [pointSizeKey]: number\n\n  /**\n   * Size of horizontal spacing\n   */\n  [horizontalSpacingKey]: number\n\n  /**\n   * Size of vertical spacing\n   */\n  [verticalSpacingKey]: number\n}\n","import { schemeCategory10 } from 'd3'\n\nimport { ColorArray } from '../../types/styling/ColorArray'\nimport { GlyphsSettings } from '../../types/views/settings/GlyphsSettings'\n\nimport { SortType } from '../sort/SortType'\n\nexport const MIN_GLYPHS_ATTRIBUTE_COUNT = 3\n\nexport const GLYPHS_DEFAULT: Pick<\n  GlyphsSettings,\n  `glyphSize` | `glyphSpacing` | `margins` | `opacity` | `colorCategory` | `sortType`\n> = {\n  sortType: SortType.asc,\n  glyphSize: 35,\n  glyphSpacing: 3,\n  margins: [15, 10, 20, 10],\n  opacity: [60, 90, 30],\n  colorCategory: schemeCategory10 as ColorArray,\n}\n","export enum ParallelSetsBrushingType {\n  top = `top`,\n  overlay = `overlay`,\n}\n","import { ViewType } from '../../constants/views-general/ViewType'\n\nimport { SETTINGS_TEXT, VIEW_NAMES } from './common'\n\nexport const GLYPHS_TEXT = {\n  unavailable: `The glyph plot cannot be displayed with less than 3 attributes. To generate a glyph plot, select more attributes from the settings.`,\n}\n\nexport const GLYPHS_SETTINGS_TEXT = {\n  header: VIEW_NAMES[ViewType.Glyphs],\n  sorting: `Sorted by`,\n  unavailable: `The glyph plot cannot be used while data have less than 3 numerical attributes. Try to use different type of visualization that fits your data.`,\n  glyphSize: `Glyph size`,\n  glyphSpacing: `Glyph spacing`,\n  opacity: `Opacity of glyphs`,\n  sort: `Sort...`,\n  ...SETTINGS_TEXT,\n}\n","import { Dispatch, SetStateAction, useCallback } from 'react'\nimport { MenuItem, TextField } from '@mui/material'\n\nimport { SelectableDataType } from '../../../../types/data/data'\nimport { Settings } from '../../../../types/views/settings/Settings'\n\nimport { otherCasesToWhitespaces } from '../../../../helpers/data/formatText'\n\nimport { ViewType } from '../../../../constants/views-general/ViewType'\n\nexport interface SelectorProps<Opt> {\n  viewType: ViewType\n  value: keyof SelectableDataType\n  attributesKeys: Array<keyof SelectableDataType>\n  setSettings: Dispatch<SetStateAction<Settings>>\n  handleChangeSettings?: () => void\n  label: string\n  settingsKey: keyof Opt\n}\n\nexport const Selector = <Opt,>({\n  viewType,\n  value,\n  attributesKeys,\n  setSettings,\n  label,\n  settingsKey,\n  handleChangeSettings,\n}: SelectorProps<Opt>): JSX.Element => {\n  const handleSelectChange = useCallback(\n    (newValue: keyof SelectableDataType) => {\n      if (handleChangeSettings) handleChangeSettings()\n      setSettings((prev) => {\n        const prevSettings = prev[viewType]!\n        return {\n          ...prev,\n          [viewType]: {\n            ...prevSettings,\n            [settingsKey]: newValue,\n          },\n        }\n      })\n    },\n    [handleChangeSettings, setSettings, settingsKey, viewType],\n  )\n\n  return (\n    <TextField\n      value={value}\n      onChange={(e) => handleSelectChange(e.target.value as keyof SelectableDataType)}\n      select\n      label={label}\n    >\n      {attributesKeys.map((key, idx) => (\n        <MenuItem value={key} key={`${settingsKey}-${viewType}-${idx}`}>\n          {otherCasesToWhitespaces(key)}\n        </MenuItem>\n      ))}\n    </TextField>\n  )\n}\n","import { SxProps } from '@mui/system'\n\nimport { important, px } from '../../../../helpers/stringGetters'\n\nimport { BUTTON_COLORS } from '../../../../styles/colors'\n\nexport const toggleButtonsStyle: Record<string, SxProps> = {\n  box: {\n    marginTop: important(0),\n  },\n  group: {\n    width: `100%`,\n    display: `flex`,\n  },\n  button: {\n    flexGrow: 1,\n    padding: px(2, 5),\n    '&.Mui-selected': {\n      bgcolor: BUTTON_COLORS.buttonOnBackground,\n    },\n  },\n}\n","import { Dispatch, SetStateAction, useCallback } from 'react'\nimport { Box, ToggleButton, ToggleButtonGroup } from '@mui/material'\n\nimport { Settings } from '../../../../types/views/settings/Settings'\n\nimport { ViewType } from '../../../../constants/views-general/ViewType'\n\nimport { toggleButtonsStyle } from '../../../../components-style/content/data-drawer/items/toggleButtonsStyle'\n\ninterface ToggleButtonsProps<T, Opt> {\n  viewType: ViewType\n  value: T\n  options: T[]\n  setSettings: Dispatch<SetStateAction<Settings>>\n  settingsKey: keyof Opt\n}\n\nexport const ToggleButtons = <T, Opt>({\n  viewType,\n  value,\n  options,\n  setSettings,\n  settingsKey,\n}: ToggleButtonsProps<T, Opt>): JSX.Element => {\n  const handleToggleButtonChange = useCallback(\n    (newValue: T | null) => {\n      setSettings((prev) => {\n        const prevSettings = prev[viewType]!\n        const newSetting = newValue ? { [settingsKey]: newValue } : {}\n        return {\n          ...prev,\n          [viewType]: {\n            ...prevSettings,\n            ...newSetting,\n          },\n        }\n      })\n    },\n    [setSettings, settingsKey, viewType],\n  )\n\n  return (\n    <Box sx={toggleButtonsStyle.box}>\n      <ToggleButtonGroup\n        sx={toggleButtonsStyle.group}\n        value={value}\n        exclusive\n        onChange={(e, value) => handleToggleButtonChange(value)}\n      >\n        {options.map((opt, idx) => (\n          <ToggleButton sx={toggleButtonsStyle.button} value={opt} key={idx}>\n            {opt}\n          </ToggleButton>\n        ))}\n      </ToggleButtonGroup>\n    </Box>\n  )\n}\n","import { VoidFunctionComponent, useCallback, useEffect, useState } from 'react'\nimport { Accordion, AccordionDetails, AccordionSummary, Box, Divider, Typography } from '@mui/material'\nimport { ExpandMore } from '@mui/icons-material'\n\nimport { CheckedForSelectableDataType } from '../../../../types/data/data'\nimport {\n  glyphSizeKey,\n  glyphSpacingKey,\n  GlyphsSettings,\n  sortAttributeKey,\n  sortTypeKey,\n} from '../../../../types/views/settings/GlyphsSettings'\nimport { SettingsComponentProps } from '../../../../types/views/SettingsComponentProps'\n\nimport {\n  getCategoryAttributesKeys,\n  getDefaultQuantitativeAttributesChecked,\n  getQuantitativeAttributesKeys,\n} from '../../../../helpers/data/data'\n\nimport { GLYPHS_DEFAULT, MIN_GLYPHS_ATTRIBUTE_COUNT } from '../../../../constants/views/glyphs'\nimport { ViewType } from '../../../../constants/views-general/ViewType'\nimport { SortType } from '../../../../constants/sort/SortType'\n\nimport { GLYPHS_SETTINGS_TEXT } from '../../../../text/views-and-settings/glyphs'\n\nimport { settingsDrawerItemStyle } from '../../../../components-style/content/data-drawer/settingsDrawerItemStyle'\nimport { settingsTextStyle } from '../../../../components-style/content/data-drawer/items/settingsTextStyle'\n\nimport { AttributeChecker } from '../../data-drawer/items/AttributeChecker'\nimport { CategorySelector } from '../../data-drawer/items/CategorySelector'\nimport { Selector } from '../../data-drawer/items/Selector'\nimport { MarginInput } from '../../data-drawer/items/MarginInput'\nimport { NumberInput } from '../../data-drawer/items/NumberInput'\nimport { OpacityInput } from '../../data-drawer/items/OpacityInput'\nimport { PalettePicker } from '../../data-drawer/items/PalettePicker'\nimport { ToggleButtons } from '../../data-drawer/items/ToggleButtons'\n\nexport const GlyphsSettingsComponent: VoidFunctionComponent<SettingsComponentProps> = ({\n  dataset,\n  settings,\n  setSettings,\n}) => {\n  const viewType = ViewType.Glyphs\n  const glyphsSettings = settings[viewType]\n  const [quantitativeAttributesKeys, setQuantitativeAttributesKeys] = useState(getQuantitativeAttributesKeys(dataset))\n  const [checked, setChecked] = useState<CheckedForSelectableDataType>(getDefaultQuantitativeAttributesChecked(dataset))\n\n  const sortableAttributes = quantitativeAttributesKeys.filter((key) => checked[key])\n  const categoricalAttributes = getCategoryAttributesKeys(dataset)\n\n  const getCurrentDisplayAttributes = useCallback(\n    (currChecked: CheckedForSelectableDataType) => quantitativeAttributesKeys.filter((key) => currChecked[key]),\n    [quantitativeAttributesKeys],\n  )\n\n  const createGlyphsSettings = useCallback(() => {\n    const newChecked = getDefaultQuantitativeAttributesChecked(dataset)\n    const newQaKeys = getQuantitativeAttributesKeys(dataset)\n    const defaultSortAttribute = newQaKeys.filter((key) => newChecked[key])?.[0]\n    const defaultCategoryAttribute = getCategoryAttributesKeys(dataset)?.[0]\n    setChecked(newChecked)\n    setQuantitativeAttributesKeys(newQaKeys)\n    setSettings((prev) => {\n      const newGlyphs: GlyphsSettings = {\n        displayAttributes: newQaKeys.filter((key) => newChecked[key]),\n        sortAttribute: defaultSortAttribute,\n        categoryAttribute: defaultCategoryAttribute,\n        ...GLYPHS_DEFAULT,\n      }\n      return { ...prev, [ViewType.Glyphs]: newGlyphs }\n    })\n  }, [setSettings, dataset])\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(() => createGlyphsSettings(), [dataset]) // first time empty, call once\n\n  const getNewSettingsForAttributeChecker = useCallback(\n    (newChecked: CheckedForSelectableDataType, prevSettings: GlyphsSettings): Partial<GlyphsSettings> => {\n      const displayAttributes = getCurrentDisplayAttributes(newChecked)\n      const newSortableAttributes = quantitativeAttributesKeys.filter((key) => newChecked[key])\n      const sortAttribute = newChecked[prevSettings.sortAttribute]\n        ? prevSettings.sortAttribute\n        : newSortableAttributes?.[0]\n      return { displayAttributes, sortAttribute }\n    },\n    [getCurrentDisplayAttributes, quantitativeAttributesKeys],\n  )\n\n  if (glyphsSettings) {\n    return (\n      <Box sx={settingsDrawerItemStyle.drawerSettings}>\n        <h1>{GLYPHS_SETTINGS_TEXT.header}</h1>\n        {quantitativeAttributesKeys.length >= MIN_GLYPHS_ATTRIBUTE_COUNT ? (\n          <>\n            <AttributeChecker\n              viewType={viewType}\n              attributesKeys={quantitativeAttributesKeys}\n              getNewSettings={getNewSettingsForAttributeChecker}\n              setSettings={setSettings}\n              label={GLYPHS_SETTINGS_TEXT.attributes}\n              checked={checked}\n              setChecked={setChecked}\n              setAttributesKeys={setQuantitativeAttributesKeys}\n            />\n            <CategorySelector\n              viewType={viewType}\n              value={glyphsSettings.categoryAttribute!}\n              attributesKeys={categoricalAttributes}\n              setSettings={setSettings}\n              label={GLYPHS_SETTINGS_TEXT.category}\n            />\n            <Selector\n              viewType={viewType}\n              value={glyphsSettings.sortAttribute!}\n              attributesKeys={sortableAttributes}\n              setSettings={setSettings}\n              label={GLYPHS_SETTINGS_TEXT.sorting}\n              settingsKey={sortAttributeKey}\n            />\n            <Typography sx={settingsTextStyle.text}>{GLYPHS_SETTINGS_TEXT.sort}</Typography>\n            <ToggleButtons\n              viewType={viewType}\n              value={glyphsSettings.sortType}\n              options={Object.values<SortType>(SortType)}\n              setSettings={setSettings}\n              settingsKey={sortTypeKey}\n            />\n            <Accordion sx={settingsDrawerItemStyle.accordion}>\n              <AccordionSummary expandIcon={<ExpandMore />}>\n                <Typography>{GLYPHS_SETTINGS_TEXT.more}</Typography>\n              </AccordionSummary>\n              <AccordionDetails>\n                <MarginInput margins={glyphsSettings.margins} setSettings={setSettings} viewType={viewType} />\n                <Divider />\n                <NumberInput\n                  value={glyphsSettings.glyphSize}\n                  valueKey={glyphSizeKey}\n                  setSettings={setSettings}\n                  label={GLYPHS_SETTINGS_TEXT.glyphSize}\n                  viewType={viewType}\n                />\n                <NumberInput\n                  value={glyphsSettings.glyphSpacing}\n                  valueKey={glyphSpacingKey}\n                  setSettings={setSettings}\n                  label={GLYPHS_SETTINGS_TEXT.glyphSpacing}\n                  viewType={viewType}\n                />\n                <Divider />\n                <OpacityInput\n                  header={GLYPHS_SETTINGS_TEXT.opacity}\n                  opacities={glyphsSettings.opacity}\n                  setSettings={setSettings}\n                  viewType={viewType}\n                />\n                <Divider />\n                <PalettePicker colors={glyphsSettings.colorCategory} setSettings={setSettings} viewType={viewType} />\n              </AccordionDetails>\n            </Accordion>\n          </>\n        ) : (\n          <Box sx={settingsDrawerItemStyle.insufficientAttributeNum}>{GLYPHS_SETTINGS_TEXT.unavailable}</Box>\n        )}\n      </Box>\n    )\n  }\n  return null\n}\n","import { SelectableDataType } from '../../data/data'\n\nimport { SortType } from '../../../constants/sort/SortType'\n\nimport { ViewVisualizationSettings } from './VisualizationSettings'\n\nexport const sortAttributeKey = `sortAttribute`\nexport const sortTypeKey = `sortType`\nexport const glyphSizeKey = `glyphSize`\nexport const glyphSpacingKey = `glyphSpacing`\n\n/**\n * Settings for Glyphs view\n */\nexport interface GlyphsSettings extends ViewVisualizationSettings {\n  /**\n   * Attribute for sorting glyphs from lowest to highest value\n   */\n  [sortAttributeKey]: keyof SelectableDataType\n\n  /**\n   * Sort type - asc/desc\n   */\n  [sortTypeKey]: SortType\n\n  /**\n   * Size of a glyph\n   */\n  [glyphSizeKey]: number\n\n  /**\n   * Spacing between glyphs\n   */\n  [glyphSpacingKey]: number\n}\n","import { schemeCategory10 } from 'd3'\n\nimport { ColorArray } from '../../types/styling/ColorArray'\nimport { ScatterPlotGlyphsSettings } from '../../types/views/settings/ScatterPlotGlyphsSettings'\n\nexport const MIN_SCATTER_PLOT_GLYPHS_ATTRIBUTE_COUNT = 3\n\nexport const SCATTER_PLOT_GLYPHS_DEFAULT: Pick<\n  ScatterPlotGlyphsSettings,\n  `glyphSize` | `margins` | `opacity` | `colorCategory`\n> = {\n  glyphSize: 30,\n  margins: [20, 20, 20, 30],\n  opacity: [60, 90, 30],\n  colorCategory: schemeCategory10 as ColorArray,\n}\n","import { ViewType } from '../../constants/views-general/ViewType'\n\nimport { SETTINGS_TEXT, VIEW_NAMES } from './common'\n\nexport const SCATTER_PLOT_GLYPHS_TEXT = {\n  unavailable: `The scatter plot with glyphs cannot be displayed with less than 3 attributes. To generate a scatter plot with glyphs, select more attributes from the settings.`,\n}\n\nexport const SCATTER_PLOT_GLYPHS_SETTINGS_TEXT = {\n  header: VIEW_NAMES[ViewType.ScatterPlotGlyphs],\n  xAttribute: `X axis values`,\n  yAttribute: `Y axis values`,\n  unavailable: `The scatter plot with glyphs cannot be used while data have less than 3 numerical attributes. Try to use different type of visualization that fits your data.`,\n  glyphSize: `Glyph size`,\n  opacity: `Opacity of glyphs`,\n  ...SETTINGS_TEXT,\n}\n","import { useCallback, useEffect, useMemo, useState, VoidFunctionComponent } from 'react'\nimport { Accordion, AccordionDetails, AccordionSummary, Box, Divider, Typography } from '@mui/material'\nimport { ExpandMore } from '@mui/icons-material'\n\nimport { CheckedForSelectableDataType } from '../../../../types/data/data'\nimport { SettingsComponentProps } from '../../../../types/views/SettingsComponentProps'\nimport {\n  glyphSizeKey,\n  ScatterPlotGlyphsSettings,\n  xAttributeKey,\n  yAttributeKey,\n} from '../../../../types/views/settings/ScatterPlotGlyphsSettings'\n\nimport {\n  getCategoryAttributesKeys,\n  getDefaultQuantitativeAttributesChecked,\n  getQuantitativeAttributesKeys,\n} from '../../../../helpers/data/data'\n\nimport {\n  MIN_SCATTER_PLOT_GLYPHS_ATTRIBUTE_COUNT,\n  SCATTER_PLOT_GLYPHS_DEFAULT,\n} from '../../../../constants/views/scatterPlotGlyphs'\nimport { ViewType } from '../../../../constants/views-general/ViewType'\n\nimport { SCATTER_PLOT_GLYPHS_SETTINGS_TEXT } from '../../../../text/views-and-settings/scatterPlotGlyphs'\n\nimport { settingsDrawerItemStyle } from '../../../../components-style/content/data-drawer/settingsDrawerItemStyle'\n\nimport { AttributeChecker } from '../../data-drawer/items/AttributeChecker'\nimport { CategorySelector } from '../../data-drawer/items/CategorySelector'\nimport { MarginInput } from '../../data-drawer/items/MarginInput'\nimport { NumberInput } from '../../data-drawer/items/NumberInput'\nimport { OpacityInput } from '../../data-drawer/items/OpacityInput'\nimport { PalettePicker } from '../../data-drawer/items/PalettePicker'\nimport { Selector } from '../../data-drawer/items/Selector'\n\nexport const ScatterPlotGlyphsSettingsComponent: VoidFunctionComponent<SettingsComponentProps> = ({\n  dataset,\n  settings,\n  setSettings,\n  cleanSelectedIfViewWasBrushing,\n}) => {\n  const viewType = ViewType.ScatterPlotGlyphs\n  const scatterPlotGlyphsSettings = settings[viewType]\n  const defaultX = useMemo(() => getQuantitativeAttributesKeys(dataset)?.[0], [dataset])\n  const defaultY = useMemo(() => getQuantitativeAttributesKeys(dataset)?.[1], [dataset])\n  const [quantitativeAttributesKeys, setQuantitativeAttributesKeys] = useState(getQuantitativeAttributesKeys(dataset))\n  const [checked, setChecked] = useState<CheckedForSelectableDataType>(getDefaultQuantitativeAttributesChecked(dataset))\n\n  const categoricalAttributes = getCategoryAttributesKeys(dataset)\n\n  const getCurrentDisplayAttributes = useCallback(\n    (currChecked: CheckedForSelectableDataType) => quantitativeAttributesKeys.filter((key) => currChecked[key]),\n    [quantitativeAttributesKeys],\n  )\n\n  const createScatterPlotGlyphsSettings = useCallback(() => {\n    const newChecked = getDefaultQuantitativeAttributesChecked(dataset)\n    const newQaKeys = getQuantitativeAttributesKeys(dataset)\n    const defaultCategoryAttribute = getCategoryAttributesKeys(dataset)?.[0]\n    setChecked(newChecked)\n    setQuantitativeAttributesKeys(newQaKeys)\n    setSettings((prev) => {\n      const newScatterPlotGlyphsSettings: ScatterPlotGlyphsSettings = {\n        displayAttributes: newQaKeys.filter((key) => newChecked[key]),\n        categoryAttribute: defaultCategoryAttribute,\n        xAttribute: defaultX,\n        yAttribute: defaultY,\n        ...SCATTER_PLOT_GLYPHS_DEFAULT,\n      }\n      return { ...prev, [ViewType.ScatterPlotGlyphs]: newScatterPlotGlyphsSettings }\n    })\n  }, [setSettings, defaultX, defaultY, dataset])\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(() => createScatterPlotGlyphsSettings(), [dataset]) // first time empty, call once\n\n  const getNewSettingsForAttributeChecker = useCallback(\n    (newChecked: CheckedForSelectableDataType): Partial<ScatterPlotGlyphsSettings> => ({\n      displayAttributes: getCurrentDisplayAttributes(newChecked),\n    }),\n    [getCurrentDisplayAttributes],\n  )\n\n  const handleChangeSettings = useCallback(\n    () => cleanSelectedIfViewWasBrushing(ViewType.ScatterPlotGlyphs),\n    [cleanSelectedIfViewWasBrushing],\n  )\n\n  if (scatterPlotGlyphsSettings) {\n    return (\n      <Box sx={settingsDrawerItemStyle.drawerSettings}>\n        <h1>{SCATTER_PLOT_GLYPHS_SETTINGS_TEXT.header}</h1>\n        {quantitativeAttributesKeys.length >= MIN_SCATTER_PLOT_GLYPHS_ATTRIBUTE_COUNT ? (\n          <>\n            <AttributeChecker\n              viewType={viewType}\n              attributesKeys={quantitativeAttributesKeys}\n              getNewSettings={getNewSettingsForAttributeChecker}\n              setSettings={setSettings}\n              label={SCATTER_PLOT_GLYPHS_SETTINGS_TEXT.attributes}\n              checked={checked}\n              setChecked={setChecked}\n              setAttributesKeys={setQuantitativeAttributesKeys}\n            />\n            <Selector\n              viewType={viewType}\n              value={scatterPlotGlyphsSettings.xAttribute}\n              attributesKeys={quantitativeAttributesKeys}\n              setSettings={setSettings}\n              label={SCATTER_PLOT_GLYPHS_SETTINGS_TEXT.xAttribute}\n              settingsKey={xAttributeKey}\n              handleChangeSettings={handleChangeSettings}\n            />\n            <Selector\n              viewType={viewType}\n              value={scatterPlotGlyphsSettings.yAttribute}\n              attributesKeys={quantitativeAttributesKeys}\n              setSettings={setSettings}\n              label={SCATTER_PLOT_GLYPHS_SETTINGS_TEXT.yAttribute}\n              settingsKey={yAttributeKey}\n              handleChangeSettings={handleChangeSettings}\n            />\n            <CategorySelector\n              viewType={viewType}\n              value={scatterPlotGlyphsSettings.categoryAttribute!}\n              attributesKeys={categoricalAttributes}\n              setSettings={setSettings}\n              label={SCATTER_PLOT_GLYPHS_SETTINGS_TEXT.category}\n            />\n            <Accordion sx={settingsDrawerItemStyle.accordion}>\n              <AccordionSummary expandIcon={<ExpandMore />}>\n                <Typography>{SCATTER_PLOT_GLYPHS_SETTINGS_TEXT.more}</Typography>\n              </AccordionSummary>\n              <AccordionDetails>\n                <MarginInput\n                  margins={scatterPlotGlyphsSettings.margins}\n                  setSettings={setSettings}\n                  viewType={viewType}\n                  handleChangeSettings={handleChangeSettings}\n                />\n                <Divider />\n                <NumberInput\n                  value={scatterPlotGlyphsSettings.glyphSize}\n                  valueKey={glyphSizeKey}\n                  setSettings={setSettings}\n                  label={SCATTER_PLOT_GLYPHS_SETTINGS_TEXT.glyphSize}\n                  viewType={viewType}\n                />\n                <Divider />\n                <OpacityInput\n                  header={SCATTER_PLOT_GLYPHS_SETTINGS_TEXT.opacity}\n                  opacities={scatterPlotGlyphsSettings.opacity}\n                  setSettings={setSettings}\n                  viewType={viewType}\n                />\n                <Divider />\n                <PalettePicker\n                  colors={scatterPlotGlyphsSettings.colorCategory}\n                  setSettings={setSettings}\n                  viewType={viewType}\n                  handleChangeSettings={handleChangeSettings}\n                />\n              </AccordionDetails>\n            </Accordion>\n          </>\n        ) : (\n          <Box sx={settingsDrawerItemStyle.insufficientAttributeNum}>\n            {SCATTER_PLOT_GLYPHS_SETTINGS_TEXT.unavailable}\n          </Box>\n        )}\n      </Box>\n    )\n  }\n  return null\n}\n","import { SelectableDataType } from '../../data/data'\n\nimport { ViewVisualizationSettings } from './VisualizationSettings'\n\nexport const glyphSizeKey = `glyphSize`\nexport const glyphSpacingKey = `glyphSpacing`\nexport const xAttributeKey = `xAttribute`\nexport const yAttributeKey = `yAttribute`\n\n/**\n * Settings for Scatter Plot Glyphs view\n */\nexport interface ScatterPlotGlyphsSettings extends ViewVisualizationSettings {\n  /**\n   * Size of a glyph\n   */\n  [glyphSizeKey]: number\n\n  /**\n   * Numerical attribute for axis x\n   */\n  [xAttributeKey]: keyof SelectableDataType\n\n  /**\n   * Numerical attribute for axis y\n   */\n  [yAttributeKey]: keyof SelectableDataType\n}\n","import { DataTableSettings } from '../../types/views/settings/DataTableSettings'\n\nimport { DEFAULT_BRUSH_BG_COLOR_TABLE, DEFAULT_BRUSH_FONT_COLOR_TABLE } from '../views-general/defaultSettableColors'\n\nexport const MIN_DATA_TABLE_ATTRIBUTE_COUNT = 1\n\nexport const DATA_TABLE_DEFAULT: Pick<\n  DataTableSettings,\n  `rowHeight` | `selectedBackgroundColor` | `selectedFontColor`\n> = {\n  rowHeight: 45,\n  selectedBackgroundColor: DEFAULT_BRUSH_BG_COLOR_TABLE,\n  selectedFontColor: DEFAULT_BRUSH_FONT_COLOR_TABLE,\n}\n","export const DEFAULT_BRUSH_COLOR = `#830606`\nexport const DEFAULT_BRUSH_BG_COLOR_TABLE = `#ffcfcf`\nexport const DEFAULT_BRUSH_FONT_COLOR_TABLE = `#111111`\nexport const DEFAULT_FONT_COLOR_PARALLEL_SETS = `#252525`\n","import { ViewType } from '../../constants/views-general/ViewType'\nimport { SortType } from '../../constants/sort/SortType'\n\nimport { SETTINGS_BASE_TEXT, VIEW_NAMES } from './common'\n\nexport const DATA_TABLE_SETTINGS_TEXT = {\n  header: VIEW_NAMES[ViewType.DataTable],\n  unavailable: `The dataset seems to have less than one attribute, which makes it invalid. Please, choose different dataset.`,\n  attributes: `Display columns`,\n  rowHeight: `Table row height`,\n  selectedBackgroundColor: `Selected background color`,\n  selectedFontColor: `Selected font color`,\n  ...SETTINGS_BASE_TEXT,\n}\n\nexport const DATA_TABLE_TEXT = {\n  checkboxTooltip: `Select all`,\n  [SortType.asc]: `Sort ascending`,\n  [SortType.desc]: `Sort descending`,\n  unavailable: `The Data Table view cannot be displayed without attributes. To generate a Data Table view, select more attributes from the settings.`,\n}\n","import { SxProps } from '@mui/system'\n\nimport { px } from '../../../../helpers/stringGetters'\n\nexport const getColorPickerInputStyle = (color: string): SxProps => ({\n  bgcolor: color,\n  width: px(25),\n  borderRadius: px(5),\n  '& input': {\n    width: `100%`,\n    height: px(25),\n    opacity: 0,\n  },\n})\n\nexport const colorPickerStyle: Record<string, SxProps> = {\n  picker: {\n    display: `flex`,\n    justifyContent: `space-between`,\n    alignItems: `center`,\n  },\n}\n","import { Dispatch, SetStateAction, useCallback, useEffect, useState } from 'react'\nimport { Box, Typography } from '@mui/material'\n\nimport { Settings } from '../../../../types/views/settings/Settings'\n\nimport { useDebounce } from '../../../../helpers/react/useDebounce'\n\nimport { ViewType } from '../../../../constants/views-general/ViewType'\nimport { COLOR_DEBOUNCE } from '../../../../constants/debounce/debounce'\nimport { INPUT_TYPE } from '../../../../constants/others'\n\nimport {\n  colorPickerStyle,\n  getColorPickerInputStyle,\n} from '../../../../components-style/content/data-drawer/items/colorPickerStyle'\nimport { settingsTextStyle } from '../../../../components-style/content/data-drawer/items/settingsTextStyle'\n\nexport interface ColorPickerProps<Opt> {\n  viewType: ViewType\n  color: string\n  settingsKey: keyof Opt\n  setSettings: Dispatch<SetStateAction<Settings>>\n  label: string\n}\n\nexport const ColorPicker = <Opt,>({\n  viewType,\n  color,\n  settingsKey,\n  setSettings,\n  label,\n}: ColorPickerProps<Opt>): JSX.Element => {\n  const [currentColor, setCurrentColor] = useState(color)\n  const debouncedColor = useDebounce(currentColor, COLOR_DEBOUNCE)\n\n  const handleChangeColor = useCallback((newColor: string) => {\n    if (newColor) {\n      setCurrentColor(newColor)\n    }\n  }, [])\n\n  useEffect(() => {\n    setSettings((prev) => {\n      const prevSettings = prev[viewType]!\n      return {\n        ...prev,\n        [viewType]: {\n          ...prevSettings,\n          [settingsKey]: debouncedColor,\n        },\n      }\n    })\n  }, [debouncedColor, setSettings, settingsKey, viewType])\n  return (\n    <Box sx={colorPickerStyle.picker}>\n      <Typography sx={settingsTextStyle.text}>{label}</Typography>\n      <Box sx={getColorPickerInputStyle(color)}>\n        <input type={INPUT_TYPE.color} value={color} onChange={(e) => handleChangeColor(e.target.value)} />\n      </Box>\n    </Box>\n  )\n}\n","import { VoidFunctionComponent, useCallback, useEffect, useState } from 'react'\nimport { Accordion, AccordionDetails, AccordionSummary, Box, Typography } from '@mui/material'\nimport { ExpandMore } from '@mui/icons-material'\n\nimport { CheckedForSelectableDataType } from '../../../../types/data/data'\nimport { SettingsComponentProps } from '../../../../types/views/SettingsComponentProps'\nimport {\n  DataTableSettings,\n  rowHeightKey,\n  selectedBackgroundColorKey,\n  selectedFontColorKey,\n} from '../../../../types/views/settings/DataTableSettings'\n\nimport { getAttributeKeys, getDefaultAllAttributesChecked } from '../../../../helpers/data/data'\n\nimport { ViewType } from '../../../../constants/views-general/ViewType'\nimport { DATA_TABLE_DEFAULT, MIN_DATA_TABLE_ATTRIBUTE_COUNT } from '../../../../constants/views/dataTable'\n\nimport { DATA_TABLE_SETTINGS_TEXT } from '../../../../text/views-and-settings/dataTable'\n\nimport { settingsDrawerItemStyle } from '../../../../components-style/content/data-drawer/settingsDrawerItemStyle'\n\nimport { AttributeChecker } from '../../data-drawer/items/AttributeChecker'\nimport { NumberInput } from '../../data-drawer/items/NumberInput'\nimport { ColorPicker } from '../../data-drawer/items/ColorPicker'\n\nexport const DataTableSettingsComponent: VoidFunctionComponent<SettingsComponentProps> = ({\n  dataset,\n  settings,\n  setSettings,\n}) => {\n  const viewType = ViewType.DataTable\n  const dataTableSettings = settings[viewType]\n  const [attributesKeys, setAttributesKeys] = useState(getAttributeKeys(dataset))\n  const [checked, setChecked] = useState<CheckedForSelectableDataType>(getDefaultAllAttributesChecked(dataset))\n\n  const getCurrentDisplayAttributes = useCallback(\n    (currChecked: CheckedForSelectableDataType) => attributesKeys.filter((key) => currChecked[key]),\n    [attributesKeys],\n  )\n\n  const createDataTableSettings = useCallback(() => {\n    const newChecked = getDefaultAllAttributesChecked(dataset)\n    const newKeys = getAttributeKeys(dataset)\n    setChecked(newChecked)\n    setAttributesKeys(newKeys)\n    setSettings((prev) => {\n      const newDataTableSettings: DataTableSettings = {\n        displayAttributes: newKeys.filter((key) => newChecked[key]),\n        ...DATA_TABLE_DEFAULT,\n      }\n      return { ...prev, [ViewType.DataTable]: newDataTableSettings }\n    })\n  }, [setSettings, dataset])\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(() => createDataTableSettings(), [dataset]) // first time empty, call once\n\n  const getNewSettingsForAttributeChecker = useCallback(\n    (newChecked: CheckedForSelectableDataType): Partial<DataTableSettings> => ({\n      displayAttributes: getCurrentDisplayAttributes(newChecked),\n    }),\n    [getCurrentDisplayAttributes],\n  )\n\n  if (dataTableSettings) {\n    return (\n      <Box sx={settingsDrawerItemStyle.drawerSettings}>\n        <h1>{DATA_TABLE_SETTINGS_TEXT.header}</h1>\n        {attributesKeys.length >= MIN_DATA_TABLE_ATTRIBUTE_COUNT ? (\n          <>\n            <AttributeChecker\n              viewType={viewType}\n              attributesKeys={attributesKeys}\n              getNewSettings={getNewSettingsForAttributeChecker}\n              setSettings={setSettings}\n              label={DATA_TABLE_SETTINGS_TEXT.attributes}\n              checked={checked}\n              setChecked={setChecked}\n              setAttributesKeys={setAttributesKeys}\n            />\n            <Accordion sx={settingsDrawerItemStyle.accordion}>\n              <AccordionSummary expandIcon={<ExpandMore />}>\n                <Typography>{DATA_TABLE_SETTINGS_TEXT.more}</Typography>\n              </AccordionSummary>\n              <AccordionDetails>\n                <NumberInput\n                  viewType={viewType}\n                  value={dataTableSettings.rowHeight}\n                  valueKey={rowHeightKey}\n                  setSettings={setSettings}\n                  label={DATA_TABLE_SETTINGS_TEXT.rowHeight}\n                />\n                <ColorPicker\n                  viewType={viewType}\n                  color={dataTableSettings.selectedBackgroundColor}\n                  settingsKey={selectedBackgroundColorKey}\n                  setSettings={setSettings}\n                  label={DATA_TABLE_SETTINGS_TEXT.selectedBackgroundColor}\n                />\n                <ColorPicker\n                  viewType={viewType}\n                  color={dataTableSettings.selectedFontColor}\n                  settingsKey={selectedFontColorKey}\n                  setSettings={setSettings}\n                  label={DATA_TABLE_SETTINGS_TEXT.selectedFontColor}\n                />\n              </AccordionDetails>\n            </Accordion>\n          </>\n        ) : (\n          <Box sx={settingsDrawerItemStyle.insufficientAttributeNum}>{DATA_TABLE_SETTINGS_TEXT.unavailable}</Box>\n        )}\n      </Box>\n    )\n  }\n  return null\n}\n","import { VisualizationSettings } from './VisualizationSettings'\n\nexport const rowHeightKey = `rowHeight`\nexport const selectedBackgroundColorKey = `selectedBackgroundColor`\nexport const selectedFontColorKey = `selectedFontColor`\n\n/**\n * Settings for Data Table view\n */\nexport interface DataTableSettings extends VisualizationSettings {\n  /**\n   * Height of the table row\n   */\n  [rowHeightKey]: number\n\n  /**\n   * Selected background color\n   */\n  [selectedBackgroundColorKey]: string\n\n  /**\n   * Selected font color\n   */\n  [selectedFontColorKey]: string\n}\n","import { schemeCategory10 } from 'd3'\n\nimport { ColorArray } from '../../types/styling/ColorArray'\nimport { ParallelSetsBundledSettings } from '../../types/views/settings/ParallelSetsBundledSettings'\n\nimport { ParallelSetsBrushingType } from '../brushing-type/ParallelSetsBrushingType'\nimport { DEFAULT_FONT_COLOR_PARALLEL_SETS } from '../views-general/defaultSettableColors'\n\nexport const MIN_PARALLEL_SETS_BUNDLED_ATTRIBUTE_COUNT = 2\n\nexport const PARALLEL_SETS_BUNDLED_DEFAULT: Pick<\n  ParallelSetsBundledSettings,\n  `margins` | `opacity` | `colorCategory` | `tabWidth` | `tabSpacing` | `tabGap` | `brushingType` | `fontColor`\n> = {\n  margins: [5, 50, 10, 50],\n  opacity: [60, 70, 25],\n  colorCategory: schemeCategory10 as ColorArray,\n  tabWidth: 8,\n  tabSpacing: 3,\n  tabGap: 10,\n  brushingType: ParallelSetsBrushingType.top,\n  fontColor: DEFAULT_FONT_COLOR_PARALLEL_SETS,\n}\n","export enum BrushAction {\n  start = `start`,\n  move = `brush`,\n  end = `end`,\n}\n","export enum MouseAction {\n  mouseOver = `mouseover`,\n  mouseOut = `mouseout`,\n  click = `click`,\n}\n","import { ViewType } from '../../constants/views-general/ViewType'\nimport { SETTINGS_TEXT, VIEW_NAMES } from './common'\n\nexport const PARALLEL_SETS_BUNDLED_TEXT = {\n  unavailable: `The parallel sets plot cannot be displayed with a single attribute. To generate a parallel sets plot, select multiple attributes from the settings.`,\n}\n\nexport const PARALLEL_SETS_SETTINGS_TEXT = {\n  header: VIEW_NAMES[ViewType.ParallelSetsBundled],\n  unavailable: `The parallel sets plot cannot be used while data have less than 2 nominal attributes. Try to use different type of visualization that fits your data.`,\n  opacity: `Opacity of connectors`,\n  tabWidth: `Width of the tabs`,\n  tabSpacing: `Spacing between tabs`,\n  tabGap: `Gap between tabs`,\n  brushing: `Brushing...`,\n  fontColor: `Inner font color`,\n  ...SETTINGS_TEXT,\n}\n","import { useCallback, useEffect, useState, VoidFunctionComponent } from 'react'\nimport { Accordion, AccordionDetails, AccordionSummary, Box, Divider, Typography } from '@mui/material'\nimport { ExpandMore } from '@mui/icons-material'\n\nimport { CheckedForSelectableDataType } from '../../../../types/data/data'\nimport { SettingsComponentProps } from '../../../../types/views/SettingsComponentProps'\nimport {\n  ParallelSetsBundledSettings,\n  brushingTypeKey,\n  fontColorKey,\n  tabGapKey,\n  tabSpacingKey,\n  tabWidthKey,\n} from '../../../../types/views/settings/ParallelSetsBundledSettings'\n\nimport { getCategoryAttributesKeys, getDefaultNominalAttributesChecked } from '../../../../helpers/data/data'\n\nimport { ViewType } from '../../../../constants/views-general/ViewType'\nimport {\n  MIN_PARALLEL_SETS_BUNDLED_ATTRIBUTE_COUNT,\n  PARALLEL_SETS_BUNDLED_DEFAULT,\n} from '../../../../constants/views/parallelSetsBundled'\nimport { ParallelSetsBrushingType } from '../../../../constants/brushing-type/ParallelSetsBrushingType'\n\nimport { PARALLEL_SETS_SETTINGS_TEXT } from '../../../../text/views-and-settings/parallelSetsBundled'\n\nimport { settingsDrawerItemStyle } from '../../../../components-style/content/data-drawer/settingsDrawerItemStyle'\nimport { settingsTextStyle } from '../../../../components-style/content/data-drawer/items/settingsTextStyle'\n\nimport { AttributeChecker } from '../../data-drawer/items/AttributeChecker'\nimport { CategorySelector } from '../../data-drawer/items/CategorySelector'\nimport { MarginInput } from '../../data-drawer/items/MarginInput'\nimport { OpacityInput } from '../../data-drawer/items/OpacityInput'\nimport { PalettePicker } from '../../data-drawer/items/PalettePicker'\nimport { NumberInput } from '../../data-drawer/items/NumberInput'\nimport { ToggleButtons } from '../../data-drawer/items/ToggleButtons'\nimport { ColorPicker } from '../../data-drawer/items/ColorPicker'\n\nexport const ParallelSetsBundledSettingsComponent: VoidFunctionComponent<SettingsComponentProps> = ({\n  dataset,\n  settings,\n  setSettings,\n}) => {\n  const viewType = ViewType.ParallelSetsBundled\n  const parallelSetsBundledSettings = settings[viewType]\n\n  const [nominalAttributesKeys, setNominalAttributesKeys] = useState(getCategoryAttributesKeys(dataset))\n  const [checked, setChecked] = useState<CheckedForSelectableDataType>(getDefaultNominalAttributesChecked(dataset))\n\n  const getCurrentDisplayAttributes = useCallback(\n    (currChecked: CheckedForSelectableDataType) => nominalAttributesKeys.filter((key) => currChecked[key]),\n    [nominalAttributesKeys],\n  )\n\n  // first time empty\n  const createParallelSetsBundledSettings = useCallback(() => {\n    const newChecked = getDefaultNominalAttributesChecked(dataset)\n    const newCatKeys = getCategoryAttributesKeys(dataset)\n    setChecked(newChecked)\n    setNominalAttributesKeys(newCatKeys)\n    setSettings((prev) => {\n      const newParallelSetsBundled: ParallelSetsBundledSettings = {\n        displayAttributes: newCatKeys.filter((key) => newChecked[key]),\n        categoryAttribute: newCatKeys[0],\n        ...PARALLEL_SETS_BUNDLED_DEFAULT,\n      }\n      return { ...prev, [ViewType.ParallelSetsBundled]: newParallelSetsBundled }\n    })\n  }, [setSettings, dataset])\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(() => createParallelSetsBundledSettings(), [dataset])\n\n  const getNewSettingsForAttributeChecker = useCallback(\n    (newChecked: CheckedForSelectableDataType) => ({\n      displayAttributes: getCurrentDisplayAttributes(newChecked),\n    }),\n    [getCurrentDisplayAttributes],\n  )\n\n  if (parallelSetsBundledSettings) {\n    return (\n      <Box sx={settingsDrawerItemStyle.drawerSettings}>\n        <h1>{PARALLEL_SETS_SETTINGS_TEXT.header}</h1>\n        {nominalAttributesKeys.length >= MIN_PARALLEL_SETS_BUNDLED_ATTRIBUTE_COUNT ? (\n          <>\n            <AttributeChecker\n              viewType={viewType}\n              attributesKeys={nominalAttributesKeys}\n              getNewSettings={getNewSettingsForAttributeChecker}\n              setSettings={setSettings}\n              label={PARALLEL_SETS_SETTINGS_TEXT.attributes}\n              checked={checked}\n              setChecked={setChecked}\n              setAttributesKeys={setNominalAttributesKeys}\n            />\n            <CategorySelector\n              viewType={viewType}\n              value={parallelSetsBundledSettings.categoryAttribute!}\n              attributesKeys={nominalAttributesKeys}\n              setSettings={setSettings}\n              label={PARALLEL_SETS_SETTINGS_TEXT.category}\n            />\n            <Typography sx={settingsTextStyle.text}>{PARALLEL_SETS_SETTINGS_TEXT.brushing}</Typography>\n            <ToggleButtons\n              viewType={viewType}\n              value={parallelSetsBundledSettings.brushingType}\n              options={Object.values<ParallelSetsBrushingType>(ParallelSetsBrushingType)}\n              setSettings={setSettings}\n              settingsKey={brushingTypeKey}\n            />\n            <Accordion sx={settingsDrawerItemStyle.accordion}>\n              <AccordionSummary expandIcon={<ExpandMore />}>\n                <Typography>{PARALLEL_SETS_SETTINGS_TEXT.more}</Typography>\n              </AccordionSummary>\n              <AccordionDetails>\n                <MarginInput\n                  margins={parallelSetsBundledSettings.margins}\n                  setSettings={setSettings}\n                  viewType={viewType}\n                />\n                <Divider />\n                <NumberInput\n                  viewType={viewType}\n                  label={PARALLEL_SETS_SETTINGS_TEXT.tabWidth}\n                  valueKey={tabWidthKey}\n                  value={parallelSetsBundledSettings.tabWidth}\n                  setSettings={setSettings}\n                />\n                <NumberInput\n                  viewType={viewType}\n                  label={PARALLEL_SETS_SETTINGS_TEXT.tabSpacing}\n                  valueKey={tabSpacingKey}\n                  value={parallelSetsBundledSettings.tabSpacing}\n                  setSettings={setSettings}\n                />\n                <NumberInput\n                  viewType={viewType}\n                  label={PARALLEL_SETS_SETTINGS_TEXT.tabGap}\n                  valueKey={tabGapKey}\n                  value={parallelSetsBundledSettings.tabGap}\n                  setSettings={setSettings}\n                />\n                <Divider />\n                <ColorPicker\n                  viewType={viewType}\n                  color={parallelSetsBundledSettings.fontColor}\n                  settingsKey={fontColorKey}\n                  setSettings={setSettings}\n                  label={PARALLEL_SETS_SETTINGS_TEXT.fontColor}\n                />\n                <Divider />\n                <OpacityInput\n                  header={PARALLEL_SETS_SETTINGS_TEXT.opacity}\n                  opacities={parallelSetsBundledSettings.opacity}\n                  setSettings={setSettings}\n                  viewType={viewType}\n                />\n                <Divider />\n                <PalettePicker\n                  colors={parallelSetsBundledSettings.colorCategory}\n                  setSettings={setSettings}\n                  viewType={viewType}\n                />\n              </AccordionDetails>\n            </Accordion>\n          </>\n        ) : (\n          <Box sx={settingsDrawerItemStyle.insufficientAttributeNum}>{PARALLEL_SETS_SETTINGS_TEXT.unavailable}</Box>\n        )}\n      </Box>\n    )\n  }\n  return null\n}\n","import { ParallelSetsBrushingType } from '../../../constants/brushing-type/ParallelSetsBrushingType'\n\nimport { ViewVisualizationSettings } from './VisualizationSettings'\n\nexport const tabWidthKey = `tabWidth`\nexport const tabSpacingKey = `tabSpacing`\nexport const tabGapKey = `tabGap`\nexport const brushingTypeKey = `brushingType`\nexport const fontColorKey = `fontColor`\n\n/**\n * Settings for Parallel Sets Bundled view\n */\nexport interface ParallelSetsBundledSettings extends ViewVisualizationSettings {\n  /**\n   * Brushing - displayed from top top or overlay\n   */\n  [brushingTypeKey]: ParallelSetsBrushingType\n\n  /**\n   * Width of a tab\n   */\n  [tabWidthKey]: number\n\n  /**\n   * Spacing of tabs\n   */\n  [tabSpacingKey]: number\n\n  /**\n   * Gap between tabs (vertically)\n   */\n  [tabGapKey]: number\n\n  /**\n   * Font color\n   */\n  [fontColorKey]: string\n}\n","import { Dispatch, VoidFunctionComponent, SetStateAction, useMemo } from 'react'\nimport { Box, Divider, Drawer, Button, Link, Tooltip, Typography } from '@mui/material'\nimport { ChevronRight, GitHub } from '@mui/icons-material'\n\nimport { SelectableDataType } from '../../../types/data/data'\nimport { Settings } from '../../../types/views/settings/Settings'\n\nimport { ViewType } from '../../../constants/views-general/ViewType'\nimport { ANCHOR, DRAWER_VARIANT } from '../../../constants/mui'\n\nimport { SETTINGS_DRAWER_TEXT, GITHUB_LINK } from '../../../text/settingsDrawerText'\n\nimport { settingsDrawerStyle } from '../../../components-style/content/data-drawer/settingsDrawerStyle'\n\nimport { ParallelCoordinatesSettingsComponent } from '../views/parallel-coordinates/ParallelCoordinatesSettingsComponent'\nimport { ScatterPlotMatrixSettingsComponent } from '../views/scatter-plot-matrix/ScatterPlotMatrixSettingsComponent'\nimport { GlyphsSettingsComponent } from '../views/glyphs/GlyphsSettingsComponent'\nimport { ScatterPlotGlyphsSettingsComponent } from '../views/scatter-plot-glyphs/ScatterPlotGlyphsSettingsComponent'\nimport { DataTableSettingsComponent } from '../views/data-table/DataTableSettingsComponent'\nimport { ParallelSetsBundledSettingsComponent } from '../views/parallel-sets-bundeled/ParallelSetsBundledSettingsComponent'\n\nexport interface SettingsDrawerProps {\n  isOpen: boolean\n  close: () => void\n  dataset: ReadonlyArray<SelectableDataType>\n  views: ViewType[]\n  settings: Settings\n  setSettings: Dispatch<SetStateAction<Settings>>\n  cleanSelectedIfViewWasBrushing: (viewType: ViewType) => void\n}\n\nexport const SettingsDrawer: VoidFunctionComponent<SettingsDrawerProps> = ({\n  isOpen,\n  close,\n  dataset,\n  views,\n  settings,\n  setSettings,\n  cleanSelectedIfViewWasBrushing,\n}) => {\n  const settingsComponents = useMemo(\n    () =>\n      views.map((view, idx) => {\n        switch (view) {\n          case ViewType.Glyphs:\n            return (\n              <GlyphsSettingsComponent\n                dataset={dataset}\n                settings={settings}\n                setSettings={setSettings}\n                cleanSelectedIfViewWasBrushing={cleanSelectedIfViewWasBrushing}\n                key={idx}\n              />\n            )\n          case ViewType.ParallelCoordinates:\n            return (\n              <ParallelCoordinatesSettingsComponent\n                dataset={dataset}\n                settings={settings!}\n                setSettings={setSettings}\n                cleanSelectedIfViewWasBrushing={cleanSelectedIfViewWasBrushing}\n                key={idx}\n              />\n            )\n          case ViewType.ScatterPlotMatrix:\n            return (\n              <ScatterPlotMatrixSettingsComponent\n                dataset={dataset}\n                settings={settings!}\n                setSettings={setSettings}\n                cleanSelectedIfViewWasBrushing={cleanSelectedIfViewWasBrushing}\n                key={idx}\n              />\n            )\n          case ViewType.ScatterPlotGlyphs:\n            return (\n              <ScatterPlotGlyphsSettingsComponent\n                dataset={dataset}\n                settings={settings}\n                setSettings={setSettings}\n                cleanSelectedIfViewWasBrushing={cleanSelectedIfViewWasBrushing}\n                key={idx}\n              />\n            )\n          case ViewType.DataTable:\n            return (\n              <DataTableSettingsComponent\n                dataset={dataset}\n                settings={settings}\n                setSettings={setSettings}\n                cleanSelectedIfViewWasBrushing={cleanSelectedIfViewWasBrushing}\n                key={idx}\n              />\n            )\n          case ViewType.ParallelSetsBundled:\n            return (\n              <ParallelSetsBundledSettingsComponent\n                dataset={dataset}\n                settings={settings}\n                setSettings={setSettings}\n                cleanSelectedIfViewWasBrushing={cleanSelectedIfViewWasBrushing}\n                key={idx}\n              />\n            )\n          default:\n            return null\n        }\n      }),\n    [cleanSelectedIfViewWasBrushing, dataset, setSettings, settings, views],\n  )\n  return (\n    <Drawer variant={DRAWER_VARIANT.persistent} anchor={ANCHOR.right} open={isOpen} sx={settingsDrawerStyle.drawer}>\n      <Box sx={settingsDrawerStyle.header}>\n        <Button onClick={close} sx={settingsDrawerStyle.button}>\n          <Tooltip title={SETTINGS_DRAWER_TEXT.hide}>\n            <ChevronRight sx={settingsDrawerStyle.chevron} />\n          </Tooltip>\n        </Button>\n      </Box>\n      <Divider />\n      <Box sx={settingsDrawerStyle.setting}>{settingsComponents}</Box>\n      <Box sx={settingsDrawerStyle.fill} />\n      <Box sx={settingsDrawerStyle.footer}>\n        <Typography sx={settingsDrawerStyle.text}>{SETTINGS_DRAWER_TEXT.description}</Typography>\n        <Typography sx={settingsDrawerStyle.text}>{SETTINGS_DRAWER_TEXT.openSource}</Typography>\n        <Link href={GITHUB_LINK} sx={settingsDrawerStyle.text}>\n          <GitHub sx={settingsDrawerStyle.githubIcon} />\n          {SETTINGS_DRAWER_TEXT.github}\n        </Link>\n      </Box>\n    </Drawer>\n  )\n}\n","import { ViewType } from './views-general/ViewType'\n\nexport const PUBLIC_PATH = `/tabular-data-visualization/`\n\nexport const PUBLIC_IMAGE_PATH = PUBLIC_PATH + `images/`\n\nexport const LAYOUT_IMAGES = [`layout_0.png`, `layout_1.png`, `layout_2.png`, `layout_3.png`, `layout_4.png`].map(\n  (imgName) => PUBLIC_IMAGE_PATH + imgName,\n)\n\nexport const BRUSHING_IMAGES = Object.fromEntries(\n  [\n    [ViewType.ParallelCoordinates, `brushing_pc.png`],\n    [ViewType.ScatterPlotMatrix, `brushing_spm.png`],\n    [ViewType.Glyphs, `brushing_g.png`],\n    [ViewType.ScatterPlotGlyphs, `brushing_spg.png`],\n    [ViewType.DataTable, `brushing_dt.png`],\n    [ViewType.ParallelSetsBundled, `brushing_psb.png`],\n  ].map(([view, address]) => [view, PUBLIC_IMAGE_PATH + address]),\n)\n","import { Dispatch, SetStateAction, VoidFunctionComponent } from 'react'\nimport { Card, CardContent, CardMedia, Dialog, DialogContent, DialogTitle, Divider, Typography } from '@mui/material'\n\nimport { GridLayoutItem } from '../../../../../types/views/Grid'\n\nimport { otherCasesToWhitespaces } from '../../../../../helpers/data/formatText'\n\nimport { LAYOUT_OPTIONS } from '../../../../../constants/layout/layout'\nimport { LAYOUT_IMAGES } from '../../../../../constants/public-path'\nimport { COMPONENT_TYPE } from '../../../../../constants/mui'\n\nimport { LAYOUT_DIALOG_TEXT } from '../../../../../text/siteText'\n\nimport { dialogStyle } from '../../../../../components-style/content/common/dialogStyle'\n\nexport interface LayoutDialogProps {\n  isOpen: boolean\n  setLayout: Dispatch<SetStateAction<GridLayoutItem[] | null>>\n  onClose: () => void\n  lastLayout: GridLayoutItem[] | null\n}\n\nexport const LayoutDialog: VoidFunctionComponent<LayoutDialogProps> = ({ isOpen, onClose, setLayout, lastLayout }) => {\n  const handleClose = () => {\n    setLayout(lastLayout)\n    onClose()\n  }\n  return (\n    <Dialog onClose={handleClose} open={isOpen}>\n      <DialogTitle>{LAYOUT_DIALOG_TEXT.title}</DialogTitle>\n      <Divider />\n      <DialogContent>\n        {LAYOUT_OPTIONS.map((layoutItems, idx) => (\n          <Card\n            key={idx}\n            onClick={() => {\n              setLayout(layoutItems)\n              onClose()\n            }}\n            sx={dialogStyle.card}\n          >\n            <CardContent sx={dialogStyle.cardContent}>\n              {layoutItems.map((item) => (\n                <Typography sx={dialogStyle.itemText} key={item.i}>\n                  {otherCasesToWhitespaces(item.i)}\n                </Typography>\n              ))}\n            </CardContent>\n            <CardMedia\n              component={COMPONENT_TYPE.image}\n              sx={dialogStyle.image}\n              image={LAYOUT_IMAGES[idx]}\n              alt={LAYOUT_DIALOG_TEXT.alt + idx}\n            />\n          </Card>\n        ))}\n      </DialogContent>\n    </Dialog>\n  )\n}\n","import { SxProps } from '@mui/system'\n\nimport { px } from '../../../helpers/stringGetters'\n\nimport { GRID_HEADER_HEIGHT } from '../../../constants/layout/layout'\n\nimport { VIEW_COLORS } from '../../../styles/colors'\n\nexport const gridItemStyle: Record<string, SxProps> = {\n  gridItem: {\n    height: `100%`,\n    bgcolor: VIEW_COLORS.itemBackground,\n    borderColor: VIEW_COLORS.border,\n    borderWidth: 1,\n    borderStyle: `solid`,\n  },\n  right: {\n    display: `flex`,\n    flexWrap: `nowrap`,\n    paddingLeft: px(5),\n  },\n  textBox: {\n    padding: px(0, 8),\n    display: `flex`,\n    whiteSpace: `nowrap`,\n    overflow: `hidden`,\n    textOverflow: `ellipsis`,\n  },\n  text: {\n    padding: px(0, 5),\n    display: `flex`,\n    alignItems: `center`,\n    justifyContent: `center`,\n    fontSize: px(12),\n  },\n  textIcon: {\n    fontSize: px(14),\n    padding: px(4),\n  },\n  header: {\n    height: GRID_HEADER_HEIGHT - 2,\n    display: `flex`,\n    alignItems: `center`,\n    justifyContent: `space-between`,\n    cursor: `all-scroll`,\n    bgcolor: VIEW_COLORS.itemBackground,\n    borderColor: VIEW_COLORS.border,\n    borderBottomWidth: 1,\n    borderBottomStyle: `solid`,\n    padding: 0,\n  },\n}\n","import { px } from '../../helpers/stringGetters'\n\n/**\n * Class for defining margin for the view.\n * Important especially for the user to be able to reveal axis labels, but also for aesthetic reasons.\n */\nexport class Margin {\n  readonly width: number\n  readonly height: number\n  readonly toString: string\n  constructor(readonly top: number, readonly right: number, readonly bottom: number, readonly left: number) {\n    this.width = this.right + this.left\n    this.height = this.top + this.bottom\n    this.toString = px(this.top, this.right, this.bottom, this.left)\n  }\n}\n\n/**\n * Array of margins - top, right, bottom, left\n */\nexport type MarginArray = [number, number, number, number]\n","import { Extent } from '../../types/d3-types'\n\nexport const isInRange = (number: number, range: [number, number]): boolean => number > range[0] && number < range[1]\n\nexport const isInRanges = (ranges: Extent, cx: number, cy: number): boolean => {\n  const [x0, x1, y0, y1] = [ranges[0][0], ranges[1][0], ranges[0][1], ranges[1][1]]\n  return x0 <= cx && cx <= x1 && y0 <= cy && cy <= y1\n}\n","import { extent } from 'd3'\n\nimport { ExtentReqForSelectableDataType, SelectableDataType } from '../../types/data/data'\n\nexport const getExtentInDomains = (\n  domains: Array<keyof SelectableDataType>,\n  dataset: ReadonlyArray<SelectableDataType>,\n): ExtentReqForSelectableDataType =>\n  Object.fromEntries(\n    domains.map((key) => {\n      const calculatedExtent = extent(dataset, (d) => Number(d[key]))\n      if (calculatedExtent[0] === undefined) throw new Error(`Invalid prop to create extent from`)\n      return [key, calculatedExtent]\n    }),\n  )\n\nexport const getExtendedExtentInDomains = (\n  domains: Array<keyof SelectableDataType>,\n  dataset: ReadonlyArray<SelectableDataType>,\n  percentDown: number,\n  percentUp = 0,\n): ExtentReqForSelectableDataType =>\n  Object.fromEntries(\n    domains.map((key) => {\n      const calculatedExtent = extent(dataset, (d) => Number(d[key]))\n      if (calculatedExtent[0] === undefined) throw new Error(`Invalid prop to create extent from`)\n      const extentSize = calculatedExtent[1] - calculatedExtent[0]\n      const p = [-(percentDown / 100) * extentSize, (percentUp / 100) * extentSize]\n      const finalExtent: [number, number] = [calculatedExtent[0] + p[0], calculatedExtent[1] + p[1]]\n      return [key, finalExtent]\n    }),\n  )\n","import { DataEach } from '../../types/d3-types'\n\n/**\n * y shift for parallel coordinates/sets axes labels\n */\nconst TEXT_Y_SHIFTS = { odd: 9, even: 19 }\n\nexport const TOGGLE_Y_SHIFT = Math.max(...Object.values(TEXT_Y_SHIFTS))\n\nexport const getTogglingYShift: DataEach<unknown, SVGTextElement, number> = (_, idx) =>\n  idx % 2 === 0 ? -TEXT_Y_SHIFTS.odd : -TEXT_Y_SHIFTS.even // index 0 is first, so odd\n","import { ScaleOrdinal } from 'd3'\n\nimport { SelectableDataType } from '../../types/data/data'\n\nexport type GetCategoryColor = (data: SelectableDataType) => string\n\nconst SINGLE = `1` // on constant only one (first) color is used\n\nexport const getCategoryColor =\n  (categoryAttribute: keyof SelectableDataType | undefined, color: ScaleOrdinal<string, string>): GetCategoryColor =>\n  (data) =>\n    categoryAttribute ? color(String(data[categoryAttribute])) : color(SINGLE)\n","/**\n * tooltip and it's actions\n */\nimport { select } from 'd3'\nimport { MouseEvent } from 'react'\nimport { OnMouseEvent } from '../../types/d3-types'\n\nimport { TOOLTIP, TOOLTIP_CLASS } from '../../constants/views-general/tooltip'\nimport { SVG } from '../../constants/svg'\nimport { HTML } from '../../constants/others'\n\nimport { getClass, px } from '../stringGetters'\n\nexport const onMouseOverTooltip =\n  <T>(stringFunction: (data: T) => string[]): OnMouseEvent<T> =>\n  ({ clientX, clientY }: MouseEvent, data: T): void => {\n    const tooltip = select(getClass(TOOLTIP_CLASS))\n    tooltip.transition().duration(TOOLTIP.easeIn).style(SVG.style.opacity, TOOLTIP.visible)\n    tooltip\n      .html(stringFunction(data).join(HTML.newLine))\n      .style(SVG.style.left, px(clientX))\n      .style(SVG.style.top, px(clientY))\n  }\n\nexport const onMouseOutTooltip = (): null => {\n  select(getClass(TOOLTIP_CLASS)).transition().duration(TOOLTIP.easeOut).style(SVG.style.opacity, TOOLTIP.invisible)\n  return null\n}\n","import { ViewType } from '../views-general/ViewType'\n\nexport const SAVE_ID: Record<ViewType, string> = {\n  [ViewType.ParallelCoordinates]: `pcSvgId`,\n  [ViewType.ScatterPlotMatrix]: `spmSvgId`,\n  [ViewType.Glyphs]: `glyphSvgId`,\n  [ViewType.ScatterPlotGlyphs]: `spgSvgId`,\n  [ViewType.ParallelSetsBundled]: `psbSvgId`,\n  [ViewType.DataTable]: `dataTableId`,\n}\n\nexport const CONTAINER_SAVE_ID: Record<ViewType, string> = {\n  [ViewType.ParallelCoordinates]: `C_pcSvgId`,\n  [ViewType.ScatterPlotMatrix]: `C_spmSvgId`,\n  [ViewType.Glyphs]: `C_glyphSvgId`,\n  [ViewType.ScatterPlotGlyphs]: `C_spgSvgId`,\n  [ViewType.ParallelSetsBundled]: `C_psbSvgId`,\n  [ViewType.DataTable]: `C_dataTableId`,\n}\n\nexport const CONTAINER_EMPTY: Record<ViewType, string> = {\n  [ViewType.ParallelCoordinates]: `C_E_pcSvgId`,\n  [ViewType.ScatterPlotMatrix]: `C_E_spmSvgId`,\n  [ViewType.Glyphs]: `C_E_glyphSvgId`,\n  [ViewType.ScatterPlotGlyphs]: `C_E_spgSvgId`,\n  [ViewType.ParallelSetsBundled]: `C_E_psbSvgId`,\n  [ViewType.DataTable]: `C_E_dataTableId`,\n}\n","import { SxProps } from '@mui/system'\n\nimport { Opacity } from '../../../../types/styling/Opacity'\n\nimport { important } from '../../../../helpers/stringGetters'\n\nimport { PLOT_COLORS } from '../../../../styles/colors'\nimport { PLOT_FONT } from '../../../../styles/font'\n\nexport const PARALLEL_COORDINATES_CLASS = `parallelCoordinates`\nexport const SELECTED_CLASS = `parallelCoordinatesSelected`\nexport const AXES_TEXT_CLASS = `parallelCoordinatesAxesText`\n\nexport const getParallelCoordinatesStyle = (opacity: Opacity, isBrushActive: boolean, brushColor: string): SxProps => ({\n  '& svg': {\n    bgcolor: PLOT_COLORS.backgroundColor,\n    font: `12px sans-serif`,\n  },\n  '& path': {\n    fill: `none`,\n    opacity: !isBrushActive ? opacity[0] / 100 : opacity[2] / 100,\n    '&.parallelCoordinatesSelected': {\n      opacity: opacity[1] / 100,\n      stroke: important(brushColor),\n    },\n  },\n  '& .parallelCoordinatesAxesText': {\n    textAnchor: `middle`,\n    fontWeight: `bold`,\n    fill: PLOT_COLORS.fontColor,\n    fontSize: PLOT_FONT.fontSize,\n  },\n})\n","import { SxProps } from '@mui/system'\n\nimport { Margin } from '../../../types/styling/Margin'\n\nexport const getViewsNotDisplayStyle = (width: number, height: number, margin: Margin): SxProps => ({\n  width: width - margin.width,\n  height: height - margin.height,\n  padding: margin.toString,\n})\n","import { VoidFunctionComponent, useCallback, useEffect, useMemo, useRef } from 'react'\nimport { Box } from '@mui/material'\nimport { axisLeft, brushY, line, scaleLinear, scaleOrdinal, scalePoint, select, selectAll } from 'd3'\n\nimport { SelectableDataType } from '../../../../types/data/data'\nimport { Brushable } from '../../../../types/brushing/Brushable'\nimport { BrushSelection1d } from '../../../../types/brushing/BrushSelection'\nimport { VisualizationView } from '../../../../types/views/VisualizationView'\nimport { ParallelCoordinatesSettings } from '../../../../types/views/settings/ParallelCoordinatesSettings'\nimport { Margin } from '../../../../types/styling/Margin'\nimport { Extent, DataEachG, DataEachP, OnBrushEvent } from '../../../../types/d3-types'\n\nimport { isInRange } from '../../../../helpers/basic/range'\nimport { getExtentInDomains } from '../../../../helpers/d3/extent'\nimport { getDefaultSelectionForAttributes } from '../../../../helpers/data/data'\nimport { getTogglingYShift, TOGGLE_Y_SHIFT } from '../../../../helpers/views/togglingYShift'\nimport { getCategoryColor } from '../../../../helpers/d3/categoryColor'\nimport {\n  getAttributeFormatted,\n  getAttributeValuesWithLabel,\n  getClass,\n  getEverything,\n  getTranslate,\n} from '../../../../helpers/stringGetters'\nimport { onMouseOutTooltip, onMouseOverTooltip } from '../../../../helpers/d3/tooltip'\n\nimport { BrushAction } from '../../../../constants/actions/BrushAction'\nimport { ViewType } from '../../../../constants/views-general/ViewType'\nimport { SVG } from '../../../../constants/svg'\nimport { MIN_PARALLEL_COORDINATES_ATTRIBUTE_COUNT } from '../../../../constants/views/parallelCoordinates'\nimport { MouseAction } from '../../../../constants/actions/MouseAction'\nimport { CONTAINER_EMPTY, CONTAINER_SAVE_ID, SAVE_ID } from '../../../../constants/save/save'\n\nimport { PARALLEL_COORDINATES_TEXT } from '../../../../text/views-and-settings/parallelCoordinates'\n\nimport { PLOT_FONT_BOX_SIZE } from '../../../../styles/font'\n\nimport {\n  AXES_TEXT_CLASS,\n  getParallelCoordinatesStyle,\n  PARALLEL_COORDINATES_CLASS,\n  SELECTED_CLASS,\n} from '../../../../components-style/content/views/parallel-coordinates/parallelCoordinatesStyle'\nimport { getViewsNotDisplayStyle } from '../../../../components-style/content/views/getViewsNotDisplayStyle'\n\nconst BRUSH_WIDTH = 30\nconst BRUSH_RADIUS = BRUSH_WIDTH / 2\nconst BRUSH_OVERLAP = 5\n\nconst AXES = `AXES`\nexport const PARALLEL_COORDINATES = `PARALLEL_COORDINATES`\n\nexport interface ParallelCoordinatesProps extends VisualizationView, Brushable, ParallelCoordinatesSettings {}\n\nexport const ParallelCoordinates: VoidFunctionComponent<ParallelCoordinatesProps> = ({\n  width,\n  height,\n  dataset,\n  displayAttributes,\n  categoryAttribute,\n  refreshViews,\n  registerCleanBrushing,\n  setComponentBrushing,\n  isBrushingActive,\n  isBrushingOnEndOfMove,\n  colorCategory,\n  lineWidth,\n  margins,\n  opacity,\n  brushColor,\n}) => {\n  const margin = useMemo(() => new Margin(...margins), [margins])\n  const component = useRef<SVGGElement>(null)\n  const color = scaleOrdinal(colorCategory)\n  const upperPadding = TOGGLE_Y_SHIFT + PLOT_FONT_BOX_SIZE\n  const [innerWidth, innerHeight] = [width - margin.width, height - margin.height - upperPadding]\n\n  // selected coloring\n  selectAll(getClass(PARALLEL_COORDINATES_CLASS)).classed(SELECTED_CLASS, (d) => (d as SelectableDataType).selected)\n\n  const createParallelCoordinates = useCallback(() => {\n    const node = component.current\n    if (!node) return\n    const svg = select(node)\n    svg.selectAll(getEverything()).remove() // clear\n\n    const extentInDomains = getExtentInDomains(displayAttributes, dataset)\n    const xScale = scalePoint([0, innerWidth]).domain(displayAttributes.map((attribute) => String(attribute)))\n    const yScales = displayAttributes.map((attribute) =>\n      scaleLinear([innerHeight, 0]).domain(extentInDomains[attribute]),\n    )\n\n    const selections = getDefaultSelectionForAttributes(displayAttributes)\n\n    const setBrushingSelection = () => {\n      if (displayAttributes.every((dimension) => selections[dimension] === null)) {\n        // check selections, if there is none in every line, false\n        dataset.forEach((data) => (data.selected = false))\n        refreshViews()\n        return\n      }\n      dataset.forEach((data) => {\n        data.selected = displayAttributes.every((dimension, idx) => {\n          const selectedRange = selections[dimension]\n          if (selectedRange === null) return true // nothing in dimension selected, do not block\n          const valueOnAxis = yScales[idx](Number(data[dimension]))\n          return isInRange(valueOnAxis, selectedRange)\n        })\n      })\n      refreshViews()\n    }\n\n    const cleanBrushingSelection = () => {\n      displayAttributes.forEach((key) => (selections[key] = null))\n      setComponentBrushing(null)\n    }\n\n    const onBrush: Record<BrushAction, OnBrushEvent<SelectableDataType, keyof SelectableDataType>> = {\n      [BrushAction.start]: () => setComponentBrushing(ViewType.ParallelCoordinates),\n      [BrushAction.move]: (brushEvent, axisName) => {\n        if (!isBrushingOnEndOfMove) {\n          selections[axisName] = brushEvent.selection as BrushSelection1d\n          setBrushingSelection()\n        }\n      },\n      [BrushAction.end]: (brushEvent, axisName) => {\n        selections[axisName] = brushEvent.selection as BrushSelection1d\n        if (displayAttributes.some((key) => selections[key] !== null)) {\n          return setBrushingSelection()\n        }\n        return cleanBrushingSelection() // nothing is selected\n      },\n    }\n    const brushExtent: Extent = [\n      [-BRUSH_RADIUS, -BRUSH_OVERLAP],\n      [BRUSH_RADIUS, innerHeight + BRUSH_OVERLAP],\n    ]\n\n    const brush = brushY<keyof SelectableDataType>()\n      .on(BrushAction.start, onBrush[BrushAction.start])\n      .on(BrushAction.move, onBrush[BrushAction.move])\n      .on(BrushAction.end, onBrush[BrushAction.end])\n      .extent(brushExtent)\n\n    const addAxes: DataEachG<keyof SelectableDataType> = (attribute, idx, elements) =>\n      select(elements[idx]).call(axisLeft(yScales[idx]))\n\n    const getDataLinePath: DataEachP<SelectableDataType, string | null> = (data) =>\n      line()(\n        displayAttributes.map((attribute, idx) => [xScale(String(attribute))!, yScales[idx](Number(data[attribute]))]),\n      )\n\n    // plot data\n    svg\n      .selectAll(PARALLEL_COORDINATES)\n      .data(dataset)\n      .enter()\n      .append(SVG.elements.path)\n      .attr(SVG.attributes.d, getDataLinePath)\n      .attr(SVG.attributes.class, PARALLEL_COORDINATES_CLASS)\n      .attr(SVG.attributes.strokeWidth, lineWidth)\n\n      .on(MouseAction.mouseOver, onMouseOverTooltip(getAttributeValuesWithLabel))\n      .on(MouseAction.mouseOut, onMouseOutTooltip)\n      .style(SVG.style.stroke, getCategoryColor(categoryAttribute, color))\n\n    const getAxisTransform: DataEachG<keyof SelectableDataType, string> = (attribute) =>\n      getTranslate([xScale(String(attribute))!, 0])\n\n    // plot axes, add brush\n    const brushableAxes = svg\n      .selectAll(AXES)\n      .data(displayAttributes)\n      .enter()\n      .append(SVG.elements.g)\n      .attr(SVG.attributes.transform, getAxisTransform)\n      .each(addAxes)\n      .call(brush)\n\n    // add text to axes\n    brushableAxes\n      .append(SVG.elements.text)\n      .attr(SVG.attributes.y, getTogglingYShift)\n      .text(getAttributeFormatted)\n      .attr(SVG.attributes.class, AXES_TEXT_CLASS)\n\n    registerCleanBrushing(() => {\n      brushableAxes.each((attribute, idx, elements) => {\n        const axis = select(elements[idx])\n        brushY().clear(axis)\n      })\n      Object.keys(selections).forEach((selLKey) => (selections[selLKey] = null))\n    })\n\n    // selected coloring\n    selectAll(getClass(PARALLEL_COORDINATES_CLASS)).classed(SELECTED_CLASS, (d) => (d as SelectableDataType).selected)\n  }, [\n    dataset,\n    innerWidth,\n    innerHeight,\n    refreshViews,\n    setComponentBrushing,\n    categoryAttribute,\n    displayAttributes,\n    registerCleanBrushing,\n    isBrushingOnEndOfMove,\n    lineWidth,\n    color,\n  ])\n\n  useEffect(\n    () => createParallelCoordinates(),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [displayAttributes, categoryAttribute, innerWidth, innerHeight, lineWidth, isBrushingOnEndOfMove, colorCategory],\n  )\n\n  if (innerWidth < 0 || innerHeight < 0) return <Box />\n  if (displayAttributes.length >= MIN_PARALLEL_COORDINATES_ATTRIBUTE_COUNT) {\n    return (\n      <Box\n        sx={getParallelCoordinatesStyle(opacity, isBrushingActive, brushColor)}\n        id={CONTAINER_SAVE_ID[ViewType.ParallelCoordinates]}\n      >\n        <svg width={width} height={height} id={SAVE_ID[ViewType.ParallelCoordinates]}>\n          <g\n            ref={component}\n            width={innerWidth}\n            height={innerHeight}\n            transform={getTranslate([margin.left, margin.top + upperPadding])}\n          />\n        </svg>\n      </Box>\n    )\n  }\n  return (\n    <Box sx={getViewsNotDisplayStyle(width, height, margin)} id={CONTAINER_EMPTY[ViewType.ParallelCoordinates]}>\n      {PARALLEL_COORDINATES_TEXT.unavailable}\n    </Box>\n  )\n}\n","import { SelectableDataType } from '../../types/data/data'\nimport { MatrixItem } from '../../types/data/MatrixData'\nimport { Dimensions } from '../../types/basic/dimensions'\n\nimport { getTranslate } from '../stringGetters'\n\nexport const getMatrix = (keys: Array<keyof SelectableDataType>): MatrixItem[] =>\n  keys.map((rowKey, rowIdx) => keys.map((colKey, colIdx) => ({ rowIdx, colIdx, rowKey, colKey }))).flat()\n\nexport const getCellInnerSize = (length: number, spacing: number): number => length - 2 * spacing\n\nexport const getCellTranslateInMatrix =\n  (rect: Dimensions, maxIdx: number): ((matrixItem: MatrixItem) => string) =>\n  ({ rowIdx, colIdx }) =>\n    getTranslate([(maxIdx - rowIdx) * rect.width, colIdx * rect.height])\n","import { SxProps } from '@mui/system'\n\nimport { Opacity } from '../../../../types/styling/Opacity'\n\nimport { important } from '../../../../helpers/stringGetters'\n\nimport { PLOT_COLORS } from '../../../../styles/colors'\nimport { PLOT_FONT } from '../../../../styles/font'\n\nexport const DATA_POINT_CLASS = `scatterPlotMatrixPoint`\nexport const DUPLICATES_CLASS = `scatterPlotMatrixDuplicates`\nexport const AXIS_CLASS = `scatterPlotMatrixAxis`\nexport const RECT_CLASS = `scatterPlotMatrixRect`\nexport const CELL_CLASS = `scatterPlotMatrixCell`\nexport const SELECTED_CLASS = `scatterPlotMatrixSelected`\n\nexport const getScatterPlotMatrixStyle = (\n  opacity: Opacity,\n  isBrushingActive: boolean,\n  brushColor: string,\n): SxProps => ({\n  '& svg': {\n    fontSize: PLOT_FONT.fontSize,\n    bgcolor: PLOT_COLORS.backgroundColor,\n    font: `12px sans-serif`,\n  },\n  '& .scatterPlotMatrixAxis': {\n    shapeRendering: `crispEdges`,\n    '& line': {\n      stroke: PLOT_COLORS.axisLines,\n    },\n    '& path': {\n      display: `none`,\n    },\n  },\n  '& .scatterPlotMatrixRect': {\n    shapeRendering: `crispEdges`,\n    fill: `none`,\n    stroke: PLOT_COLORS.dataBox,\n  },\n  '& .scatterPlotMatrixCell': {\n    '& text': {\n      fontWeight: `bold`,\n      fill: `black`,\n    },\n  },\n  '& .scatterPlotMatrixPoint': {\n    fillOpacity: !isBrushingActive ? opacity[0] / 100 : opacity[2] / 100,\n    '&.scatterPlotMatrixSelected': {\n      fill: important(brushColor),\n      fillOpacity: opacity[1] / 100,\n    },\n  },\n  '& .scatterPlotMatrixDuplicates': {\n    opacity: 0,\n  },\n})\n","import { VoidFunctionComponent, useCallback, useEffect, useMemo, useRef } from 'react'\nimport {\n  Axis,\n  axisBottom,\n  axisLeft,\n  brush,\n  NumberValue,\n  ScaleLinear,\n  scaleLinear,\n  scaleOrdinal,\n  select,\n  selectAll,\n} from 'd3'\nimport { Box } from '@mui/material'\n\nimport { SelectableDataType } from '../../../../types/data/data'\nimport { VisualizationView } from '../../../../types/views/VisualizationView'\nimport { Brushable } from '../../../../types/brushing/Brushable'\nimport { ScatterPlotMatrixSettings } from '../../../../types/views/settings/ScatterPlotMatrixSettings'\nimport { Margin } from '../../../../types/styling/Margin'\nimport { Dimensions } from '../../../../types/basic/dimensions'\nimport { MatrixItem, MatrixPosition } from '../../../../types/data/MatrixData'\nimport { BrushSelection2d } from '../../../../types/brushing/BrushSelection'\nimport { Extent, DataEachC, DataEachG, OnBrushEvent } from '../../../../types/d3-types'\n\nimport {\n  getAttributeFromMatrixFormatted,\n  getAttributeValuesWithLabel,\n  getClass,\n  getEverything,\n  getTranslate,\n} from '../../../../helpers/stringGetters'\nimport { getExtentInDomains } from '../../../../helpers/d3/extent'\nimport { getCellInnerSize, getCellTranslateInMatrix, getMatrix } from '../../../../helpers/views/matrix'\nimport { isInRanges } from '../../../../helpers/basic/range'\nimport { getCategoryColor } from '../../../../helpers/d3/categoryColor'\nimport { setDisplay } from '../../../../helpers/d3/setDisplay'\nimport { onMouseOutTooltip, onMouseOverTooltip } from '../../../../helpers/d3/tooltip'\n\nimport { BrushAction } from '../../../../constants/actions/BrushAction'\nimport { ViewType } from '../../../../constants/views-general/ViewType'\nimport { SVG } from '../../../../constants/svg'\nimport { MIN_SCATTER_PLOT_MATRIX_ATTRIBUTE_COUNT } from '../../../../constants/views/scatterPlotMatrix'\nimport { MouseAction } from '../../../../constants/actions/MouseAction'\nimport { CONTAINER_EMPTY, CONTAINER_SAVE_ID, SAVE_ID } from '../../../../constants/save/save'\n\nimport { SCATTER_PLOT_MATRIX_TEXT } from '../../../../text/views-and-settings/scatterPlotMatrix'\n\nimport { PLOT_FONT_BOX_SIZE } from '../../../../styles/font'\n\nimport {\n  AXIS_CLASS,\n  getScatterPlotMatrixStyle,\n  DATA_POINT_CLASS,\n  RECT_CLASS,\n  SELECTED_CLASS,\n  DUPLICATES_CLASS,\n  CELL_CLASS,\n} from '../../../../components-style/content/views/scatter-plot-matrix/scatterPlotMatrixStyle'\nimport { getViewsNotDisplayStyle } from '../../../../components-style/content/views/getViewsNotDisplayStyle'\n\nexport interface ScatterPlotMatrixProps extends VisualizationView, Brushable, ScatterPlotMatrixSettings {}\n\ntype CellBrushing = { cell: MatrixPosition | null }\n\nexport const DATA_POINT = `DATA_POINT`\nexport const AXIS_X = `AXIS_X`\nexport const AXIS_Y = `AXIS_Y`\nexport const CELL = `CELL`\nexport const CELL_DUPLICATES = `CELL_DUPLICATES`\n\nexport const TICKS = {\n  X: 6,\n  Y: 6,\n}\n\nexport const ScatterPlotMatrix: VoidFunctionComponent<ScatterPlotMatrixProps> = ({\n  width,\n  height,\n  dataset,\n  refreshViews,\n  displayAttributes,\n  categoryAttribute,\n  registerCleanBrushing,\n  setComponentBrushing,\n  isBrushingActive,\n  isDetailsVisible,\n  isBrushingOnEndOfMove,\n  colorCategory,\n  pointSize,\n  horizontalSpacing,\n  verticalSpacing,\n  margins,\n  opacity,\n  brushColor,\n}) => {\n  const margin = useMemo(() => new Margin(...margins), [margins])\n  const component = useRef<SVGGElement>(null)\n  const color = scaleOrdinal(colorCategory)\n\n  const [innerWidth, innerHeight] = [width - margin.width, height - margin.height]\n\n  // selected coloring\n  selectAll(getClass(DATA_POINT_CLASS)).classed(SELECTED_CLASS, (d) => (d as SelectableDataType).selected)\n\n  setDisplay(isDetailsVisible, DUPLICATES_CLASS)\n\n  const createScatterPlotMatrix = useCallback(() => {\n    const node = component.current\n    if (!node) return\n    const svg = select(node)\n    svg.selectAll(getEverything()).remove() // clear\n\n    const attributesCount = displayAttributes.length\n    const rect: Dimensions = {\n      width: innerWidth / attributesCount,\n      height: innerHeight / attributesCount,\n    }\n    if (getCellInnerSize(rect.width, horizontalSpacing) < 0 || getCellInnerSize(rect.height, verticalSpacing) < 0)\n      return // rect not big enough\n\n    const extentInDomains = getExtentInDomains(displayAttributes, dataset)\n\n    const [xScale, yScale] = [\n      scaleLinear([horizontalSpacing, rect.width - horizontalSpacing]),\n      scaleLinear([rect.height - verticalSpacing, verticalSpacing]),\n    ]\n\n    const [xAxis, yAxis] = [axisBottom(xScale), axisLeft(yScale)]\n    xAxis.ticks(TICKS.X).tickSize(innerHeight)\n    yAxis.ticks(TICKS.Y).tickSize(-innerWidth)\n\n    const setAxis =\n      (a: ScaleLinear<number, number>, axis: Axis<NumberValue>): DataEachG<keyof SelectableDataType> =>\n      (attribute, index, elements) => {\n        a.domain(extentInDomains[attribute])\n        select(elements[index]).call(axis)\n      }\n    const getTransformX: DataEachG<keyof SelectableDataType, string> = (attribute, idx) =>\n      getTranslate([(attributesCount - 1 - idx) * rect.width, 0])\n    const getTransformY: DataEachG<keyof SelectableDataType, string> = (attribute, idx) =>\n      getTranslate([0, idx * rect.height])\n\n    // axes on X (horizontal)\n    svg\n      .selectAll(AXIS_X)\n      .data(displayAttributes)\n      .enter()\n      .append(SVG.elements.g)\n      .attr(SVG.attributes.class, AXIS_CLASS)\n      .attr(SVG.attributes.transform, getTransformX)\n      .each(setAxis(xScale, xAxis))\n\n    // axes on Y (vertical)\n    svg\n      .selectAll(AXIS_Y)\n      .data(displayAttributes)\n      .enter()\n      .append(SVG.elements.g)\n      .attr(SVG.attributes.class, AXIS_CLASS)\n      .attr(SVG.attributes.transform, getTransformY)\n      .each(setAxis(yScale, yAxis))\n\n    const plotMatrixItem: DataEachG<MatrixItem> = (matrixItem, idx, elements) => {\n      // set domains\n      xScale.domain(extentInDomains[matrixItem.rowKey])\n      yScale.domain(extentInDomains[matrixItem.colKey])\n\n      const cell = select(elements[idx])\n      const getCx: DataEachC<SelectableDataType, number> = (data) => xScale(Number(data[matrixItem.rowKey]))\n      const getCy: DataEachC<SelectableDataType, number> = (data) => yScale(Number(data[matrixItem.colKey]))\n\n      // make rectangle surrounding data\n      cell\n        .append(SVG.elements.rect)\n        .attr(SVG.attributes.class, RECT_CLASS)\n        .attr(SVG.attributes.x, horizontalSpacing)\n        .attr(SVG.attributes.y, verticalSpacing)\n        .attr(SVG.attributes.width, getCellInnerSize(rect.width, horizontalSpacing))\n        .attr(SVG.attributes.height, getCellInnerSize(rect.height, verticalSpacing))\n\n      // make data points\n      cell\n        .selectAll(DATA_POINT)\n        .data(dataset)\n        .enter()\n        .append(SVG.elements.circle)\n        .attr(SVG.attributes.cx, getCx)\n        .attr(SVG.attributes.cy, getCy)\n        .attr(SVG.attributes.r, pointSize)\n        .attr(SVG.attributes.class, DATA_POINT_CLASS)\n        .on(MouseAction.mouseOver, onMouseOverTooltip(getAttributeValuesWithLabel))\n        .on(MouseAction.mouseOut, onMouseOutTooltip)\n        .style(SVG.style.fill, getCategoryColor(categoryAttribute, color))\n    }\n\n    const cell = svg\n      .selectAll(CELL)\n      .data(getMatrix(displayAttributes))\n      .enter()\n      .append(SVG.elements.g)\n      .attr(SVG.attributes.class, CELL_CLASS)\n      .attr(SVG.attributes.transform, getCellTranslateInMatrix(rect, attributesCount - 1))\n      .each(plotMatrixItem)\n\n    // add labels to diagonal\n    cell\n      .filter((matrixItem) => matrixItem.rowIdx === matrixItem.colIdx)\n      .append(SVG.elements.text)\n      .attr(SVG.attributes.x, 1.5 * horizontalSpacing)\n      .attr(SVG.attributes.y, verticalSpacing + PLOT_FONT_BOX_SIZE)\n      .text(getAttributeFromMatrixFormatted)\n\n    const brushing: CellBrushing = {\n      cell: null,\n    }\n\n    const clearBrush = () => {\n      cell.each((d, idx, elements) => {\n        brush().clear(select(elements[idx]))\n      })\n    }\n\n    const setBrushingSelection = ({ rowKey, colKey }: MatrixItem, selection: BrushSelection2d) => {\n      if (selection) {\n        dataset.forEach(\n          (data) => (data.selected = isInRanges(selection, xScale(Number(data[rowKey])), yScale(Number(data[colKey])))),\n        )\n        refreshViews()\n      }\n    }\n\n    const onBrush: Record<BrushAction, OnBrushEvent<SelectableDataType, MatrixItem>> = {\n      [BrushAction.start]: (_, { rowIdx, colIdx, rowKey, colKey }) => {\n        setComponentBrushing(ViewType.ScatterPlotMatrix)\n        if (!brushing.cell || brushing.cell.rowIdx !== rowIdx || brushing.cell.colIdx !== colIdx) {\n          clearBrush()\n          brushing.cell = { rowIdx, colIdx }\n          xScale.domain(extentInDomains[rowKey])\n          yScale.domain(extentInDomains[colKey])\n        }\n      },\n      [BrushAction.move]: ({ selection }, matrixItem) => {\n        if (!isBrushingOnEndOfMove) {\n          const brushSelection = selection as BrushSelection2d\n          setBrushingSelection(matrixItem, brushSelection)\n        }\n      },\n      [BrushAction.end]: ({ selection }, matrixItem) => {\n        const brushSelection = selection as BrushSelection2d\n        setBrushingSelection(matrixItem, brushSelection)\n        if (!brushSelection) {\n          setComponentBrushing(null)\n        }\n      },\n    }\n    const brushExtent: Extent = [\n      [0, 0],\n      [rect.width, rect.height],\n    ]\n\n    const makeBrush = brush<MatrixItem>()\n      .on(BrushAction.start, onBrush[BrushAction.start])\n      .on(BrushAction.move, onBrush[BrushAction.move])\n      .on(BrushAction.end, onBrush[BrushAction.end])\n      .extent(brushExtent)\n\n    registerCleanBrushing(() => {\n      clearBrush()\n      brushing.cell = null\n    })\n\n    cell.call(makeBrush)\n\n    // make points in second layer so details can be displayed\n    svg\n      .selectAll(CELL_DUPLICATES)\n      .data(getMatrix(displayAttributes))\n      .enter()\n      .append(SVG.elements.g)\n      .attr(SVG.attributes.class, DUPLICATES_CLASS)\n      .attr(SVG.attributes.transform, getCellTranslateInMatrix(rect, attributesCount - 1))\n      .each(plotMatrixItem)\n\n    // selected coloring\n    selectAll(getClass(DATA_POINT_CLASS)).classed(SELECTED_CLASS, (d) => (d as SelectableDataType).selected)\n  }, [\n    dataset,\n    innerWidth,\n    innerHeight,\n    horizontalSpacing,\n    verticalSpacing,\n    refreshViews,\n    categoryAttribute,\n    displayAttributes,\n    setComponentBrushing,\n    registerCleanBrushing,\n    isBrushingOnEndOfMove,\n    pointSize,\n    color,\n  ])\n\n  useEffect(\n    () => createScatterPlotMatrix(),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n      displayAttributes,\n      categoryAttribute,\n      innerWidth,\n      innerHeight,\n      pointSize,\n      horizontalSpacing,\n      verticalSpacing,\n      isBrushingOnEndOfMove,\n      colorCategory,\n    ],\n  )\n\n  if (innerWidth < 0 || innerHeight < 0) return <Box />\n  if (\n    getCellInnerSize(innerWidth / displayAttributes.length, horizontalSpacing) < 0 ||\n    getCellInnerSize(innerHeight / displayAttributes.length, verticalSpacing) < 0\n  )\n    return (\n      <Box sx={getViewsNotDisplayStyle(width, height, margin)} id={CONTAINER_EMPTY[ViewType.ScatterPlotMatrix]}>\n        {SCATTER_PLOT_MATRIX_TEXT.tooSmall}\n      </Box>\n    )\n  if (displayAttributes.length >= MIN_SCATTER_PLOT_MATRIX_ATTRIBUTE_COUNT) {\n    return (\n      <Box\n        sx={getScatterPlotMatrixStyle(opacity, isBrushingActive, brushColor)}\n        id={CONTAINER_SAVE_ID[ViewType.ScatterPlotMatrix]}\n      >\n        <svg width={width} height={height} id={SAVE_ID[ViewType.ScatterPlotMatrix]}>\n          <g ref={component} transform={getTranslate([margin.left, margin.top])} />\n        </svg>\n      </Box>\n    )\n  }\n  return (\n    <Box sx={getViewsNotDisplayStyle(width, height, margin)} id={CONTAINER_EMPTY[ViewType.ScatterPlotMatrix]}>\n      {SCATTER_PLOT_MATRIX_TEXT.unavailable}\n    </Box>\n  )\n}\n","import { SelectableDataType } from '../../types/data/data'\n\nimport { SortType } from '../../constants/sort/SortType'\n\ntype Comparator = (a: SelectableDataType, b: SelectableDataType) => number\n\nconst descCompare = <T extends SelectableDataType>(a: T, b: T, orderBy: keyof T) => {\n  if (a[orderBy] === true) return b[orderBy] === true ? 0 : 1\n  if (a[orderBy] === false) return b[orderBy] === false ? 0 : -1\n\n  return b[orderBy] < a[orderBy] ? -1 : b[orderBy] > a[orderBy] ? 1 : 0\n}\n\nexport const getComparator = (sort: SortType, orderBy: keyof SelectableDataType): Comparator =>\n  sort === SortType.desc ? (a, b) => descCompare(a, b, orderBy) : (a, b) => -descCompare(a, b, orderBy)\n","import { SxProps } from '@mui/system'\n\nimport { Opacity } from '../../../../types/styling/Opacity'\n\nimport { important } from '../../../../helpers/stringGetters'\n\nimport { PLOT_COLORS } from '../../../../styles/colors'\n\nexport const GLYPHS_CLASS = `glyphs`\nexport const SELECTED_CLASS = `glyphsSelected`\n\nexport const getGlyphsStyle = (opacity: Opacity, isBrushActive: boolean, brushColor: string): SxProps => ({\n  '& svg': {\n    bgcolor: PLOT_COLORS.backgroundColor,\n    font: `12px sans-serif`,\n  },\n  '& .glyphs': {\n    opacity: !isBrushActive ? opacity[0] / 100 : opacity[2] / 100,\n    cursor: `pointer`,\n    '&.glyphsSelected': {\n      fill: important(brushColor),\n      opacity: opacity[1] / 100,\n    },\n  },\n})\n","import { VoidFunctionComponent, useCallback, useEffect, useMemo, useRef } from 'react'\nimport { lineRadial, scaleLinear, scaleOrdinal, scaleRadial, select, selectAll } from 'd3'\nimport { Box } from '@mui/material'\n\nimport { SelectableDataType } from '../../../../types/data/data'\nimport { Brushable } from '../../../../types/brushing/Brushable'\nimport { VisualizationView } from '../../../../types/views/VisualizationView'\nimport { GlyphsSettings } from '../../../../types/views/settings/GlyphsSettings'\nimport { Margin } from '../../../../types/styling/Margin'\nimport { DataEachP, OnMouseEvent } from '../../../../types/d3-types'\n\nimport { getExtendedExtentInDomains } from '../../../../helpers/d3/extent'\nimport { getCategoryColor } from '../../../../helpers/d3/categoryColor'\nimport { getAttributeValuesWithLabel, getClass, getEverything, getTranslate } from '../../../../helpers/stringGetters'\nimport { getComparator } from '../../../../helpers/data/comparator'\nimport { onMouseOutTooltip, onMouseOverTooltip } from '../../../../helpers/d3/tooltip'\n\nimport { SVG } from '../../../../constants/svg'\nimport { MIN_GLYPHS_ATTRIBUTE_COUNT } from '../../../../constants/views/glyphs'\nimport { MouseAction } from '../../../../constants/actions/MouseAction'\nimport { ViewType } from '../../../../constants/views-general/ViewType'\nimport { CONTAINER_EMPTY, CONTAINER_SAVE_ID, SAVE_ID } from '../../../../constants/save/save'\nimport { GLYPHS_MIN_PERCENT_SHIFT } from '../../../../constants/views-general/glyphs-general'\n\nimport { GLYPHS_TEXT } from '../../../../text/views-and-settings/glyphs'\n\nimport {\n  getGlyphsStyle,\n  GLYPHS_CLASS,\n  SELECTED_CLASS,\n} from '../../../../components-style/content/views/glyphs/glyphsStyle'\nimport { getViewsNotDisplayStyle } from '../../../../components-style/content/views/getViewsNotDisplayStyle'\n\nexport interface GlyphsProps extends VisualizationView, Brushable, GlyphsSettings {}\n\nconst GLYPHS = `GLYPHS`\n\nexport const Glyphs: VoidFunctionComponent<GlyphsProps> = ({\n  dataset,\n  width,\n  height,\n  displayAttributes,\n  categoryAttribute,\n  isBrushingActive,\n  setComponentBrushing,\n  refreshViews,\n  sortAttribute,\n  sortType,\n  colorCategory,\n  glyphSize,\n  glyphSpacing,\n  margins,\n  opacity,\n  brushColor,\n}) => {\n  const margin = useMemo(() => new Margin(...margins), [margins])\n  const component = useRef<SVGGElement>(null)\n\n  const sortableDataset = useMemo<SelectableDataType[]>(() => [...dataset], [dataset])\n  const sortedDataset = useMemo(\n    () => sortableDataset.sort(getComparator(sortType, sortAttribute)),\n    [sortableDataset, sortAttribute, sortType],\n  )\n\n  const color = scaleOrdinal(colorCategory)\n\n  const innerWidth = width - margin.width\n  const glyphSizeWithSpacing = glyphSize + glyphSpacing\n  const glyphsCountPerLine = Math.floor(innerWidth / glyphSizeWithSpacing)\n  const glyphsCountPerHeight = Math.ceil(dataset.length / glyphsCountPerLine)\n  const innerHeight = glyphsCountPerHeight * glyphSizeWithSpacing\n  const glyphRadius = glyphSize / 2\n\n  // selected coloring\n  selectAll(getClass(GLYPHS_CLASS)).classed(SELECTED_CLASS, (d) => (d as SelectableDataType).selected)\n\n  const createGlyphs = useCallback(() => {\n    const node = component.current\n    if (!node) return\n    const svg = select(node)\n    svg.selectAll(getEverything()).remove() // clear\n\n    const [xScale, yScale] = [\n      scaleLinear([0, innerWidth]).domain([0, glyphsCountPerLine]),\n      scaleLinear([innerHeight, 0]).domain([0, glyphsCountPerHeight]),\n    ]\n\n    const extentInDomains = getExtendedExtentInDomains(displayAttributes, dataset, GLYPHS_MIN_PERCENT_SHIFT)\n\n    const lineRadialGenerator = lineRadial()\n    const radialScales = displayAttributes.map((attribute) =>\n      scaleRadial([0, glyphRadius]).domain(extentInDomains[attribute]),\n    )\n\n    // functions setting attributes\n    const getTransform: DataEachP<SelectableDataType, string> = (data) => {\n      const idx = sortedDataset.indexOf(data)\n      return getTranslate([\n        xScale(idx % glyphsCountPerLine) + glyphRadius,\n        yScale(glyphsCountPerHeight - Math.floor(idx / glyphsCountPerLine)) + glyphRadius,\n      ])\n    }\n    const getGlyphPath: DataEachP<SelectableDataType, string | null> = (data) =>\n      lineRadialGenerator(\n        displayAttributes.map((key, idx) => [\n          (2 * Math.PI * idx) / displayAttributes.length,\n          radialScales[idx](Number(data[key])),\n        ]),\n      )\n\n    const onMouseClick: OnMouseEvent<SelectableDataType> = (_, changedData) => {\n      changedData.selected = !changedData.selected\n      if (dataset.every((data) => !data.selected)) {\n        setComponentBrushing(null)\n        return\n      }\n      setComponentBrushing(ViewType.Glyphs)\n      refreshViews()\n    }\n\n    svg\n      .selectAll(GLYPHS)\n      .data(dataset)\n      .enter()\n      .each((data, idx, elements) => {\n        select(elements[idx])\n          .append(SVG.elements.g)\n          .selectAll(SVG.elements.path)\n          .data([data])\n          .enter()\n          .append(SVG.elements.path)\n          .attr(SVG.attributes.class, GLYPHS_CLASS)\n          .attr(SVG.attributes.d, getGlyphPath)\n          .attr(SVG.attributes.transform, getTransform)\n          .on(MouseAction.mouseOver, onMouseOverTooltip(getAttributeValuesWithLabel))\n          .on(MouseAction.mouseOut, onMouseOutTooltip)\n          .on(MouseAction.click, onMouseClick)\n          .style(SVG.style.fill, getCategoryColor(categoryAttribute, color))\n      })\n    // selected coloring, needed again\n    selectAll(getClass(GLYPHS_CLASS)).classed(SELECTED_CLASS, (d) => (d as SelectableDataType).selected)\n  }, [\n    dataset,\n    sortedDataset,\n    innerWidth,\n    innerHeight,\n    refreshViews,\n    setComponentBrushing,\n    glyphsCountPerLine,\n    glyphsCountPerHeight,\n    glyphRadius,\n    displayAttributes,\n    categoryAttribute,\n    color,\n  ])\n\n  useEffect(\n    () => createGlyphs(),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [displayAttributes, categoryAttribute, sortAttribute, sortType, innerWidth, innerHeight, colorCategory],\n  )\n\n  if (innerWidth < 0 || innerHeight < 0) return <Box />\n  if (displayAttributes.length >= MIN_GLYPHS_ATTRIBUTE_COUNT) {\n    return (\n      <Box sx={getGlyphsStyle(opacity, isBrushingActive, brushColor)} id={CONTAINER_SAVE_ID[ViewType.Glyphs]}>\n        <svg width={width} height={innerHeight + margin.height} id={SAVE_ID[ViewType.Glyphs]}>\n          <g ref={component} transform={getTranslate([margin.left, margin.top])} />\n        </svg>\n      </Box>\n    )\n  }\n  return (\n    <Box sx={getViewsNotDisplayStyle(width, height, margin)} id={CONTAINER_EMPTY[ViewType.Glyphs]}>\n      {GLYPHS_TEXT.unavailable}\n    </Box>\n  )\n}\n","export const GLYPHS_MIN_PERCENT_SHIFT = 5\n","import { SxProps } from '@mui/system'\nimport { Opacity } from '../../../../types/styling/Opacity'\n\nimport { important, px } from '../../../../helpers/stringGetters'\n\nimport { PLOT_COLORS } from '../../../../styles/colors'\n\nexport const SCATTER_PLOT_GLYPHS_CLASS = `scatterPlotGlyphs`\nexport const SELECTED_CLASS = `scatterPlotGlyphsSelected`\nexport const AXIS_CLASS = `scatterPlotGlyphsAxis`\nexport const AXIS_TEXT_CLASS = `scatterPlotGlyphsAxisText`\nexport const DUPLICATES_CLASS = `scatterPlotGlyphsDuplicates`\n\nexport const getScatterPlotGlyphsStyle = (\n  opacity: Opacity,\n  isBrushingActive: boolean,\n  brushColor: string,\n): SxProps => ({\n  '& svg': {\n    bgcolor: PLOT_COLORS.backgroundColor,\n    font: `12px sans-serif`,\n  },\n  '& .scatterPlotGlyphs': {\n    opacity: !isBrushingActive ? opacity[0] / 100 : opacity[2] / 100,\n    '&.scatterPlotGlyphsSelected': {\n      fill: important(brushColor),\n      opacity: opacity[1] / 100,\n    },\n  },\n  '& .scatterPlotGlyphsDuplicates': {\n    opacity: 0,\n  },\n  '& .scatterPlotGlyphsAxis': {\n    shapeRendering: `crispEdges`,\n    '& line, path': {\n      stroke: PLOT_COLORS.axisLinesDark,\n    },\n  },\n  '& .scatterPlotGlyphsAxisText': {\n    fill: PLOT_COLORS.fontColor,\n    fontSize: px(13),\n    fontWeight: `bold`,\n  },\n})\n","import { VoidFunctionComponent, useCallback, useEffect, useMemo, useRef } from 'react'\nimport { axisBottom, axisLeft, brush, lineRadial, scaleLinear, scaleOrdinal, scaleRadial, select, selectAll } from 'd3'\nimport { Box } from '@mui/material'\n\nimport { SelectableDataType } from '../../../../types/data/data'\nimport { VisualizationView } from '../../../../types/views/VisualizationView'\nimport { Brushable } from '../../../../types/brushing/Brushable'\nimport { ScatterPlotGlyphsSettings } from '../../../../types/views/settings/ScatterPlotGlyphsSettings'\nimport { Margin } from '../../../../types/styling/Margin'\nimport { BrushSelection2d } from '../../../../types/brushing/BrushSelection'\nimport { Extent, DataEachP, OnBrushEvent } from '../../../../types/d3-types'\n\nimport {\n  getAttributeFormatted,\n  getAttributeValuesWithLabel,\n  getClass,\n  getEverything,\n  getRotate,\n  getTranslate,\n} from '../../../../helpers/stringGetters'\nimport { setDisplay } from '../../../../helpers/d3/setDisplay'\nimport { getExtendedExtentInDomains, getExtentInDomains } from '../../../../helpers/d3/extent'\nimport { getCategoryColor } from '../../../../helpers/d3/categoryColor'\nimport { isInRanges } from '../../../../helpers/basic/range'\nimport { onMouseOutTooltip, onMouseOverTooltip } from '../../../../helpers/d3/tooltip'\n\nimport { ViewType } from '../../../../constants/views-general/ViewType'\nimport { SVG } from '../../../../constants/svg'\nimport { MouseAction } from '../../../../constants/actions/MouseAction'\nimport { BrushAction } from '../../../../constants/actions/BrushAction'\nimport { MIN_SCATTER_PLOT_GLYPHS_ATTRIBUTE_COUNT } from '../../../../constants/views/scatterPlotGlyphs'\nimport { CONTAINER_EMPTY, CONTAINER_SAVE_ID, SAVE_ID } from '../../../../constants/save/save'\nimport { TOOLTIP_CLASS } from '../../../../constants/views-general/tooltip'\nimport { GLYPHS_MIN_PERCENT_SHIFT } from '../../../../constants/views-general/glyphs-general'\n\nimport { SCATTER_PLOT_GLYPHS_TEXT } from '../../../../text/views-and-settings/scatterPlotGlyphs'\n\nimport {\n  AXIS_CLASS,\n  AXIS_TEXT_CLASS,\n  DUPLICATES_CLASS,\n  getScatterPlotGlyphsStyle,\n  SCATTER_PLOT_GLYPHS_CLASS,\n  SELECTED_CLASS,\n} from '../../../../components-style/content/views/scatter-plot-glyphs/scatterPlotGlyphsStyle'\nimport { getViewsNotDisplayStyle } from '../../../../components-style/content/views/getViewsNotDisplayStyle'\n\nconst SCATTER_PLOT_GLYPHS = `SCATTER_PLOT_GLYPHS`\nconst AXIS_X = `axisX`\nconst AXIS_Y = `axisY`\n\nconst Y_AXIS_TEXT_SHIFT = 30\n\nexport interface ScatterPlotGlyphsProps extends VisualizationView, Brushable, ScatterPlotGlyphsSettings {}\n\nexport const ScatterPlotGlyphs: VoidFunctionComponent<ScatterPlotGlyphsProps> = ({\n  width,\n  height,\n  dataset,\n  refreshViews,\n  displayAttributes,\n  xAttribute,\n  yAttribute,\n  categoryAttribute,\n  registerCleanBrushing,\n  setComponentBrushing,\n  isBrushingActive,\n  isDetailsVisible,\n  isBrushingOnEndOfMove,\n  colorCategory,\n  glyphSize,\n  margins,\n  opacity,\n  brushColor,\n}) => {\n  const margin = useMemo(() => new Margin(...margins), [margins])\n  const component = useRef<SVGGElement>(null)\n  const color = scaleOrdinal(colorCategory)\n\n  const [innerWidth, innerHeight] = [width - margin.width - glyphSize, height - margin.height - glyphSize]\n\n  // selected coloring\n  selectAll(getClass(SCATTER_PLOT_GLYPHS_CLASS)).classed(SELECTED_CLASS, (d) => (d as SelectableDataType).selected)\n\n  setDisplay(isDetailsVisible, TOOLTIP_CLASS)\n\n  const createScatterPlotGlyphs = useCallback(() => {\n    const node = component.current\n    if (!node) return\n    const svg = select(node)\n    svg.selectAll(getEverything()).remove() // clear\n\n    const linearExtentInDomains = getExtentInDomains([xAttribute, yAttribute], dataset)\n    const radialExtentInDomains = getExtendedExtentInDomains(displayAttributes, dataset, GLYPHS_MIN_PERCENT_SHIFT)\n\n    const [xScale, yScale] = [\n      scaleLinear([0, innerWidth]).domain(linearExtentInDomains[xAttribute]),\n      scaleLinear([innerHeight, 0]).domain(linearExtentInDomains[yAttribute]),\n    ]\n\n    const lineRadialGenerator = lineRadial()\n    const radialScales = displayAttributes.map((attribute) =>\n      scaleRadial([0, glyphSize / 2]).domain(radialExtentInDomains[attribute]),\n    )\n\n    const getGlyphPath: DataEachP<SelectableDataType, string | null> = (data) =>\n      lineRadialGenerator(\n        displayAttributes.map((key, idx) => [\n          (2 * Math.PI * idx) / displayAttributes.length,\n          radialScales[idx](Number(data[key])),\n        ]),\n      )\n\n    const makeGlyphs = (className: string) =>\n      svg\n        .selectAll(SCATTER_PLOT_GLYPHS)\n        .append(SVG.elements.g)\n        .data(dataset)\n        .enter()\n        .each((data, idx, elements) => {\n          select(elements[idx])\n            .append(SVG.elements.g)\n            .selectAll(SVG.elements.path)\n            .data([data])\n            .enter()\n            .append(SVG.elements.path)\n            .attr(SVG.attributes.class, className)\n            .attr(SVG.attributes.d, getGlyphPath)\n            .attr(\n              SVG.attributes.transform,\n              getTranslate([xScale(Number(data[xAttribute])), yScale(Number(data[yAttribute]))]),\n            )\n            .on(MouseAction.mouseOver, onMouseOverTooltip(getAttributeValuesWithLabel))\n            .on(MouseAction.mouseOut, onMouseOutTooltip)\n            .style(SVG.style.fill, getCategoryColor(categoryAttribute, color))\n        })\n    makeGlyphs(SCATTER_PLOT_GLYPHS_CLASS)\n\n    const axisX = svg\n      .selectAll(AXIS_X)\n      .data([xAttribute])\n      .enter()\n      .append(SVG.elements.g)\n      .attr(SVG.attributes.transform, getTranslate([0, innerHeight]))\n      .attr(SVG.attributes.class, AXIS_CLASS)\n\n    const axisY = svg\n      .selectAll(AXIS_Y)\n      .data([yAttribute])\n      .enter()\n      .append(SVG.elements.g)\n      .attr(SVG.attributes.class, AXIS_CLASS)\n\n    axisX.call(axisBottom(xScale))\n    axisY.call(axisLeft(yScale))\n\n    // axis X label\n    axisX\n      .append(SVG.elements.text)\n      .attr(SVG.attributes.x, innerWidth)\n      .attr(SVG.attributes.y, Y_AXIS_TEXT_SHIFT)\n      .text(getAttributeFormatted)\n      .attr(SVG.attributes.class, AXIS_TEXT_CLASS)\n      .attr(SVG.attributes.textAnchor, SVG.values.end)\n    // axis Y label\n    axisY\n      .append(SVG.elements.text)\n      .attr(SVG.attributes.transform, getRotate(-90))\n      .attr(SVG.attributes.y, -Y_AXIS_TEXT_SHIFT)\n      .text(getAttributeFormatted)\n      .attr(SVG.attributes.class, AXIS_TEXT_CLASS)\n      .attr(SVG.attributes.textAnchor, SVG.values.end)\n\n    const setBrushingSelection = (selection: BrushSelection2d) => {\n      if (selection) {\n        dataset.forEach(\n          (data) =>\n            (data.selected = isInRanges(selection, xScale(Number(data[xAttribute])), yScale(Number(data[yAttribute])))),\n        )\n        refreshViews()\n      }\n    }\n\n    const onBrush: Record<BrushAction, OnBrushEvent<SelectableDataType>> = {\n      [BrushAction.start]: () => {\n        setComponentBrushing(ViewType.ScatterPlotGlyphs)\n      },\n      [BrushAction.move]: ({ selection }) => {\n        if (!isBrushingOnEndOfMove) {\n          const brushSelection = selection as BrushSelection2d\n          setBrushingSelection(brushSelection)\n        }\n      },\n      [BrushAction.end]: ({ selection }) => {\n        const brushSelection = selection as BrushSelection2d\n        setBrushingSelection(brushSelection)\n        if (!brushSelection) {\n          setComponentBrushing(null)\n        }\n      },\n    }\n    const brushExtent: Extent = [\n      [-glyphSize / 2, -glyphSize / 2],\n      [innerWidth + glyphSize / 2, innerHeight + glyphSize / 2],\n    ]\n\n    const makeBrush = brush()\n      .on(BrushAction.start, onBrush[BrushAction.start])\n      .on(BrushAction.move, onBrush[BrushAction.move])\n      .on(BrushAction.end, onBrush[BrushAction.end])\n      .extent(brushExtent)\n\n    svg.call(makeBrush)\n\n    // make duplicates for brushing/tooltip\n    makeGlyphs(DUPLICATES_CLASS)\n    registerCleanBrushing(() => {\n      brush().clear(svg)\n    })\n  }, [\n    dataset,\n    innerWidth,\n    innerHeight,\n    refreshViews,\n    setComponentBrushing,\n    xAttribute,\n    yAttribute,\n    displayAttributes,\n    categoryAttribute,\n    glyphSize,\n    color,\n    registerCleanBrushing,\n    isBrushingOnEndOfMove,\n  ])\n\n  useEffect(\n    () => createScatterPlotGlyphs(),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n      displayAttributes,\n      categoryAttribute,\n      innerWidth,\n      innerHeight,\n      glyphSize,\n      isBrushingOnEndOfMove,\n      colorCategory,\n      xAttribute,\n      yAttribute,\n    ],\n  )\n\n  if (innerWidth < 0 || innerHeight < 0) return <Box />\n  if (displayAttributes.length >= MIN_SCATTER_PLOT_GLYPHS_ATTRIBUTE_COUNT) {\n    return (\n      <Box\n        sx={getScatterPlotGlyphsStyle(opacity, isBrushingActive, brushColor)}\n        id={CONTAINER_SAVE_ID[ViewType.ScatterPlotGlyphs]}\n      >\n        <svg width={width} height={height} id={SAVE_ID[ViewType.ScatterPlotGlyphs]}>\n          <g ref={component} transform={getTranslate([margin.left + glyphSize / 2, margin.top + glyphSize / 2])} />\n        </svg>\n      </Box>\n    )\n  }\n  return (\n    <Box sx={getViewsNotDisplayStyle(width, height, margin)} id={CONTAINER_EMPTY[ViewType.ScatterPlotGlyphs]}>\n      {SCATTER_PLOT_GLYPHS_TEXT.unavailable}\n    </Box>\n  )\n}\n","import { SxProps } from '@mui/system'\n\nimport { calc, important, px } from '../../../../helpers/stringGetters'\n\nimport { TABLE_COLORS } from '../../../../styles/colors'\n\nexport const getDataTableRowStyle = (\n  rowHeight: number,\n  selected: boolean,\n  selectedBackgroundColor: string,\n  selectedFontColor: string,\n): SxProps => ({\n  height: rowHeight,\n  bgcolor: selected ? important(selectedBackgroundColor) : ``,\n  '& .MuiTableCell-root': {\n    color: selected ? important(selectedFontColor) : ``,\n  },\n  '& .MuiTableCell-root, .MuiCheckbox-root': {\n    paddingTop: 0,\n    paddingBottom: 0,\n  },\n})\n\nexport const dataTableStyle: Record<string, SxProps> = {\n  tableHead: {\n    bgcolor: TABLE_COLORS.headerBackground,\n  },\n  tableHeadRow: {\n    height: 30,\n    fontWeight: `bold`,\n    '& .MuiTableCell-root, .MuiCheckbox-root': {\n      color: TABLE_COLORS.headerFont,\n    },\n    '& .MuiTableSortLabel-root.Mui-active, .MuiTableSortLabel-root:hover, .MuiTableSortLabel-icon': {\n      color: important(TABLE_COLORS.headerFontActive),\n    },\n  },\n  tableBody: {\n    bgcolor: TABLE_COLORS.rowsBackground,\n  },\n  filterRow: {\n    bgcolor: TABLE_COLORS.filterBackground,\n  },\n  filterCell: {\n    padding: px(5),\n  },\n  filter: {\n    width: `90%`,\n    bgcolor: TABLE_COLORS.rowsBackground,\n    borderRadius: px(5),\n    '&.MuiFormControl-root': {\n      margin: 0,\n    },\n    '& input': {\n      padding: px(5, 10, 4),\n    },\n  },\n  filterIcon: {\n    paddingLeft: px(12),\n    color: TABLE_COLORS.filterIconFont,\n  },\n  notDisplayed: {\n    padding: 10,\n  },\n  checkboxAll: {\n    display: `flex`,\n    height: calc(-10, `100%`),\n    padding: px(5),\n  },\n}\n","import { VoidFunctionComponent } from 'react'\nimport { Checkbox, TableBody, TableCell, TableRow } from '@mui/material'\n\nimport { SelectableDataType } from '../../../../types/data/data'\n\nimport { dataToReadable } from '../../../../helpers/data/formatText'\n\nimport { CELL_PADDING } from '../../../../constants/mui'\n\nimport {\n  dataTableStyle,\n  getDataTableRowStyle,\n} from '../../../../components-style/content/views/data-table/dataTableStyle'\n\nexport interface DataTableBodyProps {\n  displayAttributes: Array<keyof SelectableDataType>\n  sortedDataset: SelectableDataType[]\n  handleSelectClick: (data: SelectableDataType) => void\n  rowHeight: number\n  selectedBackgroundColor: string\n  selectedFontColor: string\n  redrawTime: number\n}\n\nexport const DataTableBody: VoidFunctionComponent<DataTableBodyProps> = ({\n  displayAttributes,\n  sortedDataset,\n  handleSelectClick,\n  rowHeight,\n  selectedBackgroundColor,\n  selectedFontColor,\n}) => (\n  <TableBody sx={dataTableStyle.tableBody}>\n    {sortedDataset.map((data, idx) => (\n      <TableRow\n        hover\n        onClick={() => handleSelectClick(data)}\n        key={idx}\n        sx={getDataTableRowStyle(rowHeight, data.selected, selectedBackgroundColor, selectedFontColor)}\n      >\n        <TableCell padding={CELL_PADDING.checkbox}>\n          <Checkbox checked={data.selected} />\n        </TableCell>\n        {displayAttributes.map((attribute) => (\n          <TableCell key={`${idx}-${attribute}`}>{dataToReadable(data[attribute])}</TableCell>\n        ))}\n      </TableRow>\n    ))}\n  </TableBody>\n)\n","import { useCallback, useEffect, useMemo, useState, VoidFunctionComponent } from 'react'\nimport {\n  Box,\n  Checkbox,\n  Table,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  TableSortLabel,\n  TextField,\n  Tooltip,\n} from '@mui/material'\nimport { FilterListOutlined } from '@mui/icons-material'\n\nimport { VisualizationView } from '../../../../types/views/VisualizationView'\nimport { Brushable } from '../../../../types/brushing/Brushable'\nimport { DataTableSettings } from '../../../../types/views/settings/DataTableSettings'\nimport { SelectableDataType, SelectedKey } from '../../../../types/data/data'\n\nimport { otherCasesToWhitespaces } from '../../../../helpers/data/formatText'\nimport { getComparator } from '../../../../helpers/data/comparator'\n\nimport { ViewType } from '../../../../constants/views-general/ViewType'\nimport { SortType } from '../../../../constants/sort/SortType'\nimport { MIN_DATA_TABLE_ATTRIBUTE_COUNT } from '../../../../constants/views/dataTable'\nimport { CELL_PADDING } from '../../../../constants/mui'\n\nimport { DATA_TABLE_TEXT } from '../../../../text/views-and-settings/dataTable'\n\nimport { dataTableStyle } from '../../../../components-style/content/views/data-table/dataTableStyle'\n\nimport { DataTableBody } from './DataTableBody'\n\nexport interface DataTableProps extends VisualizationView, Brushable, DataTableSettings {\n  showFilter: boolean\n}\n\nexport const DataTable: VoidFunctionComponent<DataTableProps> = ({\n  dataset,\n  displayAttributes,\n  refreshViews,\n  setComponentBrushing,\n  rowHeight,\n  selectedBackgroundColor,\n  selectedFontColor,\n  showFilter,\n  redrawTime,\n}) => {\n  const [order, setOrder] = useState<SortType>(SortType.asc)\n  const [orderBy, setOrderBy] = useState<keyof SelectableDataType>(displayAttributes[0])\n  const [doResort, setDoResort] = useState(0)\n  const [filterValues, setFilterValues] = useState<{ [p: keyof SelectableDataType]: string }>(\n    Object.fromEntries(displayAttributes.map((key) => [key, ``])),\n  )\n\n  const filteredDataset = useMemo<SelectableDataType[]>(\n    () =>\n      [...dataset].filter((data) =>\n        displayAttributes.every((attribute) => String(data[attribute]).includes(filterValues[attribute])),\n      ),\n    [dataset, displayAttributes, filterValues],\n  )\n\n  const sortedDataset = useMemo(\n    () => filteredDataset.sort(getComparator(order, orderBy)),\n    // `doResort` is needed for resorting after changing select\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [filteredDataset, order, orderBy, doResort],\n  )\n\n  useEffect(\n    () => () => {\n      if (orderBy === SelectedKey) {\n        setDoResort((prev) => prev + 1) // reorder\n      }\n    },\n    [orderBy, redrawTime],\n  )\n\n  const handleSelectClick = useCallback(\n    (changedData: SelectableDataType) => {\n      changedData.selected = !changedData.selected\n      if (dataset.every((data) => !data.selected)) {\n        setComponentBrushing(null)\n        return\n      }\n      setComponentBrushing(ViewType.DataTable)\n      refreshViews()\n    },\n    [dataset, refreshViews, setComponentBrushing],\n  )\n\n  const handleSelectAllClick = useCallback(\n    (checked: boolean) => {\n      sortedDataset.forEach((data) => (data.selected = checked))\n      if (dataset.every((data) => !data.selected)) {\n        setComponentBrushing(null)\n        return\n      }\n      setComponentBrushing(ViewType.DataTable)\n      refreshViews()\n    },\n    [dataset, refreshViews, setComponentBrushing, sortedDataset],\n  )\n\n  const handleRequestSort = useCallback(\n    (property: keyof SelectableDataType) => {\n      const isAsc = orderBy === property && order === SortType.asc\n      setOrder(isAsc ? SortType.desc : SortType.asc)\n      setOrderBy(property)\n    },\n    [order, orderBy],\n  )\n\n  const handleFilterValueChange = useCallback((newValue: string, key: keyof SelectableDataType) => {\n    setFilterValues((prev) => ({\n      ...prev,\n      [key]: newValue,\n    }))\n  }, [])\n\n  const createSortHandler = useCallback(\n    (property: keyof SelectableDataType) => () => {\n      handleRequestSort(property)\n    },\n    [handleRequestSort],\n  )\n\n  const sortTooltipTitle = useCallback(\n    (headCellId: keyof SelectableDataType) =>\n      orderBy === headCellId\n        ? DATA_TABLE_TEXT[order === SortType.asc ? SortType.desc : SortType.asc]\n        : DATA_TABLE_TEXT[SortType.asc],\n    [order, orderBy],\n  )\n\n  const getTableHead = useCallback(\n    (indeterminate: boolean, allChecked: boolean) => (\n      <TableHead sx={dataTableStyle.tableHead}>\n        <TableRow sx={dataTableStyle.tableHeadRow}>\n          <TableCell padding={CELL_PADDING.none}>\n            <Box sx={dataTableStyle.checkboxAll}>\n              <Tooltip title={DATA_TABLE_TEXT.checkboxTooltip}>\n                <Checkbox\n                  sx={dataTableStyle.checkAll}\n                  indeterminate={indeterminate && !allChecked}\n                  checked={allChecked}\n                  onChange={(event) => handleSelectAllClick(event.target.checked)}\n                />\n              </Tooltip>\n              <TableSortLabel\n                active={orderBy === SelectedKey}\n                direction={orderBy === SelectedKey ? order : SortType.asc}\n                onClick={createSortHandler(SelectedKey)}\n              />\n            </Box>\n          </TableCell>\n          {displayAttributes.map((attribute) => {\n            const orderedByActive = orderBy === attribute\n            return (\n              <TableCell key={attribute} sortDirection={orderedByActive ? order : false}>\n                <Tooltip title={sortTooltipTitle(attribute)}>\n                  <TableSortLabel\n                    active={orderedByActive}\n                    direction={orderedByActive ? order : SortType.asc}\n                    onClick={createSortHandler(attribute)}\n                  >\n                    {otherCasesToWhitespaces(attribute)}\n                  </TableSortLabel>\n                </Tooltip>\n              </TableCell>\n            )\n          })}\n        </TableRow>\n        {showFilter && (\n          <TableRow sx={dataTableStyle.filterRow}>\n            <TableCell padding={CELL_PADDING.none}>\n              <FilterListOutlined sx={dataTableStyle.filterIcon} />\n            </TableCell>\n            {displayAttributes.map((attribute, idx) => (\n              <TableCell sx={dataTableStyle.filterCell} key={`filter-${attribute}`}>\n                <TextField\n                  defaultValue={filterValues[idx]}\n                  sx={dataTableStyle.filter}\n                  onChange={(e) => handleFilterValueChange(e.target.value, attribute)}\n                />\n              </TableCell>\n            ))}\n          </TableRow>\n        )}\n      </TableHead>\n    ),\n    [\n      createSortHandler,\n      displayAttributes,\n      filterValues,\n      handleFilterValueChange,\n      handleSelectAllClick,\n      order,\n      orderBy,\n      showFilter,\n      sortTooltipTitle,\n    ],\n  )\n\n  if (displayAttributes.length >= MIN_DATA_TABLE_ATTRIBUTE_COUNT) {\n    return (\n      <TableContainer>\n        <Table sx={dataTableStyle.container}>\n          {getTableHead(\n            sortedDataset.some((data) => data.selected),\n            sortedDataset.every((data) => data.selected),\n          )}\n          <DataTableBody\n            displayAttributes={displayAttributes}\n            sortedDataset={sortedDataset}\n            handleSelectClick={handleSelectClick}\n            rowHeight={rowHeight}\n            selectedBackgroundColor={selectedBackgroundColor}\n            selectedFontColor={selectedFontColor}\n            redrawTime={redrawTime}\n          />\n        </Table>\n      </TableContainer>\n    )\n  }\n  return <Box sx={dataTableStyle.notDisplayed}>{DATA_TABLE_TEXT.unavailable}</Box>\n}\n","import {min} from \"d3-array\";\n\nfunction targetDepth(d) {\n  return d.target.depth;\n}\n\nexport function left(node) {\n  return node.depth;\n}\n\nexport function right(node, n) {\n  return n - 1 - node.height;\n}\n\nexport function justify(node, n) {\n  return node.sourceLinks.length ? node.depth : n - 1;\n}\n\nexport function center(node) {\n  return node.targetLinks.length ? node.depth\n      : node.sourceLinks.length ? min(node.sourceLinks, targetDepth) - 1\n      : 0;\n}\n","export default function constant(x) {\n  return function() {\n    return x;\n  };\n}\n","import {max, min, sum} from \"d3-array\";\nimport {justify} from \"./align.js\";\nimport constant from \"./constant.js\";\n\nfunction ascendingSourceBreadth(a, b) {\n  return ascendingBreadth(a.source, b.source) || a.index - b.index;\n}\n\nfunction ascendingTargetBreadth(a, b) {\n  return ascendingBreadth(a.target, b.target) || a.index - b.index;\n}\n\nfunction ascendingBreadth(a, b) {\n  return a.y0 - b.y0;\n}\n\nfunction value(d) {\n  return d.value;\n}\n\nfunction defaultId(d) {\n  return d.index;\n}\n\nfunction defaultNodes(graph) {\n  return graph.nodes;\n}\n\nfunction defaultLinks(graph) {\n  return graph.links;\n}\n\nfunction find(nodeById, id) {\n  const node = nodeById.get(id);\n  if (!node) throw new Error(\"missing: \" + id);\n  return node;\n}\n\nfunction computeLinkBreadths({nodes}) {\n  for (const node of nodes) {\n    let y0 = node.y0;\n    let y1 = y0;\n    for (const link of node.sourceLinks) {\n      link.y0 = y0 + link.width / 2;\n      y0 += link.width;\n    }\n    for (const link of node.targetLinks) {\n      link.y1 = y1 + link.width / 2;\n      y1 += link.width;\n    }\n  }\n}\n\nexport default function Sankey() {\n  let x0 = 0, y0 = 0, x1 = 1, y1 = 1; // extent\n  let dx = 24; // nodeWidth\n  let dy = 8, py; // nodePadding\n  let id = defaultId;\n  let align = justify;\n  let sort;\n  let linkSort;\n  let nodes = defaultNodes;\n  let links = defaultLinks;\n  let iterations = 6;\n\n  function sankey() {\n    const graph = {nodes: nodes.apply(null, arguments), links: links.apply(null, arguments)};\n    computeNodeLinks(graph);\n    computeNodeValues(graph);\n    computeNodeDepths(graph);\n    computeNodeHeights(graph);\n    computeNodeBreadths(graph);\n    computeLinkBreadths(graph);\n    return graph;\n  }\n\n  sankey.update = function(graph) {\n    computeLinkBreadths(graph);\n    return graph;\n  };\n\n  sankey.nodeId = function(_) {\n    return arguments.length ? (id = typeof _ === \"function\" ? _ : constant(_), sankey) : id;\n  };\n\n  sankey.nodeAlign = function(_) {\n    return arguments.length ? (align = typeof _ === \"function\" ? _ : constant(_), sankey) : align;\n  };\n\n  sankey.nodeSort = function(_) {\n    return arguments.length ? (sort = _, sankey) : sort;\n  };\n\n  sankey.nodeWidth = function(_) {\n    return arguments.length ? (dx = +_, sankey) : dx;\n  };\n\n  sankey.nodePadding = function(_) {\n    return arguments.length ? (dy = py = +_, sankey) : dy;\n  };\n\n  sankey.nodes = function(_) {\n    return arguments.length ? (nodes = typeof _ === \"function\" ? _ : constant(_), sankey) : nodes;\n  };\n\n  sankey.links = function(_) {\n    return arguments.length ? (links = typeof _ === \"function\" ? _ : constant(_), sankey) : links;\n  };\n\n  sankey.linkSort = function(_) {\n    return arguments.length ? (linkSort = _, sankey) : linkSort;\n  };\n\n  sankey.size = function(_) {\n    return arguments.length ? (x0 = y0 = 0, x1 = +_[0], y1 = +_[1], sankey) : [x1 - x0, y1 - y0];\n  };\n\n  sankey.extent = function(_) {\n    return arguments.length ? (x0 = +_[0][0], x1 = +_[1][0], y0 = +_[0][1], y1 = +_[1][1], sankey) : [[x0, y0], [x1, y1]];\n  };\n\n  sankey.iterations = function(_) {\n    return arguments.length ? (iterations = +_, sankey) : iterations;\n  };\n\n  function computeNodeLinks({nodes, links}) {\n    for (const [i, node] of nodes.entries()) {\n      node.index = i;\n      node.sourceLinks = [];\n      node.targetLinks = [];\n    }\n    const nodeById = new Map(nodes.map((d, i) => [id(d, i, nodes), d]));\n    for (const [i, link] of links.entries()) {\n      link.index = i;\n      let {source, target} = link;\n      if (typeof source !== \"object\") source = link.source = find(nodeById, source);\n      if (typeof target !== \"object\") target = link.target = find(nodeById, target);\n      source.sourceLinks.push(link);\n      target.targetLinks.push(link);\n    }\n    if (linkSort != null) {\n      for (const {sourceLinks, targetLinks} of nodes) {\n        sourceLinks.sort(linkSort);\n        targetLinks.sort(linkSort);\n      }\n    }\n  }\n\n  function computeNodeValues({nodes}) {\n    for (const node of nodes) {\n      node.value = node.fixedValue === undefined\n          ? Math.max(sum(node.sourceLinks, value), sum(node.targetLinks, value))\n          : node.fixedValue;\n    }\n  }\n\n  function computeNodeDepths({nodes}) {\n    const n = nodes.length;\n    let current = new Set(nodes);\n    let next = new Set;\n    let x = 0;\n    while (current.size) {\n      for (const node of current) {\n        node.depth = x;\n        for (const {target} of node.sourceLinks) {\n          next.add(target);\n        }\n      }\n      if (++x > n) throw new Error(\"circular link\");\n      current = next;\n      next = new Set;\n    }\n  }\n\n  function computeNodeHeights({nodes}) {\n    const n = nodes.length;\n    let current = new Set(nodes);\n    let next = new Set;\n    let x = 0;\n    while (current.size) {\n      for (const node of current) {\n        node.height = x;\n        for (const {source} of node.targetLinks) {\n          next.add(source);\n        }\n      }\n      if (++x > n) throw new Error(\"circular link\");\n      current = next;\n      next = new Set;\n    }\n  }\n\n  function computeNodeLayers({nodes}) {\n    const x = max(nodes, d => d.depth) + 1;\n    const kx = (x1 - x0 - dx) / (x - 1);\n    const columns = new Array(x);\n    for (const node of nodes) {\n      const i = Math.max(0, Math.min(x - 1, Math.floor(align.call(null, node, x))));\n      node.layer = i;\n      node.x0 = x0 + i * kx;\n      node.x1 = node.x0 + dx;\n      if (columns[i]) columns[i].push(node);\n      else columns[i] = [node];\n    }\n    if (sort) for (const column of columns) {\n      column.sort(sort);\n    }\n    return columns;\n  }\n\n  function initializeNodeBreadths(columns) {\n    const ky = min(columns, c => (y1 - y0 - (c.length - 1) * py) / sum(c, value));\n    for (const nodes of columns) {\n      let y = y0;\n      for (const node of nodes) {\n        node.y0 = y;\n        node.y1 = y + node.value * ky;\n        y = node.y1 + py;\n        for (const link of node.sourceLinks) {\n          link.width = link.value * ky;\n        }\n      }\n      y = (y1 - y + py) / (nodes.length + 1);\n      for (let i = 0; i < nodes.length; ++i) {\n        const node = nodes[i];\n        node.y0 += y * (i + 1);\n        node.y1 += y * (i + 1);\n      }\n      reorderLinks(nodes);\n    }\n  }\n\n  function computeNodeBreadths(graph) {\n    const columns = computeNodeLayers(graph);\n    py = Math.min(dy, (y1 - y0) / (max(columns, c => c.length) - 1));\n    initializeNodeBreadths(columns);\n    for (let i = 0; i < iterations; ++i) {\n      const alpha = Math.pow(0.99, i);\n      const beta = Math.max(1 - alpha, (i + 1) / iterations);\n      relaxRightToLeft(columns, alpha, beta);\n      relaxLeftToRight(columns, alpha, beta);\n    }\n  }\n\n  // Reposition each node based on its incoming (target) links.\n  function relaxLeftToRight(columns, alpha, beta) {\n    for (let i = 1, n = columns.length; i < n; ++i) {\n      const column = columns[i];\n      for (const target of column) {\n        let y = 0;\n        let w = 0;\n        for (const {source, value} of target.targetLinks) {\n          let v = value * (target.layer - source.layer);\n          y += targetTop(source, target) * v;\n          w += v;\n        }\n        if (!(w > 0)) continue;\n        let dy = (y / w - target.y0) * alpha;\n        target.y0 += dy;\n        target.y1 += dy;\n        reorderNodeLinks(target);\n      }\n      if (sort === undefined) column.sort(ascendingBreadth);\n      resolveCollisions(column, beta);\n    }\n  }\n\n  // Reposition each node based on its outgoing (source) links.\n  function relaxRightToLeft(columns, alpha, beta) {\n    for (let n = columns.length, i = n - 2; i >= 0; --i) {\n      const column = columns[i];\n      for (const source of column) {\n        let y = 0;\n        let w = 0;\n        for (const {target, value} of source.sourceLinks) {\n          let v = value * (target.layer - source.layer);\n          y += sourceTop(source, target) * v;\n          w += v;\n        }\n        if (!(w > 0)) continue;\n        let dy = (y / w - source.y0) * alpha;\n        source.y0 += dy;\n        source.y1 += dy;\n        reorderNodeLinks(source);\n      }\n      if (sort === undefined) column.sort(ascendingBreadth);\n      resolveCollisions(column, beta);\n    }\n  }\n\n  function resolveCollisions(nodes, alpha) {\n    const i = nodes.length >> 1;\n    const subject = nodes[i];\n    resolveCollisionsBottomToTop(nodes, subject.y0 - py, i - 1, alpha);\n    resolveCollisionsTopToBottom(nodes, subject.y1 + py, i + 1, alpha);\n    resolveCollisionsBottomToTop(nodes, y1, nodes.length - 1, alpha);\n    resolveCollisionsTopToBottom(nodes, y0, 0, alpha);\n  }\n\n  // Push any overlapping nodes down.\n  function resolveCollisionsTopToBottom(nodes, y, i, alpha) {\n    for (; i < nodes.length; ++i) {\n      const node = nodes[i];\n      const dy = (y - node.y0) * alpha;\n      if (dy > 1e-6) node.y0 += dy, node.y1 += dy;\n      y = node.y1 + py;\n    }\n  }\n\n  // Push any overlapping nodes up.\n  function resolveCollisionsBottomToTop(nodes, y, i, alpha) {\n    for (; i >= 0; --i) {\n      const node = nodes[i];\n      const dy = (node.y1 - y) * alpha;\n      if (dy > 1e-6) node.y0 -= dy, node.y1 -= dy;\n      y = node.y0 - py;\n    }\n  }\n\n  function reorderNodeLinks({sourceLinks, targetLinks}) {\n    if (linkSort === undefined) {\n      for (const {source: {sourceLinks}} of targetLinks) {\n        sourceLinks.sort(ascendingTargetBreadth);\n      }\n      for (const {target: {targetLinks}} of sourceLinks) {\n        targetLinks.sort(ascendingSourceBreadth);\n      }\n    }\n  }\n\n  function reorderLinks(nodes) {\n    if (linkSort === undefined) {\n      for (const {sourceLinks, targetLinks} of nodes) {\n        sourceLinks.sort(ascendingTargetBreadth);\n        targetLinks.sort(ascendingSourceBreadth);\n      }\n    }\n  }\n\n  // Returns the target.y0 that would produce an ideal link from source to target.\n  function targetTop(source, target) {\n    return 0; // FIX HERE\n  }\n\n  // Returns the source.y0 that would produce an ideal link from source to target.\n  function sourceTop(source, target) {\n    return 0; // FIX HERE\n  }\n\n  return sankey;\n}\n","import {linkHorizontal} from \"d3-shape\";\n\nfunction horizontalSource(d) {\n  return [d.source.x1, d.y0];\n}\n\nfunction horizontalTarget(d) {\n  return [d.target.x0, d.y1];\n}\n\nexport default function() {\n  return linkHorizontal()\n      .source(horizontalSource)\n      .target(horizontalTarget);\n}\n","import { LinkDataPoint } from '../../types/d3-sankey'\n\nconst getCurrentWidth = (currentCount: number, all: number, width: number | undefined) => {\n  if (!width || !currentCount) return 0\n  const fraction = currentCount / all\n  return width * fraction\n}\n\nconst getSelectionWidth = (all: number, selected: number, width: number, isBrush: boolean) => {\n  if (width === 0) return 0\n  const selectedFraction = selected / all\n  return width * (isBrush ? selectedFraction : 1 - selectedFraction)\n}\n\n/**\n Get a shift of previously processed values\n * @param valuesCount - list of values counts or undefined, if there is no color category selected\n * @param all - count of all values\n * @param width - width of all-values line\n * @param idx - index of current value\n */\nconst getYFormerShift = (valuesCount: number[] | undefined, all: number, width: number, idx: number) => {\n  if (!valuesCount) return 0\n  const formerCount = valuesCount.slice(0, idx).reduce((sum, curr) => sum + curr, 0)\n  const formerFraction = formerCount / all\n  return width * formerFraction\n}\n\nconst getShift = (\n  currentCount: number,\n  selected: number,\n  all: number,\n  width: number,\n  valuesCount: number[] | undefined,\n  idx: number,\n  isBrush: boolean,\n  isOverlay: boolean,\n): number => {\n  if (!currentCount) return 0\n\n  const currentWidth = getCurrentWidth(currentCount, all, width)\n\n  const yFormerShift = getYFormerShift(valuesCount, all, width, idx)\n  const yCatShift = -width / 2 + yFormerShift + currentWidth / 2\n\n  if (isOverlay) {\n    return yCatShift\n  }\n  const selectedFraction = selected / currentCount\n  const yBrushShift = (currentWidth * (isBrush ? -1 * (1 - selectedFraction) : selectedFraction)) / 2\n  return yCatShift + yBrushShift\n}\n\nexport const getStrokeWidth = (d: LinkDataPoint, idx: number, isBrush: boolean, isOverlay?: boolean): number => {\n  const currentCount = d.catAttributeValuesCounts ? d.catAttributeValuesCounts[idx] : d.value\n  const currentWidth = getCurrentWidth(currentCount, d.value, d.width)\n\n  if (!isBrush && isOverlay) return currentWidth\n  return getSelectionWidth(currentCount, d.selected[idx], currentWidth, isBrush)\n}\n\nexport const getYShift = (d: LinkDataPoint, idx: number, isBrush: boolean, isOverlay: boolean): number => {\n  const currentCount = d.catAttributeValuesCounts ? d.catAttributeValuesCounts[idx] : d.value\n  if (!d.width) return 0\n\n  return getShift(currentCount, d.selected[idx], d.value, d.width, d.catAttributeValuesCounts, idx, isBrush, isOverlay)\n}\n","import { SxProps } from '@mui/system'\n\nimport { Opacity } from '../../../../types/styling/Opacity'\n\nimport { important } from '../../../../helpers/stringGetters'\n\nimport { PLOT_COLORS } from '../../../../styles/colors'\n\nexport const SELECTED_CLASS = `parallelSetsBundledSelected`\nexport const TABS_CLASS = `psbTabs`\nexport const LINE_NOT_SELECTED_CLASS = `psbLine`\nexport const CONNECTORS_CLASS = `psbConnector`\nexport const INNER_TEXT_CLASS = `psbInnerText`\nexport const TABS_SELECTED_CLASS = `psbTabsSelected`\n\nexport const getParallelSetsBundledStyle = (\n  opacity: Opacity,\n  isBrushActive: boolean,\n  brushColor: string,\n  fontColorInner: string,\n): SxProps => ({\n  '& svg': {\n    bgcolor: PLOT_COLORS.backgroundColor,\n    font: `12px sans-serif`,\n  },\n  '& .psbConnector': {\n    fill: `none`,\n  },\n  '& .psbTabs': {\n    cursor: `pointer`,\n    '&.psbTabsSelected': {\n      fill: important(brushColor),\n    },\n  },\n  '& path': {\n    '&.parallelSetsBundledSelected': {\n      opacity: opacity[1] / 100,\n      stroke: important(brushColor),\n    },\n    '&.psbLine': {\n      opacity: !isBrushActive ? opacity[0] / 100 : opacity[2] / 100,\n      mixBlendMode: `multiply`,\n    },\n  },\n  '& .psbInnerText': {\n    fill: fontColorInner,\n  },\n})\n","import { useCallback, useEffect, useMemo, useRef, useState, VoidFunctionComponent } from 'react'\nimport { scaleOrdinal, select } from 'd3'\nimport { Box } from '@mui/material'\nimport { sankey, sankeyLinkHorizontal } from '../../../../../lib/d3-sankey'\n\nimport { VisualizationView } from '../../../../types/views/VisualizationView'\nimport { Brushable } from '../../../../types/brushing/Brushable'\nimport { ParallelSetsBundledSettings } from '../../../../types/views/settings/ParallelSetsBundledSettings'\nimport { DataLink, NominalValueProperties } from '../../../../types/data/data'\nimport { Margin } from '../../../../types/styling/Margin'\nimport { NodeData, NodeDataPoint } from '../../../../types/d3-sankey'\nimport { DataEach, Extent, OnMouseEvent } from '../../../../types/d3-types'\n\nimport { getTogglingYShift, TOGGLE_Y_SHIFT } from '../../../../helpers/views/togglingYShift'\nimport {\n  getAttributeFormatted,\n  getEverything,\n  getLinkDataPointValuesWithLabel,\n  getNodeDataPointValuesWithLabel,\n  getSpaced,\n  getTranslate,\n} from '../../../../helpers/stringGetters'\nimport { getGraph, getNeighborAttributes, getNominalValuesRecord } from '../../../../helpers/data/data'\nimport { onMouseOutTooltip, onMouseOverTooltip } from '../../../../helpers/d3/tooltip'\nimport { getStrokeWidth, getYShift } from '../../../../helpers/data/lineShifts'\n\nimport { ViewType } from '../../../../constants/views-general/ViewType'\nimport { CONTAINER_EMPTY, CONTAINER_SAVE_ID, SAVE_ID } from '../../../../constants/save/save'\nimport { MIN_PARALLEL_SETS_BUNDLED_ATTRIBUTE_COUNT } from '../../../../constants/views/parallelSetsBundled'\nimport { SVG } from '../../../../constants/svg'\nimport { AXES_TEXT_CLASS } from '../../../../components-style/content/views/parallel-coordinates/parallelCoordinatesStyle'\nimport { MouseAction } from '../../../../constants/actions/MouseAction'\nimport { ParallelSetsBrushingType } from '../../../../constants/brushing-type/ParallelSetsBrushingType'\n\nimport { PARALLEL_SETS_BUNDLED_TEXT } from '../../../../text/views-and-settings/parallelSetsBundled'\n\nimport { PLOT_FONT_BOX_SIZE } from '../../../../styles/font'\n\nimport { getViewsNotDisplayStyle } from '../../../../components-style/content/views/getViewsNotDisplayStyle'\nimport {\n  CONNECTORS_CLASS,\n  getParallelSetsBundledStyle,\n  INNER_TEXT_CLASS,\n  LINE_NOT_SELECTED_CLASS,\n  SELECTED_CLASS,\n  TABS_CLASS,\n  TABS_SELECTED_CLASS,\n} from '../../../../components-style/content/views/parallel-sets-bundled/parallelSetsBundledStyle'\n\nexport interface ParallelSetsBundledProps extends VisualizationView, Brushable, ParallelSetsBundledSettings {}\n\nexport const CONNECTORS = `CONNECTORS`\nexport const TEXT = `TEXT`\nexport const AXES_TEXT = `AXES_TEXT`\nexport const TABS = `TABS`\n\nexport const TEXT_SHIFT = 2\n\nexport const ParallelSetsBundled: VoidFunctionComponent<ParallelSetsBundledProps> = ({\n  width,\n  height,\n  dataset,\n  displayAttributes,\n  isBrushingActive,\n  colorCategory,\n  margins,\n  opacity,\n  brushColor,\n  redrawTime,\n  setComponentBrushing,\n  refreshViews,\n  tabWidth,\n  tabSpacing,\n  tabGap,\n  brushingType,\n  fontColor,\n  categoryAttribute,\n}) => {\n  const margin = useMemo(() => new Margin(...margins), [margins])\n  const component = useRef<SVGGElement>(null)\n  const upperPadding = TOGGLE_Y_SHIFT + PLOT_FONT_BOX_SIZE\n  const [innerWidth, innerHeight] = [width - margin.width, height - margin.height - upperPadding]\n\n  const [nominalValuesRecord, setNominalValuesRecord] = useState(getNominalValuesRecord(dataset))\n  // redraw time needed because it is changing selected\n  useEffect(() => {\n    setNominalValuesRecord(getNominalValuesRecord(dataset))\n  }, [dataset, redrawTime, displayAttributes])\n\n  const createParallelSetsBundled = useCallback(() => {\n    const node = component.current\n    if (!node) return\n    const svg = select(node)\n    svg.selectAll(getEverything()).remove() // clear\n\n    const displayPairs = getNeighborAttributes(displayAttributes)\n    const pairWidth = (innerWidth - (displayAttributes.length - 2) * tabSpacing) / (displayAttributes.length - 1)\n    const valueCounts = displayAttributes.map((att) => nominalValuesRecord[att]).map((arr) => arr.length)\n    const spacesAllMax = Math.max(...valueCounts) - 1\n    const isLeft = (d: NodeData): boolean => Number(d.x0) < pairWidth / 2\n\n    const half = (displayAttributes.length - 1) / 2\n\n    // brushing\n    const onMouseClick: OnMouseEvent<NodeDataPoint> = (_, { attribute, name, count, countSelected }) => {\n      dataset.forEach((data) => {\n        if (String(data[attribute]) === name) {\n          data.selected = count !== countSelected\n        }\n      })\n\n      if (dataset.every((data) => !data.selected)) {\n        setComponentBrushing(null)\n        return\n      }\n      setComponentBrushing(ViewType.ParallelSetsBundled)\n      refreshViews()\n    }\n\n    displayPairs.forEach((displayPair, pairIdx) => {\n      const spacesPairMax = Math.max(valueCounts[pairIdx], valueCounts[pairIdx + 1]) - 1\n      const pairExtent: Extent = [\n        [0, 0],\n        [pairWidth, innerHeight - (spacesAllMax - spacesPairMax) * tabGap],\n      ]\n\n      const color = scaleOrdinal(colorCategory)\n      const sankeyLayout = sankey<NominalValueProperties, DataLink>()\n        .nodeWidth(tabWidth)\n        .nodePadding(tabGap)\n        .nodeSort((a, b) => a.order - b.order)\n        .extent(pairExtent)\n\n      const graph = getGraph(dataset, categoryAttribute, nominalValuesRecord, displayPair[0], displayPair[1])\n      const { nodes, links } = sankeyLayout(graph)\n      const getPath = sankeyLinkHorizontal()\n\n      const xShift = pairIdx * (pairWidth + tabSpacing)\n      svg\n        .append(SVG.elements.g)\n        .selectAll(TABS)\n        .data(nodes)\n        .enter()\n        .append(SVG.elements.rect)\n        .attr(SVG.attributes.class, (node) =>\n          node.count === node.countSelected ? getSpaced(TABS_CLASS, TABS_SELECTED_CLASS) : TABS_CLASS,\n        )\n        .attr(SVG.attributes.x, (node) => Number(node.x0) + xShift)\n        .attr(SVG.attributes.y, (node) => Number(node.y0))\n        .attr(SVG.attributes.height, (node) => Number(node.y1) - Number(node.y0))\n        .attr(SVG.attributes.width, (node) => Number(node.x1) - Number(node.x0))\n        .on(MouseAction.mouseOver, onMouseOverTooltip(getNodeDataPointValuesWithLabel))\n        .on(MouseAction.mouseOut, onMouseOutTooltip)\n        .on(MouseAction.click, onMouseClick)\n\n      // connectors\n      const connectors = svg\n        .append(SVG.elements.g)\n        .attr(SVG.attributes.class, CONNECTORS_CLASS)\n        .attr(SVG.attributes.transform, getTranslate([pairIdx * (pairWidth + tabSpacing), 0]))\n        .selectAll(CONNECTORS)\n        .data(links)\n        .enter()\n\n      const colorCategories = categoryAttribute ? nominalValuesRecord[categoryAttribute].map((att) => att.name) : [`1`] // one category\n      const isOverlay = brushingType === ParallelSetsBrushingType.overlay\n      // for each value runs once\n      colorCategories.forEach((category, idx) => {\n        // base\n        connectors\n          .append(SVG.elements.path)\n          .attr(SVG.attributes.class, LINE_NOT_SELECTED_CLASS)\n          .attr(SVG.attributes.d, getPath)\n          .attr(SVG.attributes.stroke, color(category))\n          .attr(SVG.attributes.strokeWidth, (link) => getStrokeWidth(link, idx, false, isOverlay))\n          .attr(SVG.attributes.transform, (link) => getTranslate([0, getYShift(link, idx, false, isOverlay)]))\n          .on(MouseAction.mouseOver, onMouseOverTooltip(getLinkDataPointValuesWithLabel))\n          .on(MouseAction.mouseOut, onMouseOutTooltip)\n\n        // brushing\n        connectors\n          .append(SVG.elements.path)\n          .attr(SVG.attributes.class, SELECTED_CLASS)\n          .attr(SVG.attributes.d, getPath)\n          .attr(SVG.attributes.strokeWidth, (link) => getStrokeWidth(link, idx, true))\n          .attr(SVG.attributes.transform, (link) => getTranslate([0, getYShift(link, idx, true, isOverlay)]))\n          .on(MouseAction.mouseOver, onMouseOverTooltip(getLinkDataPointValuesWithLabel))\n          .on(MouseAction.mouseOut, onMouseOutTooltip)\n      })\n\n      const getTextVisible: DataEach<NodeData, SVGTextElement, number> = (node) => {\n        if (pairIdx === Math.floor(half)) return 1\n        if ((isLeft(node) && pairIdx > half) || (!isLeft(node) && pairIdx < half)) return 0\n        return 1\n      }\n\n      // line text\n      svg\n        .append(SVG.elements.g)\n        .selectAll(TEXT)\n        .data(nodes)\n        .enter()\n        .append(SVG.elements.text)\n        .attr(SVG.attributes.class, INNER_TEXT_CLASS)\n        .attr(\n          SVG.attributes.x,\n          (node) => (isLeft(node) ? Number(node.x1) + TEXT_SHIFT : Number(node.x0) - TEXT_SHIFT) + xShift,\n        )\n        .attr(SVG.attributes.y, (node) => (Number(node.y1) + Number(node.y0)) / 2)\n        .attr(SVG.attributes.textAnchor, (node) => (isLeft(node) ? SVG.values.start : SVG.values.end))\n        .style(SVG.style.opacity, getTextVisible)\n        .text((node) => getAttributeFormatted(node.name))\n    })\n    // axis text\n    svg\n      .append(SVG.elements.g)\n      .selectAll(AXES_TEXT)\n      .data(displayAttributes)\n      .enter()\n      .append(SVG.elements.text)\n      .attr(SVG.attributes.textAnchor, SVG.values.middle)\n      .attr(SVG.attributes.x, (_, idx) => idx * (pairWidth + tabSpacing))\n      .attr(SVG.attributes.y, getTogglingYShift)\n      .text(getAttributeFormatted)\n      .attr(SVG.attributes.class, AXES_TEXT_CLASS)\n  }, [\n    displayAttributes,\n    innerWidth,\n    tabWidth,\n    nominalValuesRecord,\n    dataset,\n    setComponentBrushing,\n    refreshViews,\n    innerHeight,\n    tabGap,\n    colorCategory,\n    tabSpacing,\n    categoryAttribute,\n    brushingType,\n  ])\n\n  useEffect(\n    () => createParallelSetsBundled(),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n      displayAttributes,\n      innerWidth,\n      innerHeight,\n      colorCategory,\n      nominalValuesRecord,\n      tabWidth,\n      tabSpacing,\n      tabGap,\n      categoryAttribute,\n      brushingType,\n    ],\n  )\n\n  if (innerWidth < 0 || innerHeight < 0) return <Box />\n  if (displayAttributes.length >= MIN_PARALLEL_SETS_BUNDLED_ATTRIBUTE_COUNT) {\n    return (\n      <Box\n        sx={getParallelSetsBundledStyle(opacity, isBrushingActive, brushColor, fontColor)}\n        id={CONTAINER_SAVE_ID[ViewType.ParallelSetsBundled]}\n      >\n        <svg width={width} height={height} id={SAVE_ID[ViewType.ParallelSetsBundled]}>\n          <g\n            ref={component}\n            width={innerWidth}\n            height={innerHeight}\n            transform={getTranslate([margin.left, margin.top + upperPadding])}\n          />\n        </svg>\n      </Box>\n    )\n  }\n  return (\n    <Box sx={getViewsNotDisplayStyle(width, height, margin)} id={CONTAINER_EMPTY[ViewType.ParallelSetsBundled]}>\n      {PARALLEL_SETS_BUNDLED_TEXT.unavailable}\n    </Box>\n  )\n}\n","import { VisualizationView } from '../../types/views/VisualizationView'\nimport { Brushable } from '../../types/brushing/Brushable'\nimport { SettingsType } from '../../types/views/settings/Settings'\nimport { ParallelCoordinatesSettings } from '../../types/views/settings/ParallelCoordinatesSettings'\nimport { ScatterPlotMatrixSettings } from '../../types/views/settings/ScatterPlotMatrixSettings'\nimport { GlyphsSettings } from '../../types/views/settings/GlyphsSettings'\nimport { ScatterPlotGlyphsSettings } from '../../types/views/settings/ScatterPlotGlyphsSettings'\nimport { DataTableSettings } from '../../types/views/settings/DataTableSettings'\nimport { ParallelSetsBundledSettings } from '../../types/views/settings/ParallelSetsBundledSettings'\n\nimport { ParallelCoordinates } from '../../components/content/views/parallel-coordinates/ParallelCoordinates'\nimport { ScatterPlotMatrix } from '../../components/content/views/scatter-plot-matrix/ScatterPlotMatrix'\nimport { Glyphs } from '../../components/content/views/glyphs/Glyphs'\nimport { ScatterPlotGlyphs } from '../../components/content/views/scatter-plot-glyphs/ScatterPlotGlyphs'\nimport { DataTable } from '../../components/content/views/data-table/DataTable'\nimport { ParallelSetsBundled } from '../../components/content/views/parallel-sets-bundeled/ParallelSetsBundled'\n\nimport { ViewType } from './ViewType'\n\nexport const VIEW_BORDER_SIZE = 5\n\ntype ViewElementFunction = (\n  props: Brushable & VisualizationView,\n  settings: SettingsType,\n  showFilter?: boolean,\n) => JSX.Element\n\nexport const getViewRecord: Record<ViewType, ViewElementFunction> = {\n  [ViewType.Glyphs]: (p, s) => <Glyphs {...p} {...(s as GlyphsSettings)} />,\n  [ViewType.ParallelCoordinates]: (p, s) => <ParallelCoordinates {...p} {...(s as ParallelCoordinatesSettings)} />,\n  [ViewType.ScatterPlotMatrix]: (p, s) => <ScatterPlotMatrix {...p} {...(s as ScatterPlotMatrixSettings)} />,\n  [ViewType.ScatterPlotGlyphs]: (p, s) => <ScatterPlotGlyphs {...p} {...(s as ScatterPlotGlyphsSettings)} />,\n  [ViewType.ParallelSetsBundled]: (p, s) => <ParallelSetsBundled {...p} {...(s as ParallelSetsBundledSettings)} />,\n  [ViewType.DataTable]: (p, s, f) => <DataTable {...p} {...(s as DataTableSettings)} showFilter={!!f} />,\n}\n","import { VoidFunctionComponent } from 'react'\nimport { Box } from '@mui/material'\n\nimport { VisualizationView } from '../../../types/views/VisualizationView'\nimport { Brushable } from '../../../types/brushing/Brushable'\nimport { Settings } from '../../../types/views/settings/Settings'\n\nimport { ViewType } from '../../../constants/views-general/ViewType'\nimport { VIEW_BORDER_SIZE, getViewRecord } from '../../../constants/views-general/view'\n\nimport { getViewBoxStyle } from '../../../components-style/content/views/viewStyle'\n\nexport interface ViewProps extends Brushable, VisualizationView {\n  viewType: ViewType\n  settings: Settings\n  brushColor: string\n  showFilter?: boolean\n}\n\nexport const View: VoidFunctionComponent<ViewProps> = ({\n  width,\n  height,\n  viewType,\n  settings,\n  showFilter,\n  ...dataProps\n}) => {\n  const graph = getViewRecord[viewType]\n  const settingsCurr = settings[viewType]\n  if (!settingsCurr) return null\n  return (\n    <Box sx={getViewBoxStyle(width, height)}>\n      {graph({ width, height: height - VIEW_BORDER_SIZE, ...dataProps }, settingsCurr, showFilter)}\n    </Box>\n  )\n}\n","import { SxProps } from '@mui/system'\n\nexport const getViewBoxStyle = (w: number, h: number): SxProps => ({\n  width: w,\n  height: h,\n  overflowX: `hidden`,\n  overflowY: `auto`,\n})\n","export const GRID_ITEM_TEXT = {\n  tooltipClose: `Close`,\n  glyphAxes: `Glyph axes from top, clockwise`,\n}\n","import { SxProps } from '@mui/system'\n\nimport { px } from '../../../helpers/stringGetters'\n\nimport { BUTTON_COLORS } from '../../../styles/colors'\n\nconst inlineButton = {\n  margin: 0,\n  padding: px(0, 4),\n  minWidth: 0,\n}\n\nexport const inlineButtonStyles: Record<string, SxProps> = {\n  button: {\n    ...inlineButton,\n    color: BUTTON_COLORS.buttonInlined,\n  },\n  buttonClose: {\n    ...inlineButton,\n    color: BUTTON_COLORS.buttonClose,\n  },\n  buttonActive: {\n    color: BUTTON_COLORS.buttonInlinedFontOn,\n    bgcolor: BUTTON_COLORS.buttonInlinedBgOn,\n    borderRadius: px(5),\n  },\n}\n","import React, { VoidFunctionComponent } from 'react'\nimport { Button, Tooltip } from '@mui/material'\nimport { Close } from '@mui/icons-material'\n\nimport { GRID_ITEM_TEXT } from '../../../../text/gridItemText'\n\nimport { inlineButtonStyles } from '../../../../components-style/content/common/inlineButtonStyles'\n\ninterface ViewCloseButtonProps {\n  onRemove: () => void\n}\n\nexport const ViewCloseButton: VoidFunctionComponent<ViewCloseButtonProps> = ({ onRemove }) => (\n  <Button onClick={onRemove} sx={inlineButtonStyles.buttonClose}>\n    <Tooltip title={GRID_ITEM_TEXT.tooltipClose}>\n      <Close />\n    </Tooltip>\n  </Button>\n)\n","import { SxProps } from '@mui/system'\n\nimport { px } from '../../../helpers/stringGetters'\n\nimport { DIALOG_COLORS } from '../../../styles/colors'\n\nexport const helpDialogStyle: Record<string, SxProps> = {\n  dialog: {\n    '& .MuiPaper-root': {\n      textAlign: `justify`,\n    },\n  },\n  iconedHeaderBox: {\n    display: `flex`,\n    justifyContent: `space-between`,\n    alignItems: `flex-end`,\n    '& svg': {\n      fontSize: px(20),\n      opacity: 0.5,\n      paddingBottom: px(2),\n    },\n  },\n  header: {\n    fontWeight: `bold`,\n    fontSize: px(16),\n    paddingTop: px(10),\n  },\n  brushContainer: {\n    minWidth: px(0),\n    display: `flex`,\n    justifyContent: `space-between`,\n    margin: px(2),\n    flexWrap: `wrap`,\n  },\n  topText: {\n    padding: px(8, 0, 6),\n    color: DIALOG_COLORS.font,\n  },\n  text: {\n    padding: px(9, 10, 5),\n    color: DIALOG_COLORS.font,\n  },\n  image: {\n    height: px(130),\n    width: px(238),\n  },\n  iconTextBox: {\n    display: `flex`,\n    alignItems: `flex-start`,\n    '& p': {\n      padding: px(1, 5, 4),\n    },\n  },\n  inlineIcon: {\n    fontSize: px(15),\n    marginRight: px(3),\n  },\n}\n","import { useState, VoidFunctionComponent } from 'react'\nimport {\n  Box,\n  Button,\n  CardMedia,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  Divider,\n  Tooltip,\n  Typography,\n} from '@mui/material'\nimport { Brush, Help, Settings } from '@mui/icons-material'\n\nimport { ViewType } from '../../../../constants/views-general/ViewType'\nimport { BUTTON_VARIANT, COMPONENT_TYPE, DIALOG_MAX_WIDTH } from '../../../../constants/mui'\nimport { BRUSHING_IMAGES } from '../../../../constants/public-path'\n\nimport { VIEW_INFO_TEXT } from '../../../../text/siteText'\nimport { INFO_DIALOG_TEXT, VIEW_NAMES } from '../../../../text/views-and-settings/common'\n\nimport { inlineButtonStyles } from '../../../../components-style/content/common/inlineButtonStyles'\nimport { helpDialogStyle } from '../../../../components-style/content/common/helpDialogStyle'\n\nexport interface ViewHelpButtonProps {\n  viewType: ViewType\n}\n\nexport const ViewHelpButton: VoidFunctionComponent<ViewHelpButtonProps> = ({ viewType }) => {\n  const [isDialogOpen, setIsDialogOpen] = useState(false)\n\n  return (\n    <>\n      <Dialog\n        onClose={() => setIsDialogOpen(false)}\n        open={isDialogOpen}\n        sx={helpDialogStyle.dialog}\n        fullWidth\n        maxWidth={DIALOG_MAX_WIDTH.m}\n      >\n        <DialogTitle>{VIEW_NAMES[viewType]}</DialogTitle>\n        <Divider />\n        <DialogContent>\n          <DialogContentText sx={helpDialogStyle.text}>{INFO_DIALOG_TEXT[viewType].description}</DialogContentText>\n          <Box sx={helpDialogStyle.iconedHeaderBox}>\n            <Typography sx={helpDialogStyle.header}>{VIEW_INFO_TEXT.dialog.brushing}</Typography>\n            <Brush />\n          </Box>\n          <Divider />\n          <Box sx={helpDialogStyle.brushContainer}>\n            <CardMedia\n              component={COMPONENT_TYPE.image}\n              sx={helpDialogStyle.image}\n              image={BRUSHING_IMAGES[viewType]}\n              alt={viewType}\n            />\n            <DialogContentText sx={helpDialogStyle.text}>\n              {INFO_DIALOG_TEXT[viewType].descriptionBrushing}\n            </DialogContentText>\n          </Box>\n          <Box sx={helpDialogStyle.iconedHeaderBox}>\n            <Typography sx={helpDialogStyle.header}>{VIEW_INFO_TEXT.dialog.settings}</Typography>\n            <Settings />\n          </Box>\n          <Divider />\n          <DialogContentText sx={helpDialogStyle.text}>\n            {INFO_DIALOG_TEXT[viewType].descriptionSettings}\n          </DialogContentText>\n          <DialogContentText sx={helpDialogStyle.text}>\n            {INFO_DIALOG_TEXT[viewType].descriptionSettingsMore}\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setIsDialogOpen(false)} variant={BUTTON_VARIANT.contained} autoFocus>\n            {VIEW_INFO_TEXT.dialog.close}\n          </Button>\n        </DialogActions>\n      </Dialog>\n      <Button onClick={() => setIsDialogOpen(true)} sx={inlineButtonStyles.button}>\n        <Tooltip title={VIEW_INFO_TEXT.buttonLabel}>\n          <Help />\n        </Tooltip>\n      </Button>\n    </>\n  )\n}\n","import { ViewType } from '../../constants/views-general/ViewType'\nimport { CONTAINER_EMPTY, CONTAINER_SAVE_ID, SAVE_ID } from '../../constants/save/save'\n\nconst xmlnsSvg = `http://www.w3.org/2000/svg`\nconst preface = `<?xml version=\"1.0\" standalone=\"no\"?>\\r\\n`\nconst options = { type: `image/svg+xml;charset=utf-8` }\nconst linkElement = `a`\n\nexport const saveSvgToFile = (svgEl: Element, fileName: string): void => {\n  svgEl.setAttribute(`xmlns`, xmlnsSvg)\n\n  const svgBlob = new Blob([preface, svgEl.outerHTML], options)\n  const svgUrl = URL.createObjectURL(svgBlob)\n\n  // create download link element, append, click and remove\n  const downloadLink = document.createElement(linkElement)\n  downloadLink.href = svgUrl\n  downloadLink.download = fileName\n  document.body.appendChild(downloadLink)\n  downloadLink.click()\n  document.body.removeChild(downloadLink)\n}\n\ntype StyleNode = { sheet: CSSStyleSheet }\n\nexport const saveSvg = (viewType: ViewType): void => {\n  const svgContainer = document.querySelector(`#${CONTAINER_SAVE_ID[viewType]}`)\n  const svg = document.querySelector(`#${SAVE_ID[viewType]}`)\n  if (!svgContainer || !svg) {\n    console.error(`Identifier class missing, saving is not possible`)\n    return\n  }\n\n  const containerClass = Array.from(svgContainer.classList).filter((cls) => !cls.includes(`MuiBox`))[0]\n  const newStyleNodes = ([...document.querySelectorAll(`[data-emotion]`)] as unknown as Array<StyleNode>)\n    .flatMap(({ sheet }) => [...sheet.cssRules].map((rules) => rules.cssText))\n    .filter((sheet) => sheet.includes(`.${containerClass}`))\n    .map((sheet) => sheet.replace(`.${containerClass} `, ``))\n    .map((style) => {\n      const node = document.createElement(`style`)\n      node.innerHTML = style\n      svg.insertBefore(node, svg.firstChild)\n      return node\n    })\n  saveSvgToFile(svg, viewType)\n\n  newStyleNodes.forEach((node) => node.remove())\n}\n\nexport const getSaveIsDisabled = (viewType: ViewType): boolean =>\n  document.querySelector(`#${CONTAINER_EMPTY[viewType]}`) !== null &&\n  document.querySelector(`#${SAVE_ID[viewType]}`) === null\n","import { VoidFunctionComponent } from 'react'\nimport { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Divider } from '@mui/material'\n\nimport { BUTTON_VARIANT } from '../../../../constants/mui'\n\nexport interface InformationDialogProps {\n  isOpen: boolean\n  title?: string\n  description?: string\n  onConfirm: () => void\n  onClose: () => void\n  confirmText: string\n  cancelText: string\n}\n\nexport const ConfirmationDialog: VoidFunctionComponent<InformationDialogProps> = ({\n  isOpen,\n  title,\n  description,\n  onConfirm,\n  onClose,\n  confirmText,\n  cancelText,\n}) => (\n  <Dialog onClose={onClose} open={isOpen}>\n    <DialogTitle>{title}</DialogTitle>\n    <Divider />\n    <DialogContent>\n      <DialogContentText>{description}</DialogContentText>\n    </DialogContent>\n    <DialogActions>\n      <Button onClick={onConfirm} variant={BUTTON_VARIANT.contained} autoFocus>\n        {confirmText}\n      </Button>\n      <Button onClick={onClose} variant={BUTTON_VARIANT.outlined}>\n        {cancelText}\n      </Button>\n    </DialogActions>\n  </Dialog>\n)\n","import { useCallback, useState, VoidFunctionComponent } from 'react'\nimport { Button, Tooltip } from '@mui/material'\nimport { Save } from '@mui/icons-material'\n\nimport { getSaveIsDisabled, saveSvg } from '../../../../helpers/d3/saveSvg'\n\nimport { ViewType } from '../../../../constants/views-general/ViewType'\n\nimport { SAVE_TEXT } from '../../../../text/siteText'\n\nimport { inlineButtonStyles } from '../../../../components-style/content/common/inlineButtonStyles'\n\nimport { ConfirmationDialog } from '../../common/dialogs/ConfirmationDialog'\n\nexport interface ViewSaveButtonProps {\n  viewType: ViewType\n}\n\nexport const ViewSaveButton: VoidFunctionComponent<ViewSaveButtonProps> = ({ viewType }) => {\n  const [isDialogOpen, setIsDialogOpen] = useState(false)\n  const openDialog = useCallback(() => setIsDialogOpen(true), [])\n  const closeDialog = useCallback(() => setIsDialogOpen(false), [])\n\n  const onConfirm = useCallback(() => {\n    saveSvg(viewType)\n    setIsDialogOpen(false)\n  }, [viewType])\n\n  return (\n    <>\n      <ConfirmationDialog\n        isOpen={isDialogOpen}\n        title={SAVE_TEXT.header}\n        description={SAVE_TEXT.description}\n        onConfirm={onConfirm}\n        onClose={closeDialog}\n        confirmText={SAVE_TEXT.confirm}\n        cancelText={SAVE_TEXT.cancel}\n      />\n      <Button onClick={openDialog} disabled={getSaveIsDisabled(viewType)} sx={inlineButtonStyles.button}>\n        <Tooltip title={SAVE_TEXT.save}>\n          <Save />\n        </Tooltip>\n      </Button>\n    </>\n  )\n}\n","import React, { VoidFunctionComponent } from 'react'\nimport { Tooltip, Typography } from '@mui/material'\nimport { RotateRight } from '@mui/icons-material'\n\nimport { SelectableDataType } from '../../../../types/data/data'\n\nimport { getDisplayAttributesInParentheses } from '../../../../helpers/stringGetters'\n\nimport { GRID_ITEM_TEXT } from '../../../../text/gridItemText'\n\nimport { gridItemStyle } from '../../../../components-style/content/views/gridItemStyle'\n\nexport interface GlyphAxesTextProps {\n  displayAttributes: Array<keyof SelectableDataType>\n}\n\nexport const GlyphAxesText: VoidFunctionComponent<GlyphAxesTextProps> = ({ displayAttributes }) => (\n  <Tooltip title={`${GRID_ITEM_TEXT.glyphAxes}: ${getDisplayAttributesInParentheses(displayAttributes)}`}>\n    <Typography sx={gridItemStyle.text}>\n      <RotateRight sx={gridItemStyle.textIcon} />\n      {getDisplayAttributesInParentheses(displayAttributes)}\n    </Typography>\n  </Tooltip>\n)\n","import { Dispatch, SetStateAction, VoidFunctionComponent } from 'react'\nimport { Button, Tooltip } from '@mui/material'\nimport { FilterList } from '@mui/icons-material'\n\nimport { BUTTON_VARIANT } from '../../../../constants/mui'\n\nimport { TOP_TOOLBAR_TEXT } from '../../../../text/siteText'\n\nimport { inlineButtonStyles } from '../../../../components-style/content/common/inlineButtonStyles'\n\nexport interface DataFilterButtonProps {\n  showFilter?: boolean\n  setShowFilter: Dispatch<SetStateAction<boolean | undefined>>\n}\n\nexport const DataFilterButton: VoidFunctionComponent<DataFilterButtonProps> = ({ showFilter, setShowFilter }) => (\n  <Button variant={BUTTON_VARIANT.text} onClick={() => setShowFilter(!showFilter)} sx={inlineButtonStyles.button}>\n    <Tooltip title={TOP_TOOLBAR_TEXT.filter}>\n      <FilterList sx={showFilter ? inlineButtonStyles.buttonActive : {}} />\n    </Tooltip>\n  </Button>\n)\n","import React, { ComponentProps, useState, VoidFunctionComponent } from 'react'\nimport { useSize } from 'react-use'\nimport { Box, Typography } from '@mui/material'\n\nimport { ViewType } from '../../../constants/views-general/ViewType'\nimport { DRAG_HANDLE, GRID_HEADER_HEIGHT, VIEW_DEFAULT_SIZE } from '../../../constants/layout/layout'\n\nimport { gridItemStyle } from '../../../components-style/content/views/gridItemStyle'\n\nimport { View } from '../views/View'\nimport { ViewCloseButton } from './items/ViewCloseButton'\nimport { ViewHelpButton } from './items/ViewHelpButton'\nimport { ViewSaveButton } from './items/ViewSaveButton'\nimport { GlyphAxesText } from './items/GlyphAxesText'\nimport { DataFilterButton } from './items/DataFilterButton'\n\ntype Props = Omit<ComponentProps<typeof View>, `width` | `height`> & {\n  title: string\n  onRemove: () => void\n  isResizeFinished: boolean\n}\n\nexport const GridItem: VoidFunctionComponent<Props> = ({ onRemove, title, isResizeFinished, viewType, ...rest }) => {\n  const [showFilter, setShowFilter] = useState<boolean | undefined>(undefined)\n  const contextButton =\n    viewType !== ViewType.DataTable ? (\n      <ViewSaveButton viewType={viewType} />\n    ) : (\n      <DataFilterButton showFilter={showFilter} setShowFilter={setShowFilter} />\n    )\n\n  const isGlyphs = (viewType === ViewType.Glyphs || viewType === ViewType.ScatterPlotGlyphs) && rest.settings[viewType]\n\n  const [sized] = useSize(\n    ({ width, height }) => (\n      <Box sx={gridItemStyle.gridItem}>\n        <Box sx={gridItemStyle.header} className={DRAG_HANDLE}>\n          <Box sx={gridItemStyle.textBox}>\n            <Typography>{title}</Typography>\n            {isGlyphs && <GlyphAxesText displayAttributes={rest.settings[viewType]!.displayAttributes} />}\n          </Box>\n          <Box sx={gridItemStyle.right}>\n            <ViewHelpButton viewType={viewType} />\n            {contextButton}\n            <ViewCloseButton onRemove={onRemove} />\n          </Box>\n        </Box>\n        {isResizeFinished && (\n          <View\n            width={width}\n            height={height - GRID_HEADER_HEIGHT}\n            viewType={viewType}\n            {...rest}\n            showFilter={showFilter}\n          />\n        )}\n      </Box>\n    ),\n    VIEW_DEFAULT_SIZE,\n  )\n\n  return sized\n}\n","import React, { Dispatch, VoidFunctionComponent, SetStateAction, useCallback, useState, memo, useEffect } from 'react'\nimport GridLayout, { WidthProvider } from 'react-grid-layout'\nimport { Box } from '@mui/material'\nimport { AddCircle } from '@mui/icons-material'\n\nimport { useWindowSize } from 'react-use'\nimport { Brushable } from '../../../types/brushing/Brushable'\nimport { SelectableDataType } from '../../../types/data/data'\nimport { GridLayoutItem, LayoutArray } from '../../../types/views/Grid'\nimport { Settings } from '../../../types/views/settings/Settings'\n\nimport { getClass } from '../../../helpers/stringGetters'\nimport { setDisplay } from '../../../helpers/d3/setDisplay'\n\nimport { brushView, brushViewType, isBrushView, isViewType, ViewType } from '../../../constants/views-general/ViewType'\nimport { COLUMNS_COUNT, DEFAULT_VIEW_DIMENSIONS, DRAG_HANDLE, ROW_HEIGHT } from '../../../constants/layout/layout'\nimport { TOOLTIP_CLASS } from '../../../constants/views-general/tooltip'\n\nimport { TOP_TOOLBAR_TEXT } from '../../../text/siteText'\nimport { VIEW_NAMES } from '../../../text/views-and-settings/common'\n\nimport { viewGridStyle } from '../../../components-style/content/views/viewGridStyle'\n\nimport { SettingsDrawer } from '../data-drawer/SettingsDrawer'\nimport { LayoutDialog } from '../top-toolbar/items/layout/LayoutDialog'\nimport { SelectionDialog } from '../common/dialogs/SelectionDialog'\nimport { GridItem } from './GridItem'\n\nexport interface ViewGridDataProps extends Brushable {\n  dataset: ReadonlyArray<SelectableDataType>\n}\n\nexport interface ViewGridProps extends ViewGridDataProps {\n  isDrawerOpen: boolean\n  isDetailsVisible: boolean\n  closeDrawer: () => void\n  cleanSelectedIfViewWasBrushing: (viewType: ViewType | brushViewType) => void\n  settings: Settings\n  setSettings: Dispatch<SetStateAction<Settings>>\n\n  isLayoutDialogOpen: boolean\n  setIsLayoutDialogOpen: Dispatch<SetStateAction<boolean>>\n  isAddViewDialogOpen: boolean\n  setIsAddViewDialogOpen: Dispatch<SetStateAction<boolean>>\n  layout: GridLayoutItem[]\n  setLayout: Dispatch<SetStateAction<GridLayoutItem[] | null>>\n  brushColor: string\n}\n\nconst ReactGridLayout = WidthProvider(GridLayout)\n\nconst BaseViewGrid: VoidFunctionComponent<ViewGridProps> = ({\n  isDrawerOpen,\n  closeDrawer,\n  cleanSelectedIfViewWasBrushing,\n  settings,\n  setSettings,\n  isAddViewDialogOpen,\n  setIsAddViewDialogOpen,\n  isLayoutDialogOpen,\n  setIsLayoutDialogOpen,\n  layout,\n  setLayout,\n  ...viewProps\n}) => {\n  const [viewResizing, setViewResizing] = useState<ViewType | null>(null)\n  const [lastLayout, setLastLayout] = useState(layout)\n  const { width: windowWidth, height: windowHeight } = useWindowSize()\n\n  useEffect(\n    () => () => {\n      if (layout !== null) setLastLayout(layout)\n    },\n    [layout],\n  )\n\n  useEffect(\n    () => () => {\n      cleanSelectedIfViewWasBrushing(brushView)\n    },\n    [windowWidth, windowHeight, cleanSelectedIfViewWasBrushing],\n  )\n\n  const updateLayout = useCallback(\n    (newLayout: LayoutArray) => {\n      if (!newLayout || layout.length === 0) return\n      const filteredLayout = newLayout.filter((item) => isViewType(item.i))\n      setLayout(filteredLayout as GridLayoutItem[])\n    },\n    [setLayout, layout],\n  )\n\n  const addView = useCallback(\n    (viewType: ViewType) => {\n      setIsAddViewDialogOpen(false)\n      setLayout((layout) => {\n        if (layout === null) return layout // should not happen\n        if (layout.find((item) => item.i === viewType)) return layout\n        const posY = layout.reduce((max, item) => Math.max(item.y, max), 0) + 1\n        return [...layout, { i: viewType, x: 0, y: posY, ...DEFAULT_VIEW_DIMENSIONS[viewType] }]\n      })\n    },\n    [setIsAddViewDialogOpen, setLayout],\n  )\n\n  const removeView = useCallback(\n    (viewType: ViewType) => {\n      setLayout((layout) => {\n        if (layout === null) return layout // should not happen\n        return layout.filter((item) => item.i !== viewType)\n      })\n    },\n    [setLayout],\n  )\n\n  setDisplay(viewProps.isDetailsVisible, TOOLTIP_CLASS)\n\n  const views = layout.map((item) => item.i)\n  const availableViews = Object.values(ViewType).filter((viewType) => !views.includes(viewType))\n  const dialogOptions = availableViews.map((key) => ({ key, label: VIEW_NAMES[key], icon: <AddCircle /> }))\n  return (\n    <Box>\n      <SelectionDialog\n        isOpen={isAddViewDialogOpen}\n        onClose={() => setIsAddViewDialogOpen(false)}\n        title={TOP_TOOLBAR_TEXT.addViewDialogTitle}\n        options={dialogOptions}\n        noOptionText={TOP_TOOLBAR_TEXT.noOption}\n        handleListItemClick={addView}\n      />\n      <LayoutDialog\n        isOpen={isLayoutDialogOpen}\n        setLayout={setLayout}\n        onClose={() => setIsLayoutDialogOpen(false)}\n        lastLayout={lastLayout}\n      />\n      <SettingsDrawer\n        isOpen={isDrawerOpen}\n        close={closeDrawer}\n        dataset={viewProps.dataset}\n        views={views}\n        settings={settings}\n        setSettings={setSettings}\n        cleanSelectedIfViewWasBrushing={cleanSelectedIfViewWasBrushing}\n      />\n      <Box sx={viewGridStyle.tooltip} className={TOOLTIP_CLASS} />\n      <ReactGridLayout\n        style={{ overflowX: `hidden` }}\n        onLayoutChange={updateLayout}\n        draggableHandle={getClass(DRAG_HANDLE)}\n        onResizeStart={(_, view) => {\n          const viewType = view.i as ViewType\n          if (isBrushView(viewType)) cleanSelectedIfViewWasBrushing(viewType)\n          setViewResizing(viewType)\n        }}\n        onResizeStop={() => setViewResizing(null)}\n        cols={COLUMNS_COUNT}\n        rowHeight={ROW_HEIGHT}\n        isResizable\n      >\n        {layout.map((view) => (\n          <Box key={view.i} data-grid={view}>\n            <GridItem\n              isResizeFinished={view.i !== viewResizing}\n              title={VIEW_NAMES[view.i]}\n              onRemove={() => {\n                cleanSelectedIfViewWasBrushing(view.i)\n                removeView(view.i)\n              }}\n              viewType={view.i}\n              settings={settings}\n              {...viewProps}\n            />\n          </Box>\n        ))}\n      </ReactGridLayout>\n    </Box>\n  )\n}\n\n// do not rerender if props not change\nexport const ViewGrid = memo(BaseViewGrid)\n","import { SxProps } from '@mui/system'\n\nimport { px } from '../../../helpers/stringGetters'\n\nimport { SITE_COLORS } from '../../../styles/colors'\n\nexport const emptyDataStyle: Record<string, SxProps> = {\n  content: {\n    display: `flex`,\n    flexDirection: `column`,\n    alignItems: `center`,\n  },\n  icon: {\n    marginRight: px(6),\n    opacity: 0.6,\n  },\n  text: {\n    paddingTop: px(40),\n    color: SITE_COLORS.font,\n  },\n  button: {\n    marginTop: px(45),\n    opacity: 0.7,\n  },\n}\n","import { useState, VoidFunctionComponent } from 'react'\nimport {\n  Box,\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  Divider,\n  Typography,\n} from '@mui/material'\nimport { AddCircle, AutoGraph, Brush, Dashboard, Help, Settings, SkipNext, UploadFile } from '@mui/icons-material'\n\nimport { TooltipSvg } from '../../../../icons/TooltipSvg'\nimport { BrushOffSvg } from '../../../../icons/BrushOffSvg'\n\nimport { EMPTY_DATA_TEXT } from '../../../text/siteText'\n\nimport { BUTTON_VARIANT, DIALOG_MAX_WIDTH } from '../../../constants/mui'\n\nimport { emptyDataStyle } from '../../../components-style/content/no-data/emptyDataStyle'\nimport { helpDialogStyle } from '../../../components-style/content/common/helpDialogStyle'\n\nexport const EmptyData: VoidFunctionComponent = () => {\n  const [isDialogOpen, setIsDialogOpen] = useState(false)\n\n  return (\n    <>\n      <Dialog\n        onClose={() => setIsDialogOpen(false)}\n        open={isDialogOpen}\n        sx={helpDialogStyle.dialog}\n        fullWidth\n        maxWidth={DIALOG_MAX_WIDTH.m}\n      >\n        <DialogTitle>{EMPTY_DATA_TEXT.helpDialog.header}</DialogTitle>\n        <Divider />\n        <DialogContent>\n          <DialogContentText sx={helpDialogStyle.topText}>{EMPTY_DATA_TEXT.helpDialog.description}</DialogContentText>\n          <DialogContentText sx={helpDialogStyle.topText}>\n            <AutoGraph sx={helpDialogStyle.inlineIcon} />\n            {EMPTY_DATA_TEXT.helpDialog.sample}\n          </DialogContentText>\n          <DialogContentText sx={helpDialogStyle.topText}>\n            <UploadFile sx={helpDialogStyle.inlineIcon} />\n            {EMPTY_DATA_TEXT.helpDialog.file}\n          </DialogContentText>\n          <DialogContentText sx={helpDialogStyle.topText}>\n            <Help sx={helpDialogStyle.inlineIcon} />\n            {EMPTY_DATA_TEXT.helpDialog.viewsHelp}\n          </DialogContentText>\n\n          <Typography sx={helpDialogStyle.header}>{EMPTY_DATA_TEXT.helpDialog.subHeader}</Typography>\n          <Divider />\n\n          <Box sx={helpDialogStyle.iconTextBox}>\n            <AddCircle />\n            <DialogContentText sx={helpDialogStyle.text}>{EMPTY_DATA_TEXT.helpDialog.add}</DialogContentText>\n          </Box>\n          <Box sx={helpDialogStyle.iconTextBox}>\n            <Dashboard />\n            <DialogContentText sx={helpDialogStyle.text}>{EMPTY_DATA_TEXT.helpDialog.layout}</DialogContentText>\n          </Box>\n          <Box sx={helpDialogStyle.iconTextBox}>\n            <TooltipSvg />\n            <DialogContentText sx={helpDialogStyle.text}>{EMPTY_DATA_TEXT.helpDialog.tooltip}</DialogContentText>\n          </Box>\n          <Box sx={helpDialogStyle.iconTextBox}>\n            <SkipNext />\n            <DialogContentText sx={helpDialogStyle.text}>{EMPTY_DATA_TEXT.helpDialog.skip}</DialogContentText>\n          </Box>\n          <Box sx={helpDialogStyle.iconTextBox}>\n            <Brush />\n            <DialogContentText sx={helpDialogStyle.text}>{EMPTY_DATA_TEXT.helpDialog.brush}</DialogContentText>\n          </Box>\n          <Box sx={helpDialogStyle.iconTextBox}>\n            <BrushOffSvg />\n            <DialogContentText sx={helpDialogStyle.text}>{EMPTY_DATA_TEXT.helpDialog.brushOff}</DialogContentText>\n          </Box>\n          <Box sx={helpDialogStyle.iconTextBox}>\n            <Settings />\n            <DialogContentText sx={helpDialogStyle.text}>{EMPTY_DATA_TEXT.helpDialog.settings}</DialogContentText>\n          </Box>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setIsDialogOpen(false)} variant={BUTTON_VARIANT.contained} autoFocus>\n            {EMPTY_DATA_TEXT.helpDialog.close}\n          </Button>\n        </DialogActions>\n      </Dialog>\n      <Box sx={emptyDataStyle.content}>\n        <Box sx={emptyDataStyle.text}>{EMPTY_DATA_TEXT.content}</Box>\n        <Button variant={BUTTON_VARIANT.outlined} sx={emptyDataStyle.button} onClick={() => setIsDialogOpen(true)}>\n          <Help sx={emptyDataStyle.icon} />\n          {EMPTY_DATA_TEXT.firstTime}\n        </Button>\n      </Box>\n    </>\n  )\n}\n","import { VoidFunctionComponent } from 'react'\nimport { Box } from '@mui/material'\n\nimport { EMPTY_DATA_TEXT } from '../../../text/siteText'\n\nimport { emptyDataStyle } from '../../../components-style/content/no-data/emptyDataStyle'\n\nexport const Loading: VoidFunctionComponent = () => <Box sx={emptyDataStyle.text}>{EMPTY_DATA_TEXT.loading}</Box>\n","import { useCallback, useEffect, useState, VoidFunctionComponent } from 'react'\n\nimport { SelectableDataType } from '../../../types/data/data'\nimport { SetComponentBrushing } from '../../../types/brushing/Brushable'\nimport { Settings } from '../../../types/views/settings/Settings'\nimport { GridLayoutItem } from '../../../types/views/Grid'\n\nimport { useUpdatedRef } from '../../../helpers/react/useUpdatedRef'\nimport { useDebounce } from '../../../helpers/react/useDebounce'\nimport { getCategoryAttributesKeys, getDefaultQuantitativeAttributesKeys } from '../../../helpers/data/data'\n\nimport { DataLoadState } from '../../../constants/data/DataLoadState'\nimport { brushView, brushViewType, isBrushView, ViewType } from '../../../constants/views-general/ViewType'\nimport { DEFAULT_GRID_LAYOUT_QUANTITATIVE, DEFAULT_GRID_LAYOUT_NOMINAL } from '../../../constants/layout/layout'\nimport { DEFAULT_BRUSH_COLOR } from '../../../constants/views-general/defaultSettableColors'\nimport { BRUSH_DEBOUNCE } from '../../../constants/debounce/debounce'\n\nimport { TopToolbar } from '../top-toolbar/TopToolbar'\nimport { ViewGrid } from '../grid/ViewGrid'\nimport { EmptyData } from '../no-data/EmptyData'\nimport { Loading } from '../no-data/Loading'\n\nexport const DataContext: VoidFunctionComponent = () => {\n  const [dataLoadState, setDataLoadState] = useState(DataLoadState.NoData)\n\n  const [dataset, setDataset] = useState<ReadonlyArray<SelectableDataType> | null>(null)\n  const [settings, setSettings] = useState<Settings>({})\n\n  const [componentBrushing, setCurrentComponentBrushing] = useState<null | ViewType>(null)\n  const [cleanBrushing, setCleanBrushing] = useState<(() => void)[]>([])\n  const [currentRedrawTime, setRedrawTime] = useState(Date.now())\n\n  const redrawTime = useDebounce(currentRedrawTime, BRUSH_DEBOUNCE) // used for less component re-renders\n\n  const [isDrawerOpen, setDrawerOpen] = useState<boolean>(false)\n  const [isDetailsVisible, setIsDetailsVisible] = useState(true)\n  const [isBrushingOnEndOfMove, setIsBrushingOnEndOfMove] = useState(false)\n\n  const [isLayoutDialogOpen, setIsLayoutDialogOpen] = useState(false)\n  const [isAddViewDialogOpen, setIsAddViewDialogOpen] = useState(false)\n  const [layout, setLayout] = useState<GridLayoutItem[] | null>(null)\n  const [brushColor, setBrushColor] = useState<string>(DEFAULT_BRUSH_COLOR)\n\n  useEffect(() => {\n    if (!dataset || layout !== null) return\n    setLayout(\n      getCategoryAttributesKeys(dataset).length > getDefaultQuantitativeAttributesKeys(dataset).length\n        ? DEFAULT_GRID_LAYOUT_NOMINAL\n        : DEFAULT_GRID_LAYOUT_QUANTITATIVE,\n    )\n  }, [dataset, layout])\n\n  const cleanBrushingRef = useUpdatedRef(cleanBrushing)\n  const componentBrushingRef = useUpdatedRef(componentBrushing)\n\n  const setDatasetAndRemoveBrushing = useCallback((data: ReadonlyArray<SelectableDataType> | null) => {\n    setSettings({})\n    setDataset(data)\n    setCurrentComponentBrushing(null)\n  }, [])\n\n  const refreshViews = useCallback((): void => {\n    setRedrawTime(Date.now()) // redraw component\n  }, [])\n\n  const cleanAllBrushes = useCallback(\n    (deletePrevSelection = true) => {\n      if (dataset && deletePrevSelection) {\n        dataset.forEach((data) => (data.selected = false))\n        refreshViews()\n      }\n      cleanBrushingRef.current.forEach((f) => f())\n    },\n    [cleanBrushingRef, dataset, refreshViews],\n  )\n\n  const clearBrushesOnButton = useCallback(() => {\n    setCurrentComponentBrushing(null)\n    cleanAllBrushes()\n  }, [cleanAllBrushes])\n\n  const setComponentBrushing: SetComponentBrushing = useCallback(\n    (newComponent) => {\n      if (componentBrushingRef.current !== newComponent) {\n        cleanAllBrushes(isBrushView(newComponent) || newComponent === null)\n      }\n      setCurrentComponentBrushing(newComponent)\n    },\n    [cleanAllBrushes, componentBrushingRef],\n  )\n\n  const registerCleanBrushing = useCallback((cleanBrushing: () => void) => {\n    setCleanBrushing((prev) => [...prev, cleanBrushing])\n  }, [])\n\n  const cleanSelectedIfViewWasBrushing = useCallback(\n    (component: ViewType | brushViewType) => {\n      if (\n        componentBrushingRef.current === component ||\n        (component === brushView && isBrushView(componentBrushingRef.current))\n      ) {\n        cleanAllBrushes()\n        setCurrentComponentBrushing(null)\n      }\n    },\n    [cleanAllBrushes, componentBrushingRef],\n  )\n\n  const setIsBrushingOnEndOfMoveAndRemoveBrushing = useCallback(\n    (newIsBrushingOnEndOfMove: boolean) => {\n      cleanAllBrushes()\n      setCurrentComponentBrushing(null)\n      setIsBrushingOnEndOfMove(newIsBrushingOnEndOfMove)\n    },\n    [cleanAllBrushes],\n  )\n\n  const closeDrawer = useCallback(() => setDrawerOpen(false), [])\n  const openDrawer = useCallback(() => setDrawerOpen(true), [])\n\n  const topToolbarComponent = (\n    <TopToolbar\n      openDrawer={openDrawer}\n      isToolsDisabled={dataset === null}\n      isDetailsVisible={isDetailsVisible}\n      setIsDetailsVisible={setIsDetailsVisible}\n      isBrushingOnEndOfMove={isBrushingOnEndOfMove}\n      setIsBrushingOnEndOfMove={setIsBrushingOnEndOfMoveAndRemoveBrushing}\n      isBrushingActive={componentBrushingRef.current !== null}\n      clearBrushes={clearBrushesOnButton}\n      setDataset={setDatasetAndRemoveBrushing}\n      setDataLoadState={setDataLoadState}\n      setIsLayoutDialogOpen={setIsLayoutDialogOpen}\n      removeLayout={() => setLayout([])}\n      setIsAddViewDialogOpen={setIsAddViewDialogOpen}\n      brushColor={brushColor}\n      setBrushColor={setBrushColor}\n    />\n  )\n\n  if (dataLoadState === DataLoadState.NoData) {\n    return (\n      <>\n        {topToolbarComponent}\n        <EmptyData />\n      </>\n    )\n  }\n  if (dataLoadState === DataLoadState.Loading || !dataset) {\n    return (\n      <>\n        {topToolbarComponent}\n        <Loading />\n      </>\n    )\n  }\n\n  if (!layout) return null\n\n  return (\n    <>\n      {topToolbarComponent}\n      <ViewGrid\n        isDrawerOpen={isDrawerOpen}\n        isDetailsVisible={isDetailsVisible}\n        closeDrawer={closeDrawer}\n        cleanSelectedIfViewWasBrushing={cleanSelectedIfViewWasBrushing}\n        settings={settings}\n        setSettings={setSettings}\n        dataset={dataset}\n        isLayoutDialogOpen={isLayoutDialogOpen}\n        setIsLayoutDialogOpen={setIsLayoutDialogOpen}\n        isAddViewDialogOpen={isAddViewDialogOpen}\n        setIsAddViewDialogOpen={setIsAddViewDialogOpen}\n        layout={layout}\n        setLayout={setLayout}\n        brushColor={brushColor}\n        registerCleanBrushing={registerCleanBrushing}\n        setComponentBrushing={setComponentBrushing}\n        refreshViews={refreshViews}\n        redrawTime={redrawTime}\n        isBrushingActive={componentBrushingRef.current !== null}\n        isBrushingOnEndOfMove={isBrushingOnEndOfMove}\n      />\n    </>\n  )\n}\n","import { SxProps } from '@mui/system'\n\nexport const appStyle: Record<string, SxProps> = {\n  app: {\n    textAlign: `center`,\n    minHeight: `100vh`,\n    display: `flex`,\n    flexDirection: `column`,\n    alignItems: `center`,\n  },\n  content: {\n    flexGrow: 1,\n    width: `100%`,\n  },\n}\n","import { VoidFunctionComponent } from 'react'\nimport { Box } from '@mui/material'\n\nimport { Header } from './components/header/Header'\nimport { Footer } from './components/footer/Footer'\nimport { DataContext } from './components/content/context/DataContext'\n\nimport { appStyle } from './appStyle'\n\nexport const App: VoidFunctionComponent = () => (\n  <Box sx={appStyle.app}>\n    <Header />\n    <Box sx={appStyle.content}>\n      <DataContext />\n    </Box>\n    <Footer />\n  </Box>\n)\n","import { StrictMode } from 'react'\nimport ReactDOM from 'react-dom'\nimport 'react-grid-layout/css/styles.css'\nimport 'react-resizable/css/styles.css'\n\nimport { App } from './app/App'\nimport './index.css'\n\nReactDOM.render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n  document.getElementById(`root`),\n)\n"],"sourceRoot":""}