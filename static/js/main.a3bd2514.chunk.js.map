{"version":3,"sources":["app/constants/data/dataLoadState.ts","app/constants/views/ViewTypes.ts","app/text/HeaderText.ts","app/helpers/data/formatText.ts","app/types/data/data.ts","app/helpers/d3/stringGetters.ts","app/styles/colors.ts","app/styles/font.ts","app/components-style/header/headerStyle.ts","app/components/header/Header.tsx","app/text/FooterText.ts","app/components-style/footer/footerStyle.ts","app/components/footer/Footer.tsx","app/helpers/react/useUpdatedRef.ts","app/constants/data/sampleDataset.tsx","app/components/content/top-toolbar/items/file-reader/FileReader.tsx","app/text/SiteText.ts","app/components-style/content/top-toolbar/topToolbarStyle.ts","app/components-style/content/top-toolbar/items/buttons/topToolbarButtonStyle.ts","app/components/content/top-toolbar/items/buttons/ClickableButton.tsx","app/helpers/data/dataConvertors.ts","app/components-style/content/top-toolbar/items/file-reader/fileReaderStyle.ts","app/components-style/content/common/dialogStyle.ts","app/components/content/common/dialogs/SelectionDialog.tsx","app/components/content/common/dialogs/InformationDialog.tsx","app/helpers/data/comparator.ts","app/components/content/top-toolbar/items/buttons/ToggleButtonSingle.tsx","app/components-style/content/top-toolbar/items/buttons/openSettingsButtonStyle.ts","app/components/content/top-toolbar/items/buttons/OpenSettingsButton.tsx","app/components/content/top-toolbar/TopToolbar.tsx","app/constants/svg.ts","app/helpers/d3/displayDetails.ts","app/constants/views/common.ts","app/constants/views/tooltip.ts","app/text/views-and-menus/common.ts","app/components-style/content/views/viewGridStyle.ts","app/components-style/content/data-drawer/dataDrawerStyle.ts","app/helpers/data/data.ts","app/constants/data/data.ts","app/constants/actions/BrushAction.ts","app/constants/actions/MouseActions.ts","app/constants/views/glyphs.ts","app/text/views-and-menus/glyphs.ts","app/components-style/content/data-drawer/dataDrawerMenuStyle.ts","app/components-style/content/data-drawer/items/attributeCheckerStyle.ts","app/components/content/data-drawer/items/AttributeChecker.tsx","app/components/content/data-drawer/items/CategorySelector.tsx","app/components/content/data-drawer/items/Selector.tsx","app/components-style/content/data-drawer/items/numberInputStyles.ts","app/components/content/data-drawer/items/MarginInput.tsx","app/components/content/data-drawer/items/NumberInput.tsx","app/components/content/data-drawer/items/OpacityInput.tsx","app/components-style/content/data-drawer/items/palettePickerStyle.ts","app/components/content/data-drawer/items/PalettePicker.tsx","app/components-style/content/data-drawer/items/toggleButtonsStyle.ts","app/components/content/data-drawer/items/ToggleButtons.tsx","app/components/content/views/glyphs/GlyphsMenu.tsx","app/types/views/settings/GlyphsSettings.ts","app/constants/views/parallelCoordinates.ts","app/text/views-and-menus/parallelCoordinates.ts","app/components/content/views/parallel-coordinates/ParallelCoordinatesMenu.tsx","app/types/views/settings/ParallelCoordinatesSettings.tsx","app/constants/views/scatterPlotMatrix.ts","app/text/views-and-menus/scatterPlotMatrix.ts","app/components/content/views/scatter-plot-matrix/ScatterPlotMatrixMenu.tsx","app/types/views/settings/ScatterPlotMatrixSettings.tsx","app/constants/views/scatterPlotGlyphs.ts","app/text/views-and-menus/scatterPlotGlyphs.ts","app/components/content/views/scatter-plot-glyphs/ScatterPlotGlyphsMenu.tsx","app/types/views/settings/ScatterPlotGlyphsSettings.ts","app/constants/views/dataTable.ts","app/text/views-and-menus/dataTable.ts","app/components/content/views/data-table/DataTableMenu.tsx","app/types/views/settings/DataTableSettings.ts","app/components/content/data-drawer/DataDrawer.tsx","app/components-style/content/views/gridItemStyle.ts","app/constants/save/save.ts","app/helpers/d3/saveSvg.ts","app/components-style/content/common/inlineButtonStyles.ts","app/components/content/common/dialogs/ConfirmationDialog.tsx","app/components/content/common/DataSaveButton.tsx","app/types/styling/Margin.ts","app/helpers/basic/range.ts","app/helpers/d3/extent.ts","app/helpers/d3/attributeGetters.ts","app/constants/html.ts","app/components-style/content/views/parallel-coordinates/parallelCoordinatesStyle.ts","app/components-style/content/views/getViewsNotDisplayStyle.tsx","app/components/content/views/parallel-coordinates/ParallelCoordinates.tsx","app/helpers/basic/retype.ts","app/helpers/d3/matrix.ts","app/components-style/content/views/scatter-plot-matrix/scatterPlotMatrixStyle.ts","app/components/content/views/scatter-plot-matrix/ScatterPlotMatrix.tsx","app/components-style/content/views/glyphs/glyphsStyle.ts","app/components/content/views/glyphs/Glyphs.tsx","app/components-style/content/views/scatter-plot-glyphs/scatterPlotGlyphsStyle.ts","app/components/content/views/scatter-plot-glyphs/ScatterPlotGlyphs.tsx","app/constants/form.ts","app/components-style/content/views/data-table/dataTableStyle.ts","app/components/content/views/data-table/DataTable.tsx","app/components/content/views/View.tsx","app/components-style/content/views/viewStyle.ts","app/components/content/views/GridItem.tsx","app/components/content/views/ViewGrid.tsx","app/components-style/content/no-data/emptyDataStyle.ts","app/components/content/no-data/EmptyData.tsx","app/components-style/content/no-data/loadingStyle.ts","app/components/content/no-data/Loading.tsx","app/components/content/context/DataContext.tsx","app/appStyle.ts","app/App.tsx","index.tsx"],"names":["DataLoadState","DataLoadError","ViewType","HEADER_TEXT","withoutSpaces","otherCasesToWhitespaces","text","String","replace","replaceAll","trim","SelectedKey","px","values","map","val","join","calc","plus","important","border","value","color","getTranslate","translate","getClass","className","getAttributeFormatted","attribute","getAttributeFromMatrixFormatted","item","rowKey","getAttributeValuesWithLabel","data","Object","keys","filter","key","HEADER_COLORS","FOOTER_COLORS","TOP_TOOLBAR_COLORS","BUTTON_COLORS","VIEW_COLORS","DATA_DRAWER_COLORS","PLOT_COLORS","SITE_COLORS","ERROR_COLORS","HIGHLIGHT_COLOR","TABLE_COLORS","HEADER_FONT","titleFontSize","descriptionFontSize","FOOTER_FONT","fontSize","DATA_DRAWER_FONT","PLOT_FONT","PLOT_FONT_BOX_SIZE","headerStyle","headerContainer","bgcolor","padding","width","display","flexDirection","alignItems","justifyContent","title","description","Header","Box","sx","FOOTER_TEXT","footerStyle","footerContainer","Footer","useUpdatedRef","valueRef","useRef","current","SampleDataset","flower","bird","car","AcceptableFileTypes","sampleDatasetIcons","LocalFlorist","Air","DirectionsCar","sampleDatasets","flowerJson","birdJson","carJson","EMPTY_DATA_TEXT","TOP_TOOLBAR_TEXT","labelDetailsVisible","labelClearBrushes","labelAddView","labelBrushingOnEOM","addViewDialogTitle","noOption","fileReader","sampleDataLabel","sampleDataDialogTitle","sampleDataDialogText","alertDialog","unsupportedFile","unsupportedFileFormat","saveText","header","save","confirm","cancel","topToolbarStyle","toolbar","left","margin","separator","height","borderLeft","right","topToolbarButtonStyle","button","minWidth","ClickableButton","icon","onClick","disabled","label","Button","variant","Tooltip","isJsonValue","isArrayOfDataType","dataset","Array","isArray","length","example","every","idx","CsvParse","textCsv","parse","output","fromEntries","toLowerCase","numValue","Number","isNaN","getFileReaderBoxStyle","isHighlighted","transition","borderRadius","dialogStyle","alert","SelectionDialog","isOpen","onClose","options","handleListItemClick","noOptionText","Dialog","open","DialogTitle","Divider","List","option","ListItem","ListItemAvatar","Avatar","ListItemText","primary","Typography","InformationDialog","confirmText","DialogContent","DialogContentText","DialogActions","autoFocus","addSelected","d","selected","SortType","FileReader","setDataset","setDataLoadState","useState","isSampleDataDialogOpen","setIsSampleDataDialogOpen","isAlertDialogOpen","setIsAlertDialogOpen","alertDialogText","setAlertDialogText","optionsKeys","optionKey","Loaded","AutoGraph","type","onChange","e","a","target","files","Loading","selectedFile","fileType","json","csv","JSON","NoData","ToggleButtonSingle","setValue","onValue","ToggleButtonGroup","event","checked","ToggleButton","openSettingsButtonStyle","settings","OpenSettingsButton","IconButton","size","Settings","TopToolbar","openDrawer","isToolsDisabled","isDetailsVisible","setIsDetailsVisible","isBrushingOnEndOfMove","setIsBrushingOnEndOfMove","isBrushingActive","clearBrushes","setIsAddViewDialogOpen","Info","SkipNext","AutoFixOff","AddCircle","SVG","svg","g","circle","rect","path","div","class","transform","x","y","cx","cy","r","strokeWidth","fill","stroke","opacity","top","none","block","displayDetails","tooltipClass","selectAll","style","DRAG_HANDLE","VIEW_DEFAULT_SIZE","DEFAULT_VIEW_DIMENSIONS","Glyphs","w","h","ParallelCoordinates","ScatterPlotGlyphs","ScatterPlotMatrix","DataTable","VIEW_LIMITS","minW","minH","DEFAULT_GRID_LAYOUT","i","TOOLTIP_CLASS","TOOLTIP","bottom","lr","MENU_BASE_TEXT","more","empty","MENU_TEXT","attributes","category","MARGIN_MENU_TEXT","OPACITY_MENU_TEXT","PALETTE_PICKER","categoriesLabel","VIEW_NAMES","viewGridStyle","tooltip","position","pointerEvents","zIndex","dataDrawerStyle","drawer","flexShrink","chevron","menu","flexGrow","getAttributeKeys","getDatasetSample","getQuantitativeAttributesKeys","getCategoryAttributesKeys","Set","getDefaultAllAttributesChecked","getDefaultQuantitativeAttributesChecked","defaultQuantitativeAttributesKeys","getDefaultQuantitativeAttributesKeys","possibleQuantitativeAttributesKeys","some","kk","descCompare","b","orderBy","BrushAction","MouseActions","getComparator","sort","desc","GLYPHS_DEFAULT","sortType","asc","glyphSize","glyphSpacing","margins","colorCategory","schemeCategory10","GLYPHS_TEXT","GLYPHS_MENU_TEXT","sorting","unavailable","dataDrawerMenuStyle","drawerMenu","textAlign","borderBottom","marginTop","insufficientAttributeNum","accordion","minHeight","attributeCheckerStyle","buttons","control","AttributeChecker","viewType","attributesKeys","handleChangeSettings","getNewSettings","setSettings","setChecked","setAttributesKeys","handleMove","newAttributesKeys","prev","prevSettings","displayAttributes","FormControlLabel","onUpButton","ArrowDropUp","onDownButton","ArrowDropDown","Checkbox","eventChecked","newChecked","newSettings","handleCheckboxChange","CategorySelector","TextField","categoryAttribute","undefined","select","MenuItem","Selector","settingsKey","newValue","numberInputStyles","vertical","horizontal","textField","MarginInput","handleMarginChange","newMargin","newMargins","defaultValue","inputProps","inputMode","min","NumberInput","valueKey","max","maxVal","OpacityInput","handleOpacityChange","newOpacity","newOpacities","getColorInputStyle","colors","index","palettePickerStyle","picker","row","col","PalettePicker","getInput","newColor","newColors","handleSetColor","toggleButtonsStyle","group","ToggleButtons","exclusive","opt","GlyphsMenu","glyphsSettings","quantitativeAttributesKeys","setQuantitativeAttributesKeys","sortableAttributes","categoricalAttributes","createGlyphsMenu","useCallback","newQaKeys","defaultSortAttribute","defaultCategoryAttribute","newGlyphs","sortAttribute","useEffect","currChecked","newSortableAttributes","Accordion","AccordionSummary","expandIcon","ExpandMore","AccordionDetails","PARALLEL_COORDINATES_DEFAULT","lineWidth","PARALLEL_COORDINATES_TEXT","PARALLEL_COORDINATES_MENU_TEXT","ParallelCoordinatesMenu","cleanSelectedIfViewWasBrushing","parallelCoordinatesSettings","createParallelCoordinatesMenu","newParallelCoordinates","SCATTER_PLOT_MATRIX_DEFAULT","pointSize","SCATTER_PLOT_MATRIX_TEXT","SCATTER_PLOT_MATRIX_MENU_TEXT","ScatterPlotMatrixMenu","scatterPlotMatrixSettings","createScatterPlotMatrixMenu","newScatterPlotMatrix","SCATTER_PLOT_GLYPHS_DEFAULT","SCATTER_PLOT_GLYPHS_TEXT","SCATTER_PLOT_GLYPHS_MENU_TEXT","xAttribute","yAttribute","ScatterPlotGlyphsMenu","scatterPlotGlyphsSettings","defaultX","useMemo","defaultY","createScatterPlotGlyphsMenu","newScatterPlotGlyphsSettings","DATA_TABLE_DEFAULT","rowHeight","DATA_TABLE_MENU_TEXT","DATA_TABLE_TEXT","checkboxTooltip","DataTableMenu","dataTableSettings","createDataTableMenu","newKeys","newDataTableSettings","DataDrawer","close","views","menus","view","Drawer","anchor","ChevronRight","gridItemStyle","gridItem","borderColor","borderWidth","borderStyle","HEADER_HEIGHT","cursor","borderBottomWidth","borderBottomStyle","SAVE_ID","CONTAINER_SAVE_ID","saveSvg","svgContainer","document","querySelector","containerClass","from","classList","cls","includes","newStyleNodes","querySelectorAll","innerHTML","node","createElement","insertBefore","firstChild","svgEl","fileName","setAttribute","svgData","outerHTML","svgBlob","Blob","svgUrl","URL","createObjectURL","downloadLink","href","download","body","appendChild","click","removeChild","saveSvgToFile","forEach","remove","console","error","inlineButtonStyles","ConfirmationDialog","onConfirm","cancelText","DataSaveButton","isDialogOpen","setIsDialogOpen","Save","Margin","toString","this","isInRanges","ranges","getExtentInDomains","domains","calculatedExtent","extent","Error","getCategoryColor","HTML","PARALLEL_COORDINATES_CLASS","getParallelCoordinatesStyle","isBrushActive","font","textAnchor","fontWeight","getViewsNotDisplayStyle","setDataSelected","registerCleanBrushing","setComponentBrushing","component","scaleOrdinal","upperPadding","innerWidth","innerHeight","createParallelCoordinates","extentInDomains","xScale","scalePoint","domain","v","yScales","scaleLinear","selections","getDefaultSelectionForAttributes","setBrushingSelection","dimension","selectedRange","number","range","valueOnAxis","brush","brushY","BRUSH_WIDTH","on","start","move","brushEvent","axisName","selection","end","enter","append","attr","line","mouseOver","clientX","clientY","duration","html","mouseOut","brushableAxes","each","elements","call","axisLeft","axis","clear","classed","id","ref","getMatrix","rowIdx","colKey","colIdx","flat","getCellInnerSize","spacing","getCellTranslateInMatrix","maxIdx","DATA_POINT_CLASS","DUPLICATES_CLASS","AXIS_CLASS","getScatterPlotMatrixStyle","shapeRendering","fillOpacity","SPACING","TICKS","createScatterPlotMatrix","attributesCount","yScale","axisBottom","xAxis","yAxis","ticks","tickSize","setAxis","plotMatrixItem","matrixItem","cell","brushing","clearBrush","makeBrush","_","brushSelection","GLYPHS_CLASS","SELECTED_CLASS","getGlyphsStyle","sortableDataset","sortedDataset","glyphSizeWithSpacing","glyphsCountPerLine","Math","floor","glyphsCountPerHeight","ceil","glyphRadius","createGlyphs","percentDown","percentUp","extentSize","p","finalExtent","getExtendedExtentInDomains","lineRadialGenerator","lineRadial","radialScales","scaleRadial","getTransform","indexOf","getGlyphPath","PI","changedData","SCATTER_PLOT_GLYPHS_CLASS","getScatterPlotGlyphsStyle","createScatterPlotGlyphs","makeGlyphs","FORM","getDataTableRowStyle","paddingTop","paddingBottom","dataTableStyle","tableHead","tableBody","notDisplayed","order","setOrder","setOrderBy","createSortHandler","property","isAsc","handleRequestSort","numSelected","someSelected","allSelected","TableContainer","Table","TableHead","TableRow","TableCell","checkAll","indeterminate","headCellId","orderedByActive","sortDirection","TableSortLabel","active","direction","TableBody","dataCopy","hover","s","View","dataProps","graph","settingsCurr","overflowX","overflowY","GridItem","onRemove","isDragFinished","rest","useSize","Close","ReactGridLayout","WidthProvider","GridLayout","ViewGrid","isDrawerOpen","closeDrawer","isAddViewDialogOpen","viewProps","isGridChanging","setIsGridResizing","layout","setLayout","updateLayout","newLayout","filteredLayout","addView","find","posY","reduce","removeView","availableViews","dialogOptions","onLayoutChange","draggableHandle","onResizeStart","onResizeStop","cols","isResizable","emptyDataStyle","site","EmptyData","loadingStyle","load","DataContext","dataLoadState","componentBrushing","setCurrentComponentBrushing","cleanBrushing","setCleanBrushing","Date","now","redrawTime","setRedrawTime","setDrawerOpen","cleanBrushingRef","componentBrushingRef","setFunction","cleanAllBrushes","deletePrevSelection","f","newComponent","newIsBrushingOnEndOfMove","appStyle","app","content","App","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.a3bd2514.chunk.js","sourcesContent":["export enum DataLoadState {\n  NoData = `no-data`,\n  Loading = `loading`,\n  Loaded = `loaded`,\n}\n\nexport enum DataLoadError {\n  unsupportedFile = `unsupportedFile`,\n  unsupportedFileFormat = `unsupportedFileFormat`,\n}\n","export enum ViewType {\n  Glyphs = `glyphs`,\n  ParallelCoordinates = `parallelCoordinates`,\n  ScatterPlotMatrix = `scatterPlotMatrix`,\n  ScatterPlotGlyphs = `ScatterPlotGlyphs`,\n  DataTable = `DataTable`,\n}\n\nexport const isViewType = (viewType: string): viewType is ViewType =>\n  (Object.values(ViewType) as string[]).includes(viewType)\n","export const HEADER_TEXT = {\n  title: `Tabular Data Visualizer`,\n  description: `Web Application for Tabular Data Visualization`,\n}\n","import { JsonValue } from '../../types/data/data'\n\nconst withoutSpaces = /([A-Z])([A-Z])([a-z])|([a-z])([A-Z])/g\n\nexport const otherCasesToWhitespaces = (text: string | number): string =>\n  String(text).replace(withoutSpaces, `$1$4 $2$3$5`).replaceAll(`_`, ` `).trim()\n\nexport const dataToReadable = (data: JsonValue): string => (data === null ? `null` : String(data))\n","/**\n * Key to indicate whether the attribute is selected\n */\nexport const SelectedKey = `selected`\n\n/**\n * Acceptable simple JSON values for our data\n */\nexport type JsonValue = string | number | boolean | null\n\n/**\n * Interface for loaded JSON data\n */\nexport interface DataType {\n  readonly [key: string]: JsonValue\n}\n\n/**\n * Interface for loaded JSON data with selected flag\n */\nexport interface SelectableDataType extends DataType {\n  [SelectedKey]: boolean\n}\n\n/**\n * Interface for Selectable data type with index (for sorting etc.)\n */\nexport interface IndexedSelectableDataType extends SelectableDataType {\n  index: number\n}\n\n/**\n * Interface that assigns attributes boolean value.\n * Used for selecting what axes to display.\n */\nexport interface CheckedForSelectableDataType {\n  [key: keyof SelectableDataType]: boolean\n}\n\n/**\n * Interface that assigns attributes numerical extent or null.\n * Used for axes' range.\n */\nexport interface ExtentForSelectableDataType {\n  [key: keyof SelectableDataType]: [number, number] | null\n}\n\nexport interface ExtentReqForSelectableDataType {\n  [key: keyof SelectableDataType]: [number, number]\n}\n","import { otherCasesToWhitespaces } from '../data/formatText'\nimport { SelectableDataType, SelectedKey } from '../../types/data/data'\nimport { MatrixItem } from '../../types/data/MatrixData'\n\nexport const px = (...values: number[]): string => values.map((val) => `${val}px`).join(` `)\n\nexport const calc = (px: number, plus: string): string => `calc(${px}px + ${plus})`\n\nexport const important = (val: string | number): string => `${val} !important`\n\nexport const border = (value: number, color: string): string => `${value}px solid ${color}`\n\nexport const getEverything = (): `*` => `*`\n\nexport const getTranslate = (translate: [number, number]): string => `translate(${translate[0]}, ${translate[1]})`\n\nexport const getClass = (className: string): string => `.${className}`\n\nexport const getAttributeFormatted = (attribute: keyof SelectableDataType): string =>\n  otherCasesToWhitespaces(String(attribute))\n\nexport const getAttributeFromMatrixFormatted = (item: MatrixItem): string => getAttributeFormatted(item.rowKey)\n\nexport const getAttributeValuesWithLabel = (data: SelectableDataType): string[] =>\n  Object.keys(data)\n    .filter((key) => key !== SelectedKey)\n    .map((attribute) => [getAttributeFormatted(attribute), data[attribute] ?? `null`].join(`: `))\n","export const HEADER_COLORS = {\n  background: `#282c34`,\n  font: `#d6e1ff`,\n}\n\nexport const FOOTER_COLORS = {\n  background: `#1f2528`,\n  font: `#a3abc0`,\n}\n\nexport const TOP_TOOLBAR_COLORS = {\n  background: `#363a46`,\n  font: `#bcc7e7`,\n  border: `rgba(72, 80, 100, 0.8)`,\n}\n\nexport const BUTTON_COLORS = {\n  buttonDisableBackground: `#363b46`,\n  buttonOffBackground: `#2d3548`,\n  buttonOnBackground: `#d6e1ff`,\n  fontOn: `rgba(0, 0, 0, 0.87)`,\n  fontOff: `rgba(214, 225, 255, 0.6)`,\n  fontDisabled: `rgba(0, 0, 0, 0.26)`,\n  buttonInlined: `#576e9f`,\n  border: `rgba(0, 0, 0, 0.12)`,\n}\n\nexport const VIEW_COLORS = {\n  itemBackground: `#f2f3fa`,\n  border: `#9ea8be`,\n}\n\nexport const DATA_DRAWER_COLORS = {\n  background: `#23262d`,\n  border: `#363a46`,\n  icon: `#c4cbdc`,\n  drawerItemBackground: `#edf1fd`,\n  drawerItemBackgroundDimmed: `#e4eafd`,\n  drawerItemBorder: `#8e94a2`,\n  label: `#404242`,\n}\n\nexport const PLOT_COLORS = {\n  backgroundColor: `rgba(250, 250, 250, 0.7)`,\n  fontColor: `#1f1f1f`,\n  tooltipBackground: `rgb(0, 66, 70)`,\n  tooltipFont: `#ccffff`,\n  axisLines: `#dddddd`,\n  axisLinesDark: `#999999`,\n  dataBox: `#aaaaaa`,\n  brushColor: `#830606`,\n  brushColorTable: `rgb(252, 207, 207)`,\n}\n\nexport const SITE_COLORS = {\n  font: `#0d4b4d`,\n}\n\nexport const ERROR_COLORS = {\n  font: `#700000`,\n}\n\nexport const HIGHLIGHT_COLOR = {\n  border: `#da3512`,\n  background: `rgba(201, 30, 0, 0.5)`,\n  backgroundGone: `rgba(201, 30, 0, 0)`,\n}\n\nexport const TABLE_COLORS = {\n  headerFont: `#bcc7e7`,\n  headerFontActive: `#e1e7fc`,\n  headerBackground: `#363a46`,\n  rowsBackground: `rgb(250, 250, 254)`,\n}\n","import { calc } from '../helpers/d3/stringGetters'\n\nexport const HEADER_FONT = {\n  titleFontSize: calc(5, `2vmin`),\n  descriptionFontSize: calc(2, `1vmin`),\n}\n\nexport const FOOTER_FONT = {\n  fontSize: calc(2, `1vmin`),\n}\n\nexport const DATA_DRAWER_FONT = {\n  headerFontSize: 14,\n  labelFontSize: `0.8em`,\n  fontSize: 12,\n}\n\nexport const PLOT_FONT = {\n  fontSize: 12,\n}\n\nexport const PLOT_FONT_BOX_SIZE = PLOT_FONT.fontSize + 2 // font box, 2px bigger than the fontSize\n","import { SxProps } from '@mui/system'\n\nimport { px } from '../../helpers/d3/stringGetters'\nimport { HEADER_COLORS } from '../../styles/colors'\nimport { HEADER_FONT } from '../../styles/font'\n\nexport const headerStyle: Record<string, SxProps> = {\n  headerContainer: {\n    bgcolor: HEADER_COLORS.background,\n    padding: px(10, 0),\n    width: `100%`,\n    display: `flex`,\n    flexDirection: `row`,\n    alignItems: `flex-end`,\n    justifyContent: `space-between`,\n    color: HEADER_COLORS.font,\n  },\n  title: {\n    fontSize: HEADER_FONT.titleFontSize,\n    padding: px(0, 20),\n  },\n  description: {\n    padding: px(0, 15),\n    fontSize: HEADER_FONT.descriptionFontSize,\n  },\n}\n","import { VoidFunctionComponent } from 'react'\nimport { Box } from '@mui/material'\n\nimport { HEADER_TEXT } from '../../text/HeaderText'\n\nimport { headerStyle } from '../../components-style/header/headerStyle'\n\nexport const Header: VoidFunctionComponent = () => (\n  <Box sx={headerStyle.headerContainer}>\n    <Box sx={headerStyle.title}>{HEADER_TEXT.title}</Box>\n    <Box sx={headerStyle.description}>{HEADER_TEXT.description}</Box>\n  </Box>\n)\n","export const FOOTER_TEXT = {\n  author: `Zuzana ttinov`,\n  school: `CTU FEE`,\n  year: `2021-2022`,\n}\n","import { SxProps } from '@mui/system'\n\nimport { px } from '../../helpers/d3/stringGetters'\nimport { FOOTER_COLORS } from '../../styles/colors'\nimport { FOOTER_FONT } from '../../styles/font'\n\nexport const footerStyle: Record<string, SxProps> = {\n  footerContainer: {\n    bgcolor: FOOTER_COLORS.background,\n    color: FOOTER_COLORS.font,\n    padding: px(10, 0),\n    width: `100%`,\n    display: `flex`,\n    flexDirection: `column`,\n    alignItems: `flex-end`,\n    justifyContent: `flex-end`,\n  },\n  text: {\n    padding: px(0, 15),\n    fontSize: FOOTER_FONT.fontSize,\n  },\n}\n","import { VoidFunctionComponent } from 'react'\nimport { Box } from '@mui/material'\n\nimport { FOOTER_TEXT } from '../../text/FooterText'\nimport { footerStyle } from '../../components-style/footer/footerStyle'\n\nexport const Footer: VoidFunctionComponent = () => (\n  <Box sx={footerStyle.footerContainer}>\n    <Box sx={footerStyle.text}>{FOOTER_TEXT.author},</Box>\n    <Box sx={footerStyle.text}>\n      &copy; {FOOTER_TEXT.school}, {FOOTER_TEXT.year}\n    </Box>\n  </Box>\n)\n","import { MutableRefObject, useRef } from 'react'\n\nexport const useUpdatedRef = <T>(value: T): MutableRefObject<T> => {\n  const valueRef = useRef<T>(value)\n  valueRef.current = value\n  return valueRef\n}\n","import { Air, DirectionsCar, LocalFlorist } from '@mui/icons-material'\n\nimport flowerJson from '../../../test-data/flowerData.json'\nimport birdJson from '../../../test-data/birdData.json'\nimport carJson from '../../../test-data/carData.json'\nimport { DataType } from '../../types/data/data'\n\nexport enum SampleDataset {\n  flower = `flower`,\n  bird = `bird`,\n  car = `car`,\n}\n\nexport const sampleDatasetFiles: Record<SampleDataset, string> = {\n  [SampleDataset.flower]: `flowerData.json`,\n  [SampleDataset.bird]: `birdData.json`,\n  [SampleDataset.car]: `carData.json`,\n}\n\nexport const sampleDatasetIcons: Record<SampleDataset, JSX.Element> = {\n  [SampleDataset.flower]: <LocalFlorist />,\n  [SampleDataset.bird]: <Air />,\n  [SampleDataset.car]: <DirectionsCar />,\n}\n\nexport const sampleDatasets: Record<SampleDataset, DataType[]> = {\n  [SampleDataset.flower]: flowerJson,\n  [SampleDataset.bird]: birdJson,\n  [SampleDataset.car]: carJson,\n}\n","import { Dispatch, VoidFunctionComponent, SetStateAction, useState } from 'react'\nimport { AutoGraph } from '@mui/icons-material'\nimport { Box } from '@mui/material'\n\nimport { DataType, SelectableDataType } from '../../../../../types/data/data'\n\nimport { CsvParse, isArrayOfDataType } from '../../../../../helpers/data/dataConvertors'\n\nimport { DataLoadError, DataLoadState } from '../../../../../constants/data/dataLoadState'\nimport { SampleDataset, sampleDatasetIcons, sampleDatasets } from '../../../../../constants/data/sampleDataset'\n\nimport { TOP_TOOLBAR_TEXT } from '../../../../../text/SiteText'\n\nimport { getFileReaderBoxStyle } from '../../../../../components-style/content/top-toolbar/items/file-reader/fileReaderStyle'\n\nimport { SelectionDialog } from '../../../common/dialogs/SelectionDialog'\nimport { InformationDialog } from '../../../common/dialogs/InformationDialog'\nimport { ClickableButton } from '../buttons/ClickableButton'\n\nexport interface FileReaderDataProps {\n  setDataset: (dataset: ReadonlyArray<SelectableDataType> | null) => void\n  setDataLoadState: Dispatch<SetStateAction<DataLoadState>>\n}\n\nexport interface FileReaderProps extends FileReaderDataProps {\n  isHighlighted: boolean\n}\n\nexport const addSelected = (data: ReadonlyArray<DataType>): ReadonlyArray<SelectableDataType> =>\n  data.map((d) => ({ ...d, selected: false }))\n\nenum AcceptableFileTypes {\n  json = `application/json`,\n  csv = `text/csv`,\n}\n\nexport const FileReader: VoidFunctionComponent<FileReaderProps> = ({ setDataset, setDataLoadState, isHighlighted }) => {\n  const [isSampleDataDialogOpen, setIsSampleDataDialogOpen] = useState(false)\n\n  const [isAlertDialogOpen, setIsAlertDialogOpen] = useState(false)\n  const [alertDialogText, setAlertDialogText] = useState<{ title: string; description: string } | null>(null)\n\n  const text = TOP_TOOLBAR_TEXT.fileReader\n  const optionsKeys = Object.values(SampleDataset)\n  const handleListItemClick = (optionKey: SampleDataset) => {\n    setIsSampleDataDialogOpen(false)\n    const dataset = sampleDatasets[optionKey]\n    setDataset(addSelected(dataset))\n    setDataLoadState(DataLoadState.Loaded)\n  }\n\n  return (\n    <>\n      <SelectionDialog\n        isOpen={isSampleDataDialogOpen}\n        onClose={() => setIsSampleDataDialogOpen(false)}\n        title={text.sampleDataDialogTitle}\n        options={optionsKeys.map((key) => ({\n          key,\n          label: text.sampleDataDialogText[key],\n          icon: sampleDatasetIcons[key],\n        }))}\n        handleListItemClick={handleListItemClick}\n      />\n      <InformationDialog\n        isOpen={isAlertDialogOpen}\n        onClose={() => setIsAlertDialogOpen(false)}\n        title={alertDialogText?.title}\n        description={alertDialogText?.description}\n        confirmText={text.alertDialog.confirm}\n        alert={true}\n      />\n      <Box sx={getFileReaderBoxStyle(isHighlighted)}>\n        <ClickableButton\n          onClick={() => setIsSampleDataDialogOpen(true)}\n          icon={<AutoGraph />}\n          label={text.sampleDataLabel}\n        />\n        <input\n          type=\"file\"\n          onChange={async (e) => {\n            if (e.target.files?.length) {\n              setDataLoadState(DataLoadState.Loading)\n              const selectedFile = e.target.files[0]\n              const fileType = selectedFile.type\n              let dataset: DataType[] = []\n\n              switch (fileType) {\n                case AcceptableFileTypes.json: {\n                  const text = await selectedFile.text()\n                  dataset = JSON.parse(text)\n                  break\n                }\n                case AcceptableFileTypes.csv: {\n                  const textCsv = await selectedFile.text()\n                  dataset = CsvParse(textCsv)\n                  break\n                }\n                default: {\n                  setDataLoadState(DataLoadState.NoData)\n                  setAlertDialogText(text.alertDialog[DataLoadError.unsupportedFile])\n                  setDataset(null)\n                  setIsAlertDialogOpen(true)\n                  return\n                }\n              }\n              if (!isArrayOfDataType(dataset)) {\n                setDataLoadState(DataLoadState.NoData)\n                setAlertDialogText(text.alertDialog[DataLoadError.unsupportedFileFormat])\n                setDataset(null)\n                setIsAlertDialogOpen(true)\n                return\n              }\n              setDataset(addSelected(dataset))\n              setDataLoadState(DataLoadState.Loaded)\n            }\n          }}\n        />\n      </Box>\n    </>\n  )\n}\n","import { SampleDataset } from '../constants/data/sampleDataset'\nimport { DataLoadError } from '../constants/data/dataLoadState'\n\nexport const EMPTY_DATA_TEXT = {\n  content: `To use the application, first load the dataset from a JSON or CSV file. You can also try this application with sample data.`,\n  loading: `Loading...`,\n}\n\nexport const TOP_TOOLBAR_TEXT = {\n  labelDetailsVisible: `Display details`,\n  labelClearBrushes: `Clear brushes`,\n  labelAddView: `Add a view`,\n  labelBrushingOnEOM: `Brushing set only at the end of the move`,\n  addViewDialogTitle: `Add a view`,\n  noOption: `All view options are currently displayed.`,\n  fileReader: {\n    sampleDataLabel: `Try it on the sample data`,\n    sampleDataDialogTitle: `Select sample dataset`,\n    sampleDataDialogText: {\n      [SampleDataset.flower]: `Flower dataset`,\n      [SampleDataset.bird]: `Bird dataset`,\n      [SampleDataset.car]: `Car dataset`,\n    },\n    alertDialog: {\n      [DataLoadError.unsupportedFile]: {\n        title: `File type not supported`,\n        description: `This file type is not supported. Use JSON or CSV file.`,\n      },\n      [DataLoadError.unsupportedFileFormat]: {\n        title: `File format not supported`,\n        description: `The file format is invalid. The valid json file format is an array of objects with the same keys and simple JSON values (number, string, boolean, null)`,\n      },\n      confirm: `OK`,\n    },\n  },\n  saveText: {\n    header: `Save to file`,\n    description: `Do you want to save the visualization to an SVG file?`,\n    save: `Save`,\n    confirm: `Save`,\n    cancel: `Cancel`,\n  },\n}\n","import { SxProps } from '@mui/system'\n\nimport { border, px } from '../../../helpers/d3/stringGetters'\nimport { TOP_TOOLBAR_COLORS } from '../../../styles/colors'\n\nexport const topToolbarStyle: Record<string, SxProps> = {\n  toolbar: {\n    width: `100%`,\n    padding: px(10, 0),\n    display: `flex`,\n    justifyContent: `space-between`,\n    alignItems: `stretch`,\n    bgcolor: TOP_TOOLBAR_COLORS.background,\n    color: TOP_TOOLBAR_COLORS.font,\n  },\n  left: {\n    display: `flex`,\n    margin: px(0, 12),\n    alignItems: `center`,\n  },\n  separator: {\n    height: `100%`,\n    margin: px(0, 4),\n    borderLeft: border(2, TOP_TOOLBAR_COLORS.border),\n  },\n  right: {\n    display: `flex`,\n  },\n}\n","import { SxProps } from '@mui/system'\n\nimport { border, px } from '../../../../../helpers/d3/stringGetters'\nimport { BUTTON_COLORS } from '../../../../../styles/colors'\n\nexport const topToolbarButtonStyle: Record<string, SxProps> = {\n  button: {\n    margin: px(0, 5),\n    padding: px(4),\n    minWidth: 0,\n    '&.MuiButtonBase-root': {\n      bgcolor: BUTTON_COLORS.buttonDisableBackground,\n      color: BUTTON_COLORS.fontDisabled,\n      border: border(1, BUTTON_COLORS.border),\n    },\n    '&.MuiButtonBase-root:not(.Mui-disabled)': {\n      bgcolor: BUTTON_COLORS.buttonOnBackground,\n      color: BUTTON_COLORS.fontOn,\n      '&.MuiToggleButton-root:not(.Mui-selected)': {\n        bgcolor: BUTTON_COLORS.buttonOffBackground,\n        color: BUTTON_COLORS.fontOff,\n      },\n    },\n  },\n}\n","import { VoidFunctionComponent } from 'react'\nimport { Button, Tooltip } from '@mui/material'\n\nimport { topToolbarButtonStyle } from '../../../../../components-style/content/top-toolbar/items/buttons/topToolbarButtonStyle'\n\nexport interface ClickableButtonDataProps {\n  onClick: () => void\n  disabled?: boolean\n  icon: JSX.Element\n  label: string\n}\n\nexport type ButtonProps = ClickableButtonDataProps\n\nexport const ClickableButton: VoidFunctionComponent<ButtonProps> = ({ icon, onClick, disabled, label }) => (\n  <Button variant=\"contained\" onClick={onClick} sx={topToolbarButtonStyle.button} disabled={disabled}>\n    <Tooltip title={label}>{icon}</Tooltip>\n  </Button>\n)\n","import { parse } from 'csv-string'\nimport { DataType, JsonValue } from '../../types/data/data'\n\nexport const isJsonValue = (value: unknown): value is JsonValue =>\n  typeof value === `number` || typeof value === `string` || typeof value === `boolean` || value === null\n\nexport const isArrayOfDataType = (dataset: unknown): dataset is ReadonlyArray<DataType> => {\n  if (Array.isArray(dataset) && dataset.length > 0) {\n    const example = dataset[0]\n    const keys = Object.keys(example)\n    return dataset.every(\n      (data) => Object.keys(data).every((key, idx) => key === keys[idx]) && Object.values(data).every(isJsonValue),\n    )\n  }\n  return false\n}\n\nexport const CsvParse = (textCsv: string): DataType[] =>\n  parse(textCsv, { output: `objects` }).map((data) =>\n    Object.fromEntries(\n      Object.keys(data).map((key) => {\n        const value = data[key]\n        if (value.toLowerCase() === `null` || value === ``) return [key, null]\n        if (value.toLowerCase() === `true`) return [key, true]\n        if (value.toLowerCase() === `false`) return [key, false]\n        const numValue = Number(value.replace(`,`, `.`))\n        if (!isNaN(numValue)) return [key, numValue]\n        return [key, value]\n      }),\n    ),\n  )\n","import { SxProps } from '@mui/system'\n\nimport { border, px } from '../../../../../helpers/d3/stringGetters'\nimport { HIGHLIGHT_COLOR } from '../../../../../styles/colors'\n\nexport const getFileReaderBoxStyle = (isHighlighted: boolean): SxProps => ({\n  transition: `0.3s all ease`,\n  border: isHighlighted ? border(2, HIGHLIGHT_COLOR.border) : border(0, HIGHLIGHT_COLOR.border),\n  bgcolor: isHighlighted ? HIGHLIGHT_COLOR.background : HIGHLIGHT_COLOR.backgroundGone,\n\n  padding: isHighlighted ? px(10, 0) : 0,\n  borderRadius: px(10),\n  '& input': {\n    width: px(220),\n  },\n})\n","import { SxProps } from '@mui/system'\nimport { px } from '../../../helpers/d3/stringGetters'\nimport { SITE_COLORS, ERROR_COLORS } from '../../../styles/colors'\n\nexport const dialogStyle: Record<string, SxProps> = {\n  alert: {\n    color: ERROR_COLORS.font,\n  },\n  text: {\n    padding: px(25, 30, 20),\n    color: SITE_COLORS.font,\n  },\n}\n","import {\n  Avatar,\n  Dialog,\n  DialogTitle,\n  Divider,\n  List,\n  ListItem,\n  ListItemAvatar,\n  ListItemText,\n  Typography,\n} from '@mui/material'\n\nimport { dialogStyle } from '../../../../components-style/content/common/dialogStyle'\n\nexport interface Option<T> {\n  key: T\n  label: string\n  icon: JSX.Element\n}\n\nexport interface SelectionDialogProps<T> {\n  isOpen: boolean\n  onClose: () => void\n  title: string\n  options: Array<Option<T>>\n  handleListItemClick: (optionKey: T) => void\n  noOptionText?: string\n}\n\nexport const SelectionDialog = <T,>({\n  isOpen,\n  onClose,\n  title,\n  options,\n  handleListItemClick,\n  noOptionText,\n}: SelectionDialogProps<T>): JSX.Element => (\n  <Dialog onClose={onClose} open={isOpen}>\n    <DialogTitle>{title}</DialogTitle>\n    <Divider />\n    <List>\n      {options.map((option) => (\n        <ListItem button onClick={() => handleListItemClick(option.key)} key={String(option.key)}>\n          <ListItemAvatar>\n            <Avatar>{option.icon}</Avatar>\n          </ListItemAvatar>\n          <ListItemText primary={option.label} />\n        </ListItem>\n      ))}\n      {!options.length && <Typography sx={dialogStyle.text}>{noOptionText}</Typography>}\n    </List>\n  </Dialog>\n)\n","import { VoidFunctionComponent } from 'react'\nimport { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Divider } from '@mui/material'\n\nimport { dialogStyle } from '../../../../components-style/content/common/dialogStyle'\n\nexport interface InformationDialogProps {\n  isOpen: boolean\n  onClose: () => void\n  title?: string\n  description?: string\n  confirmText: string\n  alert?: boolean\n}\n\nexport const InformationDialog: VoidFunctionComponent<InformationDialogProps> = ({\n  isOpen,\n  onClose,\n  title,\n  description,\n  confirmText,\n  alert = false,\n}) => (\n  <Dialog onClose={onClose} open={isOpen}>\n    <DialogTitle>{title}</DialogTitle>\n    <Divider />\n    <DialogContent>\n      <DialogContentText sx={alert ? dialogStyle.alert : {}}>{description}</DialogContentText>\n    </DialogContent>\n    <DialogActions>\n      <Button onClick={onClose} autoFocus>\n        {confirmText}\n      </Button>\n    </DialogActions>\n  </Dialog>\n)\n","import { SelectableDataType } from '../../types/data/data'\n\ntype Comparator = (a: SelectableDataType, b: SelectableDataType) => number\n\nconst descCompare = <T>(a: T, b: T, orderBy: keyof T) =>\n  b[orderBy] < a[orderBy] ? -1 : b[orderBy] > a[orderBy] ? 1 : 0\n\nexport enum SortType {\n  asc = `asc`,\n  desc = `desc`,\n}\n\nexport const getComparator = (sort: SortType, orderBy: keyof SelectableDataType): Comparator =>\n  sort === SortType.desc ? (a, b) => descCompare(a, b, orderBy) : (a, b) => -descCompare(a, b, orderBy)\n","import { Dispatch, VoidFunctionComponent, MouseEvent, SetStateAction } from 'react'\nimport { ToggleButton, ToggleButtonGroup, Tooltip } from '@mui/material'\n\nimport { topToolbarButtonStyle } from '../../../../../components-style/content/top-toolbar/items/buttons/topToolbarButtonStyle'\n\ntype SetValue = Dispatch<SetStateAction<boolean>> | ((newValue: boolean) => void)\n\nexport interface ToggleButtonProps {\n  value: boolean\n  setValue: SetValue\n  icon: JSX.Element\n  label: string\n  disabled?: boolean\n}\n\nexport const ToggleButtonSingle: VoidFunctionComponent<ToggleButtonProps> = ({\n  icon,\n  value,\n  setValue,\n  label,\n  disabled,\n}) => {\n  const handleChange = (event: MouseEvent<HTMLElement>, checked: string[]) => {\n    if (checked.length && checked[0] === onValue) {\n      return setValue(true)\n    }\n    return setValue(false)\n  }\n  const onValue = `on`\n  return (\n    <ToggleButtonGroup value={value ? [onValue] : []} onChange={handleChange}>\n      <ToggleButton sx={topToolbarButtonStyle.button} value={onValue} aria-label={label} disabled={disabled}>\n        <Tooltip title={label}>{icon}</Tooltip>\n      </ToggleButton>\n    </ToggleButtonGroup>\n  )\n}\n","import { SxProps } from '@mui/system'\n\nimport { px } from '../../../../../helpers/d3/stringGetters'\nimport { BUTTON_COLORS } from '../../../../../styles/colors'\n\nexport const openSettingsButtonStyle: Record<string, SxProps> = {\n  settings: {\n    margin: px(0, 10, 0, 6),\n    color: BUTTON_COLORS.buttonOnBackground,\n    '& .Mui-disabled': {\n      color: BUTTON_COLORS.buttonOnBackground,\n    },\n  },\n}\n","import { VoidFunctionComponent } from 'react'\nimport { Settings } from '@mui/icons-material'\nimport { IconButton } from '@mui/material'\n\nimport { openSettingsButtonStyle } from '../../../../../components-style/content/top-toolbar/items/buttons/openSettingsButtonStyle'\n\nexport interface OpenSettingsButtonProps {\n  disabled?: boolean\n  open: () => void\n}\n\nexport const OpenSettingsButton: VoidFunctionComponent<OpenSettingsButtonProps> = ({ disabled, open }) => (\n  <IconButton size=\"small\" disabled={disabled} onClick={open} sx={openSettingsButtonStyle.settings}>\n    <Settings />\n  </IconButton>\n)\n","import { Dispatch, VoidFunctionComponent, SetStateAction } from 'react'\nimport { AddCircle, AutoFixOff, SkipNext } from '@mui/icons-material'\nimport { Info } from '@mui/icons-material'\n\nimport { Box } from '@mui/material'\nimport { SideEffectVoid } from '../../../types/basic/functionTypes'\n\nimport { TOP_TOOLBAR_TEXT } from '../../../text/SiteText'\n\nimport { topToolbarStyle } from '../../../components-style/content/top-toolbar/topToolbarStyle'\n\nimport { ClickableButton } from './items/buttons/ClickableButton'\nimport { FileReader, FileReaderDataProps } from './items/file-reader/FileReader'\nimport { ToggleButtonSingle } from './items/buttons/ToggleButtonSingle'\nimport { OpenSettingsButton } from './items/buttons/OpenSettingsButton'\n\nexport interface TopToolbarProps extends FileReaderDataProps {\n  openDrawer: SideEffectVoid\n  isToolsDisabled: boolean\n\n  isDetailsVisible: boolean\n  setIsDetailsVisible: Dispatch<SetStateAction<boolean>>\n  isBrushingOnEndOfMove: boolean\n  setIsBrushingOnEndOfMove: (newIsBrushingOnEndOfMove: boolean) => void\n\n  isBrushingActive: boolean\n  clearBrushes: () => void\n\n  setIsAddViewDialogOpen: Dispatch<SetStateAction<boolean>>\n}\n\nexport const TopToolbar: VoidFunctionComponent<TopToolbarProps> = ({\n  openDrawer,\n  isToolsDisabled,\n  isDetailsVisible,\n  setIsDetailsVisible,\n  isBrushingOnEndOfMove,\n  setIsBrushingOnEndOfMove,\n  isBrushingActive,\n  clearBrushes,\n  setDataset,\n  setDataLoadState,\n  setIsAddViewDialogOpen,\n}) => (\n  <Box sx={topToolbarStyle.toolbar}>\n    <Box sx={topToolbarStyle.left}>\n      <ToggleButtonSingle\n        icon={<Info />}\n        value={isDetailsVisible}\n        setValue={setIsDetailsVisible}\n        disabled={isToolsDisabled}\n        label={TOP_TOOLBAR_TEXT.labelDetailsVisible}\n      />\n      <ToggleButtonSingle\n        icon={<SkipNext />}\n        value={isBrushingOnEndOfMove}\n        setValue={setIsBrushingOnEndOfMove}\n        disabled={isToolsDisabled}\n        label={TOP_TOOLBAR_TEXT.labelBrushingOnEOM}\n      />\n      <Box sx={topToolbarStyle.separator} />\n      <ClickableButton\n        icon={<AutoFixOff />}\n        onClick={clearBrushes}\n        disabled={!isBrushingActive}\n        label={TOP_TOOLBAR_TEXT.labelClearBrushes}\n      />\n      <ClickableButton\n        icon={<AddCircle />}\n        onClick={() => setIsAddViewDialogOpen(true)}\n        disabled={isToolsDisabled}\n        label={TOP_TOOLBAR_TEXT.labelAddView}\n      />\n    </Box>\n    <Box sx={topToolbarStyle.right}>\n      <FileReader setDataset={setDataset} setDataLoadState={setDataLoadState} isHighlighted={isToolsDisabled} />\n      <OpenSettingsButton open={openDrawer} disabled={isToolsDisabled} />\n    </Box>\n  </Box>\n)\n","/**\n * Every string is retyped to the concrete string value, because of deeper D3.js type checks,\n * that can cause errors if only string type is used with it\n */\ninterface SVGType {\n  elements: {\n    svg: `svg`\n    g: `g`\n    circle: `circle`\n    rect: `rect`\n    path: `path`\n    text: `text`\n    div: `div`\n  }\n  attributes: {\n    class: `class`\n    d: `d`\n    transform: `transform`\n    x: `x`\n    y: `y`\n    width: `width`\n    height: `height`\n    cx: `cx`\n    cy: `cy`\n    r: `r`\n    strokeWidth: `stroke-width`\n  }\n  style: {\n    fill: `fill`\n    stroke: `stroke`\n    opacity: `opacity`\n    left: `left`\n    top: `top`\n    display: `display`\n  }\n  values: {\n    none: `none`\n    block: `block`\n  }\n}\n\n/**\n * Constants used to work with svg D3.js.\n * Helps to avoid typos and make clear list of what is used\n */\nexport const SVG: SVGType = {\n  elements: {\n    svg: `svg`,\n    g: `g`,\n    circle: `circle`,\n    rect: `rect`,\n    path: `path`,\n    text: `text`,\n    div: `div`,\n  },\n  attributes: {\n    class: `class`,\n    d: `d`,\n    transform: `transform`,\n    x: `x`,\n    y: `y`,\n    width: `width`,\n    height: `height`,\n    cx: `cx`,\n    cy: `cy`,\n    r: `r`,\n    strokeWidth: `stroke-width`,\n  },\n  style: {\n    fill: `fill`,\n    stroke: `stroke`,\n    opacity: `opacity`,\n    left: `left`,\n    top: `top`,\n    display: `display`,\n  },\n  values: {\n    none: `none`,\n    block: `block`,\n  },\n}\n","import { selectAll } from 'd3'\n\nimport { SVG } from '../../constants/svg'\n\nimport { getClass } from './stringGetters'\n\nexport const displayDetails = (isDetailsVisible: boolean | undefined, tooltipClass: string): void => {\n  if (isDetailsVisible) {\n    selectAll(getClass(tooltipClass)).style(SVG.style.display, SVG.values.block)\n    return\n  }\n  selectAll(getClass(tooltipClass)).style(SVG.style.display, SVG.values.none)\n}\n","import { GridLayoutItem } from '../../types/views/Grid'\nimport { ViewType } from './ViewTypes'\n\nexport const VIEW_BORDER_SIZE = 5\n\nexport const DRAG_HANDLE = `drag-handle`\n\nexport const HEADER_HEIGHT = 30\n\nexport const VIEW_DEFAULT_SIZE = {\n  width: 200,\n  height: 200,\n}\n\nexport const COLUMNS_COUNT = 25\nexport const ROW_HEIGHT = 10\n\nexport const DEFAULT_VIEW_DIMENSIONS: Record<ViewType, { w: number; h: number }> = {\n  [ViewType.Glyphs]: {\n    w: 12,\n    h: 12,\n  },\n  [ViewType.ParallelCoordinates]: {\n    w: 12,\n    h: 16,\n  },\n  [ViewType.ScatterPlotGlyphs]: {\n    w: 12,\n    h: 20,\n  },\n  [ViewType.ScatterPlotMatrix]: {\n    w: 14,\n    h: 26,\n  },\n  [ViewType.DataTable]: {\n    w: 18,\n    h: 20,\n  },\n}\n\nexport const VIEW_LIMITS = {\n  minW: 4,\n  minH: 5,\n}\n\nexport const DEFAULT_GRID_LAYOUT: GridLayoutItem[] = [\n  {\n    i: ViewType.ParallelCoordinates,\n    w: 14,\n    h: 17,\n    x: 0,\n    y: 0,\n  },\n  {\n    i: ViewType.ScatterPlotMatrix,\n    w: 11,\n    h: 30,\n    x: 14,\n    y: 0,\n  },\n  {\n    i: ViewType.Glyphs,\n    w: 14,\n    h: 13,\n    x: 0,\n    y: 17,\n  },\n].map((item) => ({ ...item, VIEW_LIMITS }))\n","export const TOOLTIP_CLASS = `tooltip-class`\n\nexport const TOOLTIP = {\n  visible: 1,\n  invisible: 0,\n  easeIn: 200,\n  easeOut: 500,\n  padding: {\n    top: 5,\n    bottom: 10,\n    lr: 5,\n  },\n}\n","import { ViewType } from '../../constants/views/ViewTypes'\n\nexport const MENU_BASE_TEXT = {\n  more: `More options`,\n  empty: `-----`,\n}\n\nexport const MENU_TEXT = {\n  attributes: `Display attributes:`,\n  category: `Colored by`,\n  ...MENU_BASE_TEXT,\n}\n\nexport const MARGIN_MENU_TEXT = {\n  header: `Margin`,\n  top: `Top`,\n  right: `Right`,\n  bottom: `Bottom`,\n  left: `Left`,\n}\n\nexport const OPACITY_MENU_TEXT = {\n  all: `Brushing not active`,\n  selected: `Selected`,\n  notSelected: `Not selected`,\n}\n\nexport const PALETTE_PICKER = {\n  header: `Category colors`,\n  categoriesLabel: [`c1`, `c2`, `c3`, `c4`, `c5`, `c6`, `c7`, `c8`, `c9`, `c10`],\n}\n\nexport const VIEW_NAMES: Record<ViewType, string> = {\n  [ViewType.ParallelCoordinates]: `Parallel Coordinates`,\n  [ViewType.ScatterPlotMatrix]: `Scatter Plot Matrix`,\n  [ViewType.Glyphs]: `Glyphs`,\n  [ViewType.ScatterPlotGlyphs]: `Scatter Plot Glyphs`,\n  [ViewType.DataTable]: `Data Table`,\n}\n","import { SxProps } from '@mui/system'\nimport { px } from '../../../helpers/d3/stringGetters'\nimport { TOOLTIP } from '../../../constants/views/tooltip'\nimport { PLOT_COLORS } from '../../../styles/colors'\n\nexport const viewGridStyle: Record<string, SxProps> = {\n  tooltip: {\n    position: `fixed`,\n    padding: px(TOOLTIP.padding.top, TOOLTIP.padding.lr, TOOLTIP.padding.bottom),\n    bgcolor: PLOT_COLORS.tooltipBackground,\n    color: PLOT_COLORS.tooltipFont,\n    borderRadius: px(5),\n    pointerEvents: `none`,\n    opacity: 0,\n    zIndex: 10,\n  },\n}\n","import { SxProps } from '@mui/system'\n\nimport { border, px } from '../../../helpers/d3/stringGetters'\nimport { DATA_DRAWER_COLORS } from '../../../styles/colors'\n\nexport const dataDrawerStyle: Record<string, SxProps> = {\n  drawer: {\n    width: px(250),\n    flexShrink: 0,\n    '& .MuiDrawer-paper': {\n      bgcolor: DATA_DRAWER_COLORS.background,\n      width: px(250),\n      alignItems: `flex-end`,\n      border: border(1, DATA_DRAWER_COLORS.border),\n    },\n    '& hr': {\n      width: `100%`,\n    },\n    '& .MuiSelect-select': {\n      padding: px(10, 12, 8),\n    },\n  },\n  header: {},\n  chevron: {\n    color: DATA_DRAWER_COLORS.icon,\n  },\n  menu: {\n    width: `100%`,\n    display: `flex`,\n    flexDirection: `column`,\n    flexGrow: 1,\n  },\n}\n","import {\n  CheckedForSelectableDataType,\n  ExtentForSelectableDataType,\n  SelectableDataType,\n  SelectedKey,\n} from '../../types/data/data'\n\nimport { CATEGORY_LIMIT } from '../../constants/data/data'\n\nconst getDatasetSample = (dataset: ReadonlyArray<SelectableDataType>) => dataset[0]\n\nexport const getAttributeKeys = (dataset: ReadonlyArray<SelectableDataType>): Array<keyof SelectableDataType> =>\n  Object.keys(getDatasetSample(dataset)).filter((key) => key !== SelectedKey)\n\nexport const getDefaultQuantitativeAttributesKeys = (\n  dataset: ReadonlyArray<SelectableDataType>,\n): Array<keyof SelectableDataType> => getAttributeKeys(dataset).filter((key) => typeof dataset[0][key] === `number`)\n\nexport const getQuantitativeAttributesKeys = (\n  dataset: ReadonlyArray<SelectableDataType>,\n): Array<keyof SelectableDataType> =>\n  getAttributeKeys(dataset).filter((key) => dataset.every((data) => !isNaN(Number(data[key]))))\n\nexport const getCategoryAttributesKeys = (\n  dataset: ReadonlyArray<SelectableDataType>,\n): Array<keyof SelectableDataType> => {\n  const keys = getAttributeKeys(dataset)\n  return keys.filter((key) => {\n    const uniqueValues = new Set(dataset.map((data) => data[key]))\n    return uniqueValues.size < CATEGORY_LIMIT\n  })\n}\n\nexport const getDefaultAllAttributesChecked = (\n  dataset: ReadonlyArray<SelectableDataType>,\n): CheckedForSelectableDataType => {\n  const keys = getAttributeKeys(dataset)\n  return Object.fromEntries(keys.map((key) => [key, true]))\n}\n\nexport const getDefaultQuantitativeAttributesChecked = (\n  dataset: ReadonlyArray<SelectableDataType>,\n): CheckedForSelectableDataType => {\n  const defaultQuantitativeAttributesKeys = getDefaultQuantitativeAttributesKeys(dataset)\n  const possibleQuantitativeAttributesKeys = getQuantitativeAttributesKeys(dataset)\n\n  return Object.fromEntries(\n    possibleQuantitativeAttributesKeys.map((key) => [key, defaultQuantitativeAttributesKeys.some((kk) => kk === key)]),\n  )\n}\n\nexport const getDefaultSelectionForAttributes = (\n  displayAttributes: Array<keyof SelectableDataType>,\n): ExtentForSelectableDataType => Object.fromEntries(displayAttributes.map((key) => [key, null]))\n","export const CATEGORY_LIMIT = 10\n","export enum BrushAction {\n  start = `start`,\n  move = `brush`,\n  end = `end`,\n}\n","export enum MouseActions {\n  mouseOver = `mouseover`,\n  mouseOut = `mouseout`,\n  click = `click`,\n}\n","import { schemeCategory10 } from 'd3'\nimport { GlyphsSettings } from '../../types/views/settings/GlyphsSettings'\nimport { ColorArray } from '../../types/styling/ColorArray'\nimport { SortType } from '../../helpers/data/comparator'\n\nexport const MIN_GLYPHS_ATTRIBUTE_COUNT = 3\n\nexport const GLYPHS_DEFAULT: Pick<\n  GlyphsSettings,\n  `glyphSize` | `glyphSpacing` | `margins` | `opacity` | `colorCategory` | `sortType`\n> = {\n  sortType: SortType.asc,\n  glyphSize: 35,\n  glyphSpacing: 3,\n  margins: [15, 10, 20, 10],\n  opacity: [60, 90, 30],\n  colorCategory: schemeCategory10 as ColorArray,\n}\n","import { ViewType } from '../../constants/views/ViewTypes'\nimport { MENU_TEXT, VIEW_NAMES } from './common'\n\nexport const GLYPHS_TEXT = {\n  unavailable: `The glyph plot cannot be displayed with less than 3 attributes. To generate a glyph plot, select more attributes from the menu.`,\n}\n\nexport const GLYPHS_MENU_TEXT = {\n  header: VIEW_NAMES[ViewType.Glyphs],\n  sorting: `Sorted by`,\n  unavailable: `The glyph plot cannot be used while data has less than 3 numerical attributes. Try to use different type of visualization that fits your data.`,\n  glyphSize: `Glyph size`,\n  glyphSpacing: `Glyph spacing`,\n  opacity: `Opacity of glyphs`,\n  ...MENU_TEXT,\n}\n","import { SxProps } from '@mui/system'\n\nimport { calc, border, px } from '../../../helpers/d3/stringGetters'\nimport { DATA_DRAWER_COLORS, ERROR_COLORS } from '../../../styles/colors'\nimport { DATA_DRAWER_FONT } from '../../../styles/font'\n\nexport const dataDrawerMenuStyle: Record<string, SxProps> = {\n  drawerMenu: {\n    width: calc(-20, `100%`),\n    padding: px(10),\n    display: `flex`,\n    flexDirection: `column`,\n    textAlign: `left`,\n    bgcolor: DATA_DRAWER_COLORS.drawerItemBackground,\n    borderBottom: border(1, DATA_DRAWER_COLORS.drawerItemBorder),\n    '& h1': {\n      borderBottom: border(1, DATA_DRAWER_COLORS.drawerItemBorder),\n      fontSize: DATA_DRAWER_FONT.headerFontSize,\n      width: `100%`,\n    },\n    '& hr': {\n      margin: px(4, 0, 3),\n    },\n    '& label': {\n      fontSize: DATA_DRAWER_FONT.labelFontSize,\n      color: DATA_DRAWER_COLORS.label,\n    },\n    '& .MuiFormControlLabel-root': {\n      padding: px(2, 10),\n    },\n    '& .MuiCheckbox-root ': {\n      padding: 0,\n    },\n    '& > div': {\n      marginTop: px(10),\n    },\n  },\n  insufficientAttributeNum: {\n    padding: px(10),\n    fontSize: DATA_DRAWER_FONT.fontSize,\n    color: ERROR_COLORS.font,\n  },\n  accordion: {\n    '&.MuiPaper-root': {\n      borderRadius: 0,\n    },\n    '& .MuiButtonBase-root': {\n      minHeight: 0,\n      bgcolor: DATA_DRAWER_COLORS.drawerItemBackgroundDimmed,\n      '&.Mui-expanded': {\n        minHeight: 0,\n      },\n    },\n    '& .MuiAccordionSummary-content': {\n      margin: px(2, 0, 5),\n      '&.Mui-expanded': {\n        margin: px(2, 0, 5),\n      },\n    },\n    '& .MuiAccordionDetails-root': {\n      padding: 0,\n      '& > *:not(hr)': {\n        padding: px(5, 7),\n      },\n    },\n  },\n}\n","import { SxProps } from '@mui/system'\nimport { px } from '../../../../helpers/d3/stringGetters'\n\nexport const attributeCheckerStyle: Record<string, SxProps> = {\n  buttons: {\n    display: `flex`,\n    flexDirection: `column`,\n  },\n  control: {\n    margin: px(0, 5),\n    padding: 0,\n    minWidth: 0,\n    height: 15,\n  },\n}\n","import { Dispatch, SetStateAction } from 'react'\nimport { Box, Button, Checkbox, FormControlLabel } from '@mui/material'\nimport { ArrowDropDown, ArrowDropUp } from '@mui/icons-material'\n\nimport { CheckedForSelectableDataType, SelectableDataType } from '../../../../types/data/data'\n\nimport { otherCasesToWhitespaces } from '../../../../helpers/data/formatText'\n\nimport { ViewType } from '../../../../constants/views/ViewTypes'\n\nimport { Settings, SettingsType } from '../../../../types/views/settings/Settings'\nimport { attributeCheckerStyle } from '../../../../components-style/content/data-drawer/items/attributeCheckerStyle'\n\nexport interface AttributeCheckerProps<T extends SettingsType> {\n  viewType: ViewType\n  attributesKeys: Array<keyof SelectableDataType>\n  handleChangeSettings?: () => void\n  getNewSettings: (newChecked: CheckedForSelectableDataType, prevSettings: T) => Partial<T>\n  setSettings: Dispatch<SetStateAction<Settings>>\n  label: string\n\n  checked: CheckedForSelectableDataType\n  setChecked: Dispatch<SetStateAction<CheckedForSelectableDataType>>\n  setAttributesKeys: Dispatch<SetStateAction<Array<keyof SelectableDataType>>>\n}\n\nexport const AttributeChecker = <T extends SettingsType>({\n  viewType,\n  attributesKeys,\n  handleChangeSettings,\n  getNewSettings,\n  setSettings,\n  label,\n  checked,\n  setChecked,\n  setAttributesKeys,\n}: AttributeCheckerProps<T>): JSX.Element => {\n  const handleCheckboxChange = (eventChecked: boolean, key: keyof SelectableDataType) => {\n    const newChecked = { ...checked, [key]: eventChecked }\n    setChecked(newChecked)\n    if (handleChangeSettings) handleChangeSettings()\n    setSettings((prev) => {\n      const prevSettings = prev[viewType]! as T\n      const newSettings = getNewSettings(newChecked, prevSettings)\n      return {\n        ...prev,\n        [viewType]: {\n          ...prevSettings,\n          ...newSettings,\n        },\n      }\n    })\n  }\n  const handleMove = (newAttributesKeys: Array<keyof SelectableDataType>) => {\n    if (handleChangeSettings) handleChangeSettings()\n    setAttributesKeys(newAttributesKeys)\n    setSettings((prev) => {\n      const prevSettings = prev[viewType]! as T\n      return {\n        ...prev,\n        [viewType]: {\n          ...prevSettings,\n          displayAttributes: newAttributesKeys.filter((key) => checked[key]),\n        },\n      }\n    })\n  }\n  const onUpButton = (idx: number) => {\n    const newAttributesKeys = [...attributesKeys]\n    ;[newAttributesKeys[idx - 1], newAttributesKeys[idx]] = [newAttributesKeys[idx], newAttributesKeys[idx - 1]]\n    handleMove(newAttributesKeys)\n  }\n\n  const onDownButton = (idx: number) => {\n    const newAttributesKeys = [...attributesKeys]\n    ;[newAttributesKeys[idx + 1], newAttributesKeys[idx]] = [newAttributesKeys[idx], newAttributesKeys[idx + 1]]\n    handleMove(newAttributesKeys)\n  }\n\n  return (\n    <>\n      <label>{label}</label>\n      {attributesKeys.map((key, idx) => (\n        <FormControlLabel\n          control={\n            <>\n              <Box sx={attributeCheckerStyle.buttons}>\n                <Button onClick={() => onUpButton(idx)} disabled={idx === 0} sx={attributeCheckerStyle.control}>\n                  <ArrowDropUp />\n                </Button>\n                <Button\n                  onClick={() => onDownButton(idx)}\n                  disabled={idx === attributesKeys.length - 1}\n                  sx={attributeCheckerStyle.control}\n                >\n                  <ArrowDropDown />\n                </Button>\n              </Box>\n              <Checkbox checked={checked[key]} onChange={(e) => handleCheckboxChange(e.target.checked, key)} />\n            </>\n          }\n          label={otherCasesToWhitespaces(key)}\n          key={`check-${viewType}-${idx}`}\n        />\n      ))}\n    </>\n  )\n}\n","import { Dispatch, VoidFunctionComponent, SetStateAction } from 'react'\nimport { MenuItem, TextField } from '@mui/material'\n\nimport { SelectableDataType } from '../../../../types/data/data'\n\nimport { otherCasesToWhitespaces } from '../../../../helpers/data/formatText'\n\nimport { ViewType } from '../../../../constants/views/ViewTypes'\n\nimport { MENU_TEXT } from '../../../../text/views-and-menus/common'\n\nimport { Settings } from '../../../../types/views/settings/Settings'\n\nexport interface CategorySelectorProps {\n  viewType: ViewType\n  value: keyof SelectableDataType\n  attributesKeys: Array<keyof SelectableDataType>\n  setSettings: Dispatch<SetStateAction<Settings>>\n  label: string\n}\n\nexport const CategorySelector: VoidFunctionComponent<CategorySelectorProps> = ({\n  viewType,\n  value,\n  attributesKeys,\n  setSettings,\n  label,\n}) => {\n  const handleSelectCategoryChange = (categoryAttribute: keyof SelectableDataType | -1) => {\n    setSettings((prev) => {\n      const prevSettings = prev[viewType]!\n      return {\n        ...prev,\n        [viewType]: {\n          ...prevSettings,\n          categoryAttribute: categoryAttribute === -1 ? undefined : categoryAttribute,\n        },\n      }\n    })\n  }\n  return (\n    <TextField value={value ?? -1} onChange={(e) => handleSelectCategoryChange(e.target.value)} select label={label}>\n      {attributesKeys.map((key, idx) => (\n        <MenuItem value={key} key={`category-${viewType}-${idx}`}>\n          {otherCasesToWhitespaces(key)}\n        </MenuItem>\n      ))}\n      <MenuItem value={-1}>{MENU_TEXT.empty}</MenuItem>\n    </TextField>\n  )\n}\n","import { Dispatch, SetStateAction } from 'react'\nimport { MenuItem, TextField } from '@mui/material'\n\nimport { SelectableDataType } from '../../../../types/data/data'\n\nimport { otherCasesToWhitespaces } from '../../../../helpers/data/formatText'\n\nimport { ViewType } from '../../../../constants/views/ViewTypes'\n\nimport { Settings } from '../../../../types/views/settings/Settings'\n\nexport interface SelectorProps<Opt> {\n  viewType: ViewType\n  value: keyof SelectableDataType\n  attributesKeys: Array<keyof SelectableDataType>\n  setSettings: Dispatch<SetStateAction<Settings>>\n  handleChangeSettings?: () => void\n  label: string\n  settingsKey: keyof Opt\n}\n\nexport const Selector = <Opt,>({\n  viewType,\n  value,\n  attributesKeys,\n  setSettings,\n  label,\n  settingsKey,\n  handleChangeSettings,\n}: SelectorProps<Opt>): JSX.Element => {\n  const handleSelectChange = (newValue: keyof SelectableDataType) => {\n    if (handleChangeSettings) handleChangeSettings()\n    setSettings((prev) => {\n      const prevSettings = prev[viewType]!\n      return {\n        ...prev,\n        [viewType]: {\n          ...prevSettings,\n          [settingsKey]: newValue,\n        },\n      }\n    })\n  }\n  return (\n    <TextField\n      value={value}\n      onChange={(e) => handleSelectChange(e.target.value as keyof SelectableDataType)}\n      select\n      label={label}\n    >\n      {attributesKeys.map((key, idx) => (\n        <MenuItem value={key} key={`${settingsKey}-${viewType}-${idx}`}>\n          {otherCasesToWhitespaces(key)}\n        </MenuItem>\n      ))}\n    </TextField>\n  )\n}\n","import { SxProps } from '@mui/system'\n\nimport { px } from '../../../../helpers/d3/stringGetters'\nimport { DATA_DRAWER_FONT } from '../../../../styles/font'\n\nexport const numberInputStyles: Record<string, SxProps> = {\n  vertical: {\n    display: `flex`,\n    flexDirection: `column`,\n  },\n  horizontal: {\n    display: `flex`,\n    flexDirection: `row`,\n  },\n  text: {\n    fontSize: px(DATA_DRAWER_FONT.fontSize),\n    padding: px(6, 5, 3),\n  },\n  textField: {\n    '&.MuiFormControl-root': {\n      margin: px(6, 6, 4),\n    },\n    '& input': {\n      padding: px(5, 10, 4),\n    },\n  },\n}\n","import { Dispatch, VoidFunctionComponent, SetStateAction } from 'react'\nimport { Box, TextField, Typography } from '@mui/material'\n\nimport { MarginArray } from '../../../../types/styling/Margin'\n\nimport { ViewType } from '../../../../constants/views/ViewTypes'\n\nimport { MARGIN_MENU_TEXT } from '../../../../text/views-and-menus/common'\n\nimport { numberInputStyles } from '../../../../components-style/content/data-drawer/items/numberInputStyles'\n\nimport { Settings } from '../../../../types/views/settings/Settings'\n\nexport interface MarginInputProps {\n  margins: MarginArray\n  setSettings: Dispatch<SetStateAction<Settings>>\n  viewType: ViewType\n}\n\nexport const MarginInput: VoidFunctionComponent<MarginInputProps> = ({ margins, setSettings, viewType }) => {\n  const handleMarginChange = (newMargin: number, idx: number) => {\n    const newMargins = [...margins]\n    newMargins[idx] = newMargin\n\n    setSettings((prev) => {\n      const prevSettings = prev[viewType]!\n      return {\n        ...prev,\n        [viewType]: {\n          ...prevSettings,\n          margins: newMargins,\n        },\n      }\n    })\n  }\n  return (\n    <Box sx={numberInputStyles.vertical}>\n      <Typography sx={numberInputStyles.text}>{MARGIN_MENU_TEXT.header}</Typography>\n      <Box sx={numberInputStyles.horizontal}>\n        <TextField\n          label={MARGIN_MENU_TEXT.top}\n          type=\"number\"\n          defaultValue={margins[0]}\n          sx={numberInputStyles.textField}\n          inputProps={{ inputMode: `numeric`, min: 0 }}\n          onChange={(e) => handleMarginChange(Number(e.target.value), 0)}\n        />\n        <TextField\n          label={MARGIN_MENU_TEXT.right}\n          type=\"number\"\n          defaultValue={margins[1]}\n          sx={numberInputStyles.textField}\n          inputProps={{ inputMode: `numeric`, min: 0 }}\n          onChange={(e) => handleMarginChange(Number(e.target.value), 1)}\n        />\n      </Box>\n      <Box sx={numberInputStyles.horizontal}>\n        <TextField\n          label={MARGIN_MENU_TEXT.bottom}\n          type=\"number\"\n          defaultValue={margins[2]}\n          sx={numberInputStyles.textField}\n          inputProps={{ inputMode: `numeric`, min: 0 }}\n          onChange={(e) => handleMarginChange(Number(e.target.value), 2)}\n        />\n        <TextField\n          label={MARGIN_MENU_TEXT.left}\n          type=\"number\"\n          defaultValue={margins[3]}\n          sx={numberInputStyles.textField}\n          inputProps={{ inputMode: `numeric`, min: 0 }}\n          onChange={(e) => handleMarginChange(Number(e.target.value), 3)}\n        />\n      </Box>\n    </Box>\n  )\n}\n","import { Dispatch, SetStateAction } from 'react'\nimport { Box, TextField } from '@mui/material'\n\nimport { ViewType } from '../../../../constants/views/ViewTypes'\n\nimport { numberInputStyles } from '../../../../components-style/content/data-drawer/items/numberInputStyles'\n\nimport { Settings } from '../../../../types/views/settings/Settings'\n\nexport interface NumberInputProps<T> {\n  label: string\n  valueKey: keyof T\n  value: number\n  setSettings: Dispatch<SetStateAction<Settings>>\n  viewType: ViewType\n  max?: number\n}\n\nexport const NumberInput = <T,>({\n  label,\n  value,\n  valueKey,\n  setSettings,\n  viewType,\n  max,\n}: NumberInputProps<T>): JSX.Element => {\n  const handleValueChange = (newValue: number) => {\n    setSettings((prev) => {\n      const prevSettings = prev[viewType]!\n      return {\n        ...prev,\n        [viewType]: {\n          ...prevSettings,\n          [valueKey]: newValue,\n        },\n      }\n    })\n  }\n  const maxVal = max ? { max } : {}\n  return (\n    <Box>\n      <TextField\n        label={label}\n        type=\"number\"\n        defaultValue={value}\n        sx={numberInputStyles.textField}\n        inputProps={{ inputMode: `numeric`, min: 0, ...maxVal }}\n        onChange={(e) => handleValueChange(Number(e.target.value))}\n      />\n    </Box>\n  )\n}\n","import { Dispatch, VoidFunctionComponent, SetStateAction } from 'react'\nimport { Box, TextField, Typography } from '@mui/material'\n\nimport { Opacity } from '../../../../types/styling/Opacity'\n\nimport { ViewType } from '../../../../constants/views/ViewTypes'\n\nimport { OPACITY_MENU_TEXT } from '../../../../text/views-and-menus/common'\n\nimport { numberInputStyles } from '../../../../components-style/content/data-drawer/items/numberInputStyles'\n\nimport { Settings } from '../../../../types/views/settings/Settings'\n\nexport interface OpacityInputProps {\n  header: string\n  opacity: Opacity\n  setSettings: Dispatch<SetStateAction<Settings>>\n  viewType: ViewType\n}\n\nexport const OpacityInput: VoidFunctionComponent<OpacityInputProps> = ({ header, opacity, setSettings, viewType }) => {\n  const handleOpacityChange = (newOpacity: number, idx: number) => {\n    const newOpacities = [...opacity]\n    newOpacities[idx] = newOpacity\n\n    setSettings((prev) => {\n      const prevSettings = prev[viewType]!\n      return {\n        ...prev,\n        [viewType]: {\n          ...prevSettings,\n          opacity: newOpacities,\n        },\n      }\n    })\n  }\n  return (\n    <Box sx={numberInputStyles.vertical}>\n      <Typography sx={numberInputStyles.text}>{header}</Typography>\n      <TextField\n        label={OPACITY_MENU_TEXT.all}\n        type=\"number\"\n        defaultValue={opacity[0]}\n        sx={numberInputStyles.textField}\n        inputProps={{ min: 0, max: 100 }}\n        onChange={(e) => handleOpacityChange(Number(e.target.value), 0)}\n      />\n      <Box sx={numberInputStyles.horizontal}>\n        <TextField\n          label={OPACITY_MENU_TEXT.selected}\n          type=\"number\"\n          defaultValue={opacity[1]}\n          sx={numberInputStyles.textField}\n          inputProps={{ min: 0, max: 100 }}\n          onChange={(e) => handleOpacityChange(Number(e.target.value), 1)}\n        />\n        <TextField\n          label={OPACITY_MENU_TEXT.notSelected}\n          type=\"number\"\n          defaultValue={opacity[2]}\n          sx={numberInputStyles.textField}\n          inputProps={{ min: 0, max: 100 }}\n          onChange={(e) => handleOpacityChange(Number(e.target.value), 2)}\n        />\n      </Box>\n    </Box>\n  )\n}\n","import { SxProps } from '@mui/system'\n\nimport { ColorArray } from '../../../../types/styling/ColorArray'\nimport { px } from '../../../../helpers/d3/stringGetters'\nimport { DATA_DRAWER_FONT } from '../../../../styles/font'\n\nexport const getColorInputStyle = (colors: ColorArray, index: number): SxProps => ({\n  bgcolor: colors[index],\n  '& input': {\n    width: `100%`,\n    height: px(20),\n    opacity: 0,\n  },\n})\n\nexport const palettePickerStyle: Record<string, SxProps> = {\n  picker: {\n    margin: px(5, 7),\n  },\n  text: {\n    fontSize: px(DATA_DRAWER_FONT.fontSize),\n  },\n  row: {\n    display: `flex`,\n    flexDirection: `row`,\n  },\n  col: {\n    display: `flex`,\n    flexDirection: `column`,\n    width: `20%`,\n  },\n}\n","import { ChangeEvent, Dispatch, VoidFunctionComponent, SetStateAction } from 'react'\nimport { Box, Typography } from '@mui/material'\n\nimport { ColorArray } from '../../../../types/styling/ColorArray'\n\nimport { ViewType } from '../../../../constants/views/ViewTypes'\n\nimport { PALETTE_PICKER } from '../../../../text/views-and-menus/common'\n\nimport {\n  getColorInputStyle,\n  palettePickerStyle,\n} from '../../../../components-style/content/data-drawer/items/palettePickerStyle'\n\nimport { Settings } from '../../../../types/views/settings/Settings'\n\nexport interface PalettePickerProps {\n  viewType: ViewType\n  colors: ColorArray\n  setSettings: Dispatch<SetStateAction<Settings>>\n}\n\nexport const PalettePicker: VoidFunctionComponent<PalettePickerProps> = ({ colors, setSettings, viewType }) => {\n  const handleSetColor = (event: ChangeEvent<HTMLInputElement>, idx: number) => {\n    const newColor = event.target.value\n    if (newColor) {\n      const newColors = [...colors]\n      newColors[idx] = newColor\n      setSettings((prev) => {\n        const prevSettings = prev[viewType]!\n        return {\n          ...prev,\n          [viewType]: {\n            ...prevSettings,\n            colorCategory: newColors,\n          },\n        }\n      })\n    }\n  }\n  const getInput = (idx: number) => (\n    <Box sx={palettePickerStyle.col} key={idx}>\n      <label>{PALETTE_PICKER.categoriesLabel[idx]}</label>\n      <Box sx={getColorInputStyle(colors, idx)}>\n        <input type=\"color\" value={colors[idx]} onChange={(e) => handleSetColor(e, idx)} />\n      </Box>\n    </Box>\n  )\n  return (\n    <Box sx={palettePickerStyle.picker}>\n      <Typography sx={palettePickerStyle.text}>{PALETTE_PICKER.header}</Typography>\n      <Box sx={palettePickerStyle.row}>{[0, 1, 2, 3, 4].map((idx) => getInput(idx))}</Box>\n      <Box sx={palettePickerStyle.row}>{[5, 6, 7, 8, 9].map((idx) => getInput(idx))}</Box>\n    </Box>\n  )\n}\n","import { SxProps } from '@mui/system'\nimport { px } from '../../../../helpers/d3/stringGetters'\nimport { BUTTON_COLORS } from '../../../../styles/colors'\n\nexport const toggleButtonsStyle: Record<string, SxProps> = {\n  group: {\n    width: `100%`,\n    display: `flex`,\n  },\n  button: {\n    flexGrow: 1,\n    padding: px(2, 5),\n    '&.Mui-selected': {\n      bgcolor: BUTTON_COLORS.buttonOnBackground,\n    },\n  },\n}\n","import { Dispatch, SetStateAction } from 'react'\nimport { Box, ToggleButton, ToggleButtonGroup } from '@mui/material'\n\nimport { Settings } from '../../../../types/views/settings/Settings'\n\nimport { ViewType } from '../../../../constants/views/ViewTypes'\n\nimport { toggleButtonsStyle } from '../../../../components-style/content/data-drawer/items/toggleButtonsStyle'\n\ninterface ToggleButtonsProps<T, Opt> {\n  viewType: ViewType\n  value: T\n  options: T[]\n  setSettings: Dispatch<SetStateAction<Settings>>\n  settingsKey: keyof Opt\n}\n\nexport const ToggleButtons = <T, Opt>({\n  viewType,\n  value,\n  options,\n  setSettings,\n  settingsKey,\n}: ToggleButtonsProps<T, Opt>): JSX.Element => {\n  const handleToggleButtonChange = (newValue: T) => {\n    setSettings((prev) => {\n      const prevSettings = prev[viewType]!\n      return {\n        ...prev,\n        [viewType]: {\n          ...prevSettings,\n          [settingsKey]: newValue,\n        },\n      }\n    })\n  }\n  return (\n    <Box>\n      <ToggleButtonGroup\n        sx={toggleButtonsStyle.group}\n        value={value}\n        exclusive\n        onChange={(e, value) => handleToggleButtonChange(value)}\n      >\n        {options.map((opt, idx) => (\n          <ToggleButton sx={toggleButtonsStyle.button} value={opt} key={idx}>\n            {opt}\n          </ToggleButton>\n        ))}\n      </ToggleButtonGroup>\n    </Box>\n  )\n}\n","import { VoidFunctionComponent, useCallback, useEffect, useState } from 'react'\nimport { Accordion, AccordionDetails, AccordionSummary, Box, Divider, Typography } from '@mui/material'\nimport { ExpandMore } from '@mui/icons-material'\n\nimport { CheckedForSelectableDataType } from '../../../../types/data/data'\nimport {\n  glyphSizeKey,\n  glyphSpacingKey,\n  GlyphsSettings,\n  sortAttributeKey,\n  sortTypeKey,\n} from '../../../../types/views/settings/GlyphsSettings'\nimport { MenuProps } from '../../../../types/views/MenuProps'\n\nimport {\n  getCategoryAttributesKeys,\n  getDefaultQuantitativeAttributesChecked,\n  getQuantitativeAttributesKeys,\n} from '../../../../helpers/data/data'\n\nimport { GLYPHS_DEFAULT, MIN_GLYPHS_ATTRIBUTE_COUNT } from '../../../../constants/views/glyphs'\nimport { ViewType } from '../../../../constants/views/ViewTypes'\n\nimport { GLYPHS_MENU_TEXT } from '../../../../text/views-and-menus/glyphs'\n\nimport { dataDrawerMenuStyle } from '../../../../components-style/content/data-drawer/dataDrawerMenuStyle'\n\nimport { AttributeChecker } from '../../data-drawer/items/AttributeChecker'\nimport { CategorySelector } from '../../data-drawer/items/CategorySelector'\nimport { Selector } from '../../data-drawer/items/Selector'\nimport { MarginInput } from '../../data-drawer/items/MarginInput'\nimport { NumberInput } from '../../data-drawer/items/NumberInput'\nimport { OpacityInput } from '../../data-drawer/items/OpacityInput'\nimport { PalettePicker } from '../../data-drawer/items/PalettePicker'\nimport { ToggleButtons } from '../../data-drawer/items/ToggleButtons'\nimport { SortType } from '../../../../helpers/data/comparator'\n\nexport const GlyphsMenu: VoidFunctionComponent<MenuProps> = ({ dataset, settings, setSettings }) => {\n  const viewType = ViewType.Glyphs\n  const glyphsSettings = settings[viewType]\n  const [quantitativeAttributesKeys, setQuantitativeAttributesKeys] = useState(getQuantitativeAttributesKeys(dataset))\n  const [checked, setChecked] = useState<CheckedForSelectableDataType>(getDefaultQuantitativeAttributesChecked(dataset))\n\n  const sortableAttributes = quantitativeAttributesKeys.filter((key) => checked[key])\n  const categoricalAttributes = getCategoryAttributesKeys(dataset)\n\n  const getCurrentDisplayAttributes = (currChecked: CheckedForSelectableDataType) =>\n    quantitativeAttributesKeys.filter((key) => currChecked[key])\n\n  const createGlyphsMenu = useCallback(() => {\n    const newChecked = getDefaultQuantitativeAttributesChecked(dataset)\n    const newQaKeys = getQuantitativeAttributesKeys(dataset)\n    const defaultSortAttribute = newQaKeys.filter((key) => newChecked[key])?.[0]\n    const defaultCategoryAttribute = getCategoryAttributesKeys(dataset)?.[0]\n    setChecked(newChecked)\n    setQuantitativeAttributesKeys(newQaKeys)\n    setSettings((prev) => {\n      const newGlyphs: GlyphsSettings = {\n        displayAttributes: newQaKeys.filter((key) => newChecked[key]),\n        sortAttribute: defaultSortAttribute,\n        categoryAttribute: defaultCategoryAttribute,\n        ...GLYPHS_DEFAULT,\n      }\n      return { ...prev, [ViewType.Glyphs]: newGlyphs }\n    })\n  }, [setSettings, dataset])\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(() => createGlyphsMenu(), [dataset]) // first time empty, call once\n\n  const getNewSettingsForAttributeChecker = (\n    newChecked: CheckedForSelectableDataType,\n    prevSettings: GlyphsSettings,\n  ): Partial<GlyphsSettings> => {\n    const displayAttributes = getCurrentDisplayAttributes(newChecked)\n    const newSortableAttributes = quantitativeAttributesKeys.filter((key) => newChecked[key])\n    const sortAttribute = newChecked[prevSettings.sortAttribute]\n      ? prevSettings.sortAttribute\n      : newSortableAttributes?.[0]\n    return { displayAttributes, sortAttribute }\n  }\n\n  if (glyphsSettings) {\n    return (\n      <Box sx={dataDrawerMenuStyle.drawerMenu}>\n        <h1>{GLYPHS_MENU_TEXT.header}</h1>\n        {quantitativeAttributesKeys.length >= MIN_GLYPHS_ATTRIBUTE_COUNT ? (\n          <>\n            <AttributeChecker\n              viewType={viewType}\n              attributesKeys={quantitativeAttributesKeys}\n              getNewSettings={getNewSettingsForAttributeChecker}\n              setSettings={setSettings}\n              label={GLYPHS_MENU_TEXT.attributes}\n              checked={checked}\n              setChecked={setChecked}\n              setAttributesKeys={setQuantitativeAttributesKeys}\n            />\n            <CategorySelector\n              viewType={viewType}\n              value={glyphsSettings.categoryAttribute!}\n              attributesKeys={categoricalAttributes}\n              setSettings={setSettings}\n              label={GLYPHS_MENU_TEXT.category}\n            />\n            <Selector\n              viewType={viewType}\n              value={glyphsSettings.sortAttribute!}\n              attributesKeys={sortableAttributes}\n              setSettings={setSettings}\n              label={GLYPHS_MENU_TEXT.sorting}\n              settingsKey={sortAttributeKey}\n            />\n            <ToggleButtons\n              viewType={viewType}\n              value={glyphsSettings.sortType}\n              options={Object.values<SortType>(SortType)}\n              setSettings={setSettings}\n              settingsKey={sortTypeKey}\n            />\n            <Accordion sx={dataDrawerMenuStyle.accordion}>\n              <AccordionSummary expandIcon={<ExpandMore />}>\n                <Typography>{GLYPHS_MENU_TEXT.more}</Typography>\n              </AccordionSummary>\n              <AccordionDetails>\n                <MarginInput margins={glyphsSettings.margins} setSettings={setSettings} viewType={viewType} />\n                <Divider />\n                <NumberInput\n                  value={glyphsSettings.glyphSize}\n                  valueKey={glyphSizeKey}\n                  setSettings={setSettings}\n                  label={GLYPHS_MENU_TEXT.glyphSize}\n                  viewType={viewType}\n                />\n                <NumberInput\n                  value={glyphsSettings.glyphSpacing}\n                  valueKey={glyphSpacingKey}\n                  setSettings={setSettings}\n                  label={GLYPHS_MENU_TEXT.glyphSpacing}\n                  viewType={viewType}\n                />\n                <Divider />\n                <OpacityInput\n                  header={GLYPHS_MENU_TEXT.opacity}\n                  opacity={glyphsSettings.opacity}\n                  setSettings={setSettings}\n                  viewType={viewType}\n                />\n                <Divider />\n                <PalettePicker colors={glyphsSettings.colorCategory} setSettings={setSettings} viewType={viewType} />\n              </AccordionDetails>\n            </Accordion>\n          </>\n        ) : (\n          <Box sx={dataDrawerMenuStyle.insufficientAttributeNum}>{GLYPHS_MENU_TEXT.unavailable}</Box>\n        )}\n      </Box>\n    )\n  }\n  return null\n}\n","import { SortType } from '../../../helpers/data/comparator'\n\nimport { SelectableDataType } from '../../data/data'\n\nimport { ViewVisualizationSettings } from './VisualizationSettings'\n\nexport const sortAttributeKey = `sortAttribute`\nexport const sortTypeKey = `sortType`\nexport const glyphSizeKey = `glyphSize`\nexport const glyphSpacingKey = `glyphSpacing`\n\n/**\n * Settings for Glyphs view\n */\nexport interface GlyphsSettings extends ViewVisualizationSettings {\n  /**\n   * Attribute for sorting glyphs from lowest to highest value\n   */\n  [sortAttributeKey]: keyof SelectableDataType\n\n  /**\n   * Sort type - asc/desc\n   */\n  [sortTypeKey]: SortType\n\n  /**\n   * Size of a glyph\n   */\n  [glyphSizeKey]: number\n\n  /**\n   * Spacing between glyphs\n   */\n  [glyphSpacingKey]: number\n}\n","import { schemeCategory10 } from 'd3'\nimport { ParallelCoordinatesSettings } from '../../types/views/settings/ParallelCoordinatesSettings'\nimport { ColorArray } from '../../types/styling/ColorArray'\n\nexport const MIN_PARALLEL_COORDINATES_ATTRIBUTE_COUNT = 2\n\nexport const PARALLEL_COORDINATES_DEFAULT: Pick<\n  ParallelCoordinatesSettings,\n  `margins` | `lineWidth` | `opacity` | `colorCategory`\n> = {\n  margins: [20, 55, 25, 60],\n  lineWidth: 1,\n  opacity: [50, 60, 20],\n  colorCategory: schemeCategory10 as ColorArray,\n}\n","import { ViewType } from '../../constants/views/ViewTypes'\nimport { MENU_TEXT, VIEW_NAMES } from './common'\n\nexport const PARALLEL_COORDINATES_TEXT = {\n  unavailable: `Parallel coordinates plot cannot be displayed with a single attribute. To generate a parallel coordinates plot, select multiple attributes from the menu.`,\n}\n\nexport const PARALLEL_COORDINATES_MENU_TEXT = {\n  header: VIEW_NAMES[ViewType.ParallelCoordinates],\n  unavailable: `The parallel coordinates plot cannot be used while data has less than 2 numerical attributes. Try to use different type of visualization that fits your data.`,\n  opacity: `Opacity of lines`,\n  lineWidth: `Line width`,\n  ...MENU_TEXT,\n}\n","import { VoidFunctionComponent, useCallback, useEffect, useState } from 'react'\nimport { Accordion, AccordionDetails, AccordionSummary, Box, Divider, Typography } from '@mui/material'\nimport { ExpandMore } from '@mui/icons-material'\n\nimport { CheckedForSelectableDataType } from '../../../../types/data/data'\nimport { lineWidthKey, ParallelCoordinatesSettings } from '../../../../types/views/settings/ParallelCoordinatesSettings'\nimport { MenuProps } from '../../../../types/views/MenuProps'\n\nimport {\n  getCategoryAttributesKeys,\n  getDefaultQuantitativeAttributesChecked,\n  getQuantitativeAttributesKeys,\n} from '../../../../helpers/data/data'\n\nimport {\n  MIN_PARALLEL_COORDINATES_ATTRIBUTE_COUNT,\n  PARALLEL_COORDINATES_DEFAULT,\n} from '../../../../constants/views/parallelCoordinates'\nimport { ViewType } from '../../../../constants/views/ViewTypes'\n\nimport { PARALLEL_COORDINATES_MENU_TEXT } from '../../../../text/views-and-menus/parallelCoordinates'\n\nimport { dataDrawerMenuStyle } from '../../../../components-style/content/data-drawer/dataDrawerMenuStyle'\n\nimport { AttributeChecker } from '../../data-drawer/items/AttributeChecker'\nimport { CategorySelector } from '../../data-drawer/items/CategorySelector'\nimport { MarginInput } from '../../data-drawer/items/MarginInput'\nimport { OpacityInput } from '../../data-drawer/items/OpacityInput'\nimport { NumberInput } from '../../data-drawer/items/NumberInput'\nimport { PalettePicker } from '../../data-drawer/items/PalettePicker'\n\nexport const ParallelCoordinatesMenu: VoidFunctionComponent<MenuProps> = ({\n  dataset,\n  settings,\n  setSettings,\n  cleanSelectedIfViewWasBrushing,\n}) => {\n  const viewType = ViewType.ParallelCoordinates\n  const parallelCoordinatesSettings = settings[viewType]\n\n  const [quantitativeAttributesKeys, setQuantitativeAttributesKeys] = useState(getQuantitativeAttributesKeys(dataset))\n  const [checked, setChecked] = useState<CheckedForSelectableDataType>(getDefaultQuantitativeAttributesChecked(dataset))\n\n  const categoricalAttributes = getCategoryAttributesKeys(dataset)\n\n  const getCurrentDisplayAttributes = (currChecked: CheckedForSelectableDataType) =>\n    quantitativeAttributesKeys.filter((key) => currChecked[key])\n\n  // first time empty\n  const createParallelCoordinatesMenu = useCallback(() => {\n    const newChecked = getDefaultQuantitativeAttributesChecked(dataset)\n    const newQaKeys = getQuantitativeAttributesKeys(dataset)\n    const defaultCategoryAttribute = getCategoryAttributesKeys(dataset)?.[0]\n    setChecked(newChecked)\n    setQuantitativeAttributesKeys(newQaKeys)\n    setSettings((prev) => {\n      const newParallelCoordinates: ParallelCoordinatesSettings = {\n        displayAttributes: newQaKeys.filter((key) => newChecked[key]),\n        categoryAttribute: defaultCategoryAttribute,\n        ...PARALLEL_COORDINATES_DEFAULT,\n      }\n      return { ...prev, [ViewType.ParallelCoordinates]: newParallelCoordinates }\n    })\n  }, [setSettings, dataset])\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(() => createParallelCoordinatesMenu(), [dataset])\n\n  const getNewSettingsForAttributeChecker = (newChecked: CheckedForSelectableDataType) => ({\n    displayAttributes: getCurrentDisplayAttributes(newChecked),\n  })\n\n  if (parallelCoordinatesSettings) {\n    return (\n      <Box sx={dataDrawerMenuStyle.drawerMenu}>\n        <h1>{PARALLEL_COORDINATES_MENU_TEXT.header}</h1>\n        {quantitativeAttributesKeys.length >= MIN_PARALLEL_COORDINATES_ATTRIBUTE_COUNT ? (\n          <>\n            <AttributeChecker\n              viewType={viewType}\n              attributesKeys={quantitativeAttributesKeys}\n              handleChangeSettings={() => cleanSelectedIfViewWasBrushing(viewType)}\n              getNewSettings={getNewSettingsForAttributeChecker}\n              setSettings={setSettings}\n              label={PARALLEL_COORDINATES_MENU_TEXT.attributes}\n              checked={checked}\n              setChecked={setChecked}\n              setAttributesKeys={setQuantitativeAttributesKeys}\n            />\n            <CategorySelector\n              viewType={viewType}\n              value={parallelCoordinatesSettings.categoryAttribute!}\n              attributesKeys={categoricalAttributes}\n              setSettings={setSettings}\n              label={PARALLEL_COORDINATES_MENU_TEXT.category}\n            />\n            <Accordion sx={dataDrawerMenuStyle.accordion}>\n              <AccordionSummary expandIcon={<ExpandMore />}>\n                <Typography>{PARALLEL_COORDINATES_MENU_TEXT.more}</Typography>\n              </AccordionSummary>\n              <AccordionDetails>\n                <MarginInput\n                  margins={parallelCoordinatesSettings.margins}\n                  setSettings={setSettings}\n                  viewType={viewType}\n                />\n                <Divider />\n                <NumberInput\n                  value={parallelCoordinatesSettings.lineWidth}\n                  valueKey={lineWidthKey}\n                  setSettings={setSettings}\n                  label={PARALLEL_COORDINATES_MENU_TEXT.lineWidth}\n                  viewType={viewType}\n                />\n                <Divider />\n                <OpacityInput\n                  header={PARALLEL_COORDINATES_MENU_TEXT.opacity}\n                  opacity={parallelCoordinatesSettings.opacity}\n                  setSettings={setSettings}\n                  viewType={viewType}\n                />\n                <Divider />\n                <PalettePicker\n                  colors={parallelCoordinatesSettings.colorCategory}\n                  setSettings={setSettings}\n                  viewType={viewType}\n                />\n              </AccordionDetails>\n            </Accordion>\n          </>\n        ) : (\n          <Box sx={dataDrawerMenuStyle.insufficientAttributeNum}>{PARALLEL_COORDINATES_MENU_TEXT.unavailable}</Box>\n        )}\n      </Box>\n    )\n  }\n  return null\n}\n","import { ViewVisualizationSettings } from './VisualizationSettings'\n\nexport const lineWidthKey = `lineWidth`\n\n/**\n * Settings for Parallel Coordinates view\n */\nexport interface ParallelCoordinatesSettings extends ViewVisualizationSettings {\n  /**\n   * Width of a data line\n   */\n  [lineWidthKey]: number\n}\n","import { schemeCategory10 } from 'd3'\nimport { ScatterPlotMatrixSettings } from '../../types/views/settings/ScatterPlotMatrixSettings'\nimport { ColorArray } from '../../types/styling/ColorArray'\n\nexport const MIN_SCATTER_PLOT_MATRIX_ATTRIBUTE_COUNT = 2\n\nexport const SCATTER_PLOT_MATRIX_DEFAULT: Pick<\n  ScatterPlotMatrixSettings,\n  `margins` | `pointSize` | `opacity` | `colorCategory`\n> = {\n  margins: [25, 20, 25, 45],\n  pointSize: 3,\n  opacity: [45, 80, 15],\n  colorCategory: schemeCategory10 as ColorArray,\n}\n","import { ViewType } from '../../constants/views/ViewTypes'\nimport { MENU_TEXT, VIEW_NAMES } from './common'\n\nexport const SCATTER_PLOT_MATRIX_TEXT = {\n  unavailable: `Scatter plot cannot be displayed with a single attribute. To generate a scatter plot, select multiple attributes from the menu.`,\n}\n\nexport const SCATTER_PLOT_MATRIX_MENU_TEXT = {\n  header: VIEW_NAMES[ViewType.ScatterPlotMatrix],\n  unavailable: `The scatter plot matrix plot cannot be used while data has less than 2 numerical attributes. Try to use different type of visualization that fits your data.`,\n  opacity: `Opacity of data points`,\n  pointSize: `Point size`,\n  ...MENU_TEXT,\n}\n","import { VoidFunctionComponent, useCallback, useEffect, useState } from 'react'\nimport { Accordion, AccordionDetails, AccordionSummary, Box, Divider, Typography } from '@mui/material'\nimport { ExpandMore } from '@mui/icons-material'\n\nimport { CheckedForSelectableDataType } from '../../../../types/data/data'\nimport { MenuProps } from '../../../../types/views/MenuProps'\nimport { pointSizeKey, ScatterPlotMatrixSettings } from '../../../../types/views/settings/ScatterPlotMatrixSettings'\n\nimport {\n  getCategoryAttributesKeys,\n  getDefaultQuantitativeAttributesChecked,\n  getQuantitativeAttributesKeys,\n} from '../../../../helpers/data/data'\n\nimport { ViewType } from '../../../../constants/views/ViewTypes'\nimport {\n  MIN_SCATTER_PLOT_MATRIX_ATTRIBUTE_COUNT,\n  SCATTER_PLOT_MATRIX_DEFAULT,\n} from '../../../../constants/views/scatterPlotMatrix'\n\nimport { SCATTER_PLOT_MATRIX_MENU_TEXT } from '../../../../text/views-and-menus/scatterPlotMatrix'\n\nimport { dataDrawerMenuStyle } from '../../../../components-style/content/data-drawer/dataDrawerMenuStyle'\n\nimport { AttributeChecker } from '../../data-drawer/items/AttributeChecker'\nimport { CategorySelector } from '../../data-drawer/items/CategorySelector'\nimport { MarginInput } from '../../data-drawer/items/MarginInput'\nimport { NumberInput } from '../../data-drawer/items/NumberInput'\nimport { OpacityInput } from '../../data-drawer/items/OpacityInput'\nimport { PalettePicker } from '../../data-drawer/items/PalettePicker'\n\nexport const ScatterPlotMatrixMenu: VoidFunctionComponent<MenuProps> = ({\n  dataset,\n  settings,\n  setSettings,\n  cleanSelectedIfViewWasBrushing,\n}) => {\n  const viewType = ViewType.ScatterPlotMatrix\n  const scatterPlotMatrixSettings = settings[viewType]\n\n  const [quantitativeAttributesKeys, setQuantitativeAttributesKeys] = useState(getQuantitativeAttributesKeys(dataset))\n  const [checked, setChecked] = useState<CheckedForSelectableDataType>(getDefaultQuantitativeAttributesChecked(dataset))\n\n  const categoricalAttributes = getCategoryAttributesKeys(dataset)\n\n  const getCurrentDisplayAttributes = (currChecked: CheckedForSelectableDataType) =>\n    quantitativeAttributesKeys.filter((key) => currChecked[key])\n\n  // first time empty\n  const createScatterPlotMatrixMenu = useCallback(() => {\n    const newChecked = getDefaultQuantitativeAttributesChecked(dataset)\n    const newQaKeys = getQuantitativeAttributesKeys(dataset)\n    const defaultCategoryAttribute = getCategoryAttributesKeys(dataset)?.[0]\n    setChecked(newChecked)\n    setQuantitativeAttributesKeys(newQaKeys)\n    setSettings((prev) => {\n      const newScatterPlotMatrix: ScatterPlotMatrixSettings = {\n        displayAttributes: newQaKeys.filter((key) => newChecked[key]),\n        categoryAttribute: defaultCategoryAttribute,\n        ...SCATTER_PLOT_MATRIX_DEFAULT,\n      }\n      return { ...prev, [ViewType.ScatterPlotMatrix]: newScatterPlotMatrix }\n    })\n  }, [setSettings, dataset])\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(() => createScatterPlotMatrixMenu(), [dataset])\n\n  const getNewSettingsForAttributeChecker = (newChecked: CheckedForSelectableDataType) => ({\n    displayAttributes: getCurrentDisplayAttributes(newChecked),\n  })\n\n  if (scatterPlotMatrixSettings) {\n    return (\n      <Box sx={dataDrawerMenuStyle.drawerMenu}>\n        <h1>{SCATTER_PLOT_MATRIX_MENU_TEXT.header}</h1>\n        {quantitativeAttributesKeys.length >= MIN_SCATTER_PLOT_MATRIX_ATTRIBUTE_COUNT ? (\n          <>\n            <AttributeChecker\n              viewType={viewType}\n              attributesKeys={quantitativeAttributesKeys}\n              handleChangeSettings={() => cleanSelectedIfViewWasBrushing(viewType)}\n              getNewSettings={getNewSettingsForAttributeChecker}\n              setSettings={setSettings}\n              label={SCATTER_PLOT_MATRIX_MENU_TEXT.attributes}\n              checked={checked}\n              setChecked={setChecked}\n              setAttributesKeys={setQuantitativeAttributesKeys}\n            />\n            <CategorySelector\n              viewType={viewType}\n              value={scatterPlotMatrixSettings.categoryAttribute!}\n              attributesKeys={categoricalAttributes}\n              setSettings={setSettings}\n              label={SCATTER_PLOT_MATRIX_MENU_TEXT.category}\n            />\n            <Accordion sx={dataDrawerMenuStyle.accordion}>\n              <AccordionSummary expandIcon={<ExpandMore />}>\n                <Typography>{SCATTER_PLOT_MATRIX_MENU_TEXT.more}</Typography>\n              </AccordionSummary>\n              <AccordionDetails>\n                <MarginInput\n                  margins={scatterPlotMatrixSettings.margins}\n                  setSettings={setSettings}\n                  viewType={viewType}\n                />\n                <Divider />\n                <NumberInput\n                  value={scatterPlotMatrixSettings.pointSize}\n                  valueKey={pointSizeKey}\n                  setSettings={setSettings}\n                  label={SCATTER_PLOT_MATRIX_MENU_TEXT.pointSize}\n                  viewType={viewType}\n                />\n                <Divider />\n                <OpacityInput\n                  header={SCATTER_PLOT_MATRIX_MENU_TEXT.opacity}\n                  opacity={scatterPlotMatrixSettings.opacity}\n                  setSettings={setSettings}\n                  viewType={viewType}\n                />\n                <Divider />\n                <PalettePicker\n                  colors={scatterPlotMatrixSettings.colorCategory}\n                  setSettings={setSettings}\n                  viewType={viewType}\n                />\n              </AccordionDetails>\n            </Accordion>\n          </>\n        ) : (\n          <Box sx={dataDrawerMenuStyle.insufficientAttributeNum}>{SCATTER_PLOT_MATRIX_MENU_TEXT.unavailable}</Box>\n        )}\n      </Box>\n    )\n  }\n  return null\n}\n","import { ViewVisualizationSettings } from './VisualizationSettings'\n\nexport const pointSizeKey = `pointSize`\n\n/**\n * Settings for Scatter Plot Matrix view\n */\nexport interface ScatterPlotMatrixSettings extends ViewVisualizationSettings {\n  /**\n   * Size of a data point\n   */\n  [pointSizeKey]: number\n}\n","import { schemeCategory10 } from 'd3'\nimport { ScatterPlotGlyphsSettings } from '../../types/views/settings/ScatterPlotGlyphsSettings'\nimport { ColorArray } from '../../types/styling/ColorArray'\n\nexport const MIN_SCATTER_PLOT_GLYPHS_ATTRIBUTE_COUNT = 3\n\nexport const SCATTER_PLOT_GLYPHS_DEFAULT: Pick<\n  ScatterPlotGlyphsSettings,\n  `glyphSize` | `margins` | `opacity` | `colorCategory`\n> = {\n  glyphSize: 35,\n  margins: [30, 30, 30, 30],\n  opacity: [60, 90, 30],\n  colorCategory: schemeCategory10 as ColorArray,\n}\n","import { ViewType } from '../../constants/views/ViewTypes'\nimport { MENU_TEXT, VIEW_NAMES } from './common'\n\nexport const SCATTER_PLOT_GLYPHS_TEXT = {\n  unavailable: `The scatter plot with glyphs cannot be displayed with less than 3 attributes. To generate a scatter plot with glyphs, select more attributes from the menu.`,\n}\n\nexport const SCATTER_PLOT_GLYPHS_MENU_TEXT = {\n  header: VIEW_NAMES[ViewType.ScatterPlotGlyphs],\n  xAttribute: `X axis values`,\n  yAttribute: `Y axis values`,\n  unavailable: `The scatter plot with glyphs cannot be used while data has less than 3 numerical attributes. Try to use different type of visualization that fits your data.`,\n  glyphSize: `Glyph size`,\n  opacity: `Opacity of glyphs`,\n  ...MENU_TEXT,\n}\n","import { VoidFunctionComponent, useCallback, useEffect, useMemo, useState } from 'react'\nimport { Accordion, AccordionDetails, AccordionSummary, Box, Divider, Typography } from '@mui/material'\nimport { ExpandMore } from '@mui/icons-material'\n\nimport { CheckedForSelectableDataType } from '../../../../types/data/data'\nimport { MenuProps } from '../../../../types/views/MenuProps'\nimport { glyphSizeKey, xAttributeKey, yAttributeKey } from '../../../../types/views/settings/ScatterPlotGlyphsSettings'\nimport { ScatterPlotGlyphsSettings } from '../../../../types/views/settings/ScatterPlotGlyphsSettings'\n\nimport {\n  getCategoryAttributesKeys,\n  getDefaultQuantitativeAttributesChecked,\n  getQuantitativeAttributesKeys,\n} from '../../../../helpers/data/data'\n\nimport {\n  MIN_SCATTER_PLOT_GLYPHS_ATTRIBUTE_COUNT,\n  SCATTER_PLOT_GLYPHS_DEFAULT,\n} from '../../../../constants/views/scatterPlotGlyphs'\nimport { ViewType } from '../../../../constants/views/ViewTypes'\n\nimport { SCATTER_PLOT_GLYPHS_MENU_TEXT } from '../../../../text/views-and-menus/scatterPlotGlyphs'\n\nimport { dataDrawerMenuStyle } from '../../../../components-style/content/data-drawer/dataDrawerMenuStyle'\n\nimport { AttributeChecker } from '../../data-drawer/items/AttributeChecker'\nimport { CategorySelector } from '../../data-drawer/items/CategorySelector'\nimport { MarginInput } from '../../data-drawer/items/MarginInput'\nimport { NumberInput } from '../../data-drawer/items/NumberInput'\nimport { OpacityInput } from '../../data-drawer/items/OpacityInput'\nimport { PalettePicker } from '../../data-drawer/items/PalettePicker'\nimport { Selector } from '../../data-drawer/items/Selector'\n\nexport const ScatterPlotGlyphsMenu: VoidFunctionComponent<MenuProps> = ({\n  dataset,\n  settings,\n  setSettings,\n  cleanSelectedIfViewWasBrushing,\n}) => {\n  const viewType = ViewType.ScatterPlotGlyphs\n  const scatterPlotGlyphsSettings = settings[viewType]\n  const defaultX = useMemo(() => getQuantitativeAttributesKeys(dataset)?.[0], [dataset])\n  const defaultY = useMemo(() => getQuantitativeAttributesKeys(dataset)?.[1], [dataset])\n  const [quantitativeAttributesKeys, setQuantitativeAttributesKeys] = useState(getQuantitativeAttributesKeys(dataset))\n  const [checked, setChecked] = useState<CheckedForSelectableDataType>(getDefaultQuantitativeAttributesChecked(dataset))\n\n  const categoricalAttributes = getCategoryAttributesKeys(dataset)\n\n  const getCurrentDisplayAttributes = (currChecked: CheckedForSelectableDataType) =>\n    quantitativeAttributesKeys.filter((key) => currChecked[key])\n\n  const createScatterPlotGlyphsMenu = useCallback(() => {\n    const newChecked = getDefaultQuantitativeAttributesChecked(dataset)\n    const newQaKeys = getQuantitativeAttributesKeys(dataset)\n    const defaultCategoryAttribute = getCategoryAttributesKeys(dataset)?.[0]\n    setChecked(newChecked)\n    setQuantitativeAttributesKeys(newQaKeys)\n    setSettings((prev) => {\n      const newScatterPlotGlyphsSettings: ScatterPlotGlyphsSettings = {\n        displayAttributes: newQaKeys.filter((key) => newChecked[key]),\n        categoryAttribute: defaultCategoryAttribute,\n        xAttribute: defaultX,\n        yAttribute: defaultY,\n        ...SCATTER_PLOT_GLYPHS_DEFAULT,\n      }\n      return { ...prev, [ViewType.ScatterPlotGlyphs]: newScatterPlotGlyphsSettings }\n    })\n  }, [setSettings, defaultX, defaultY, dataset])\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(() => createScatterPlotGlyphsMenu(), [dataset]) // first time empty, call once\n\n  const getNewSettingsForAttributeChecker = (\n    newChecked: CheckedForSelectableDataType,\n  ): Partial<ScatterPlotGlyphsSettings> => ({\n    displayAttributes: getCurrentDisplayAttributes(newChecked),\n  })\n  const handleChangeSettings = () => cleanSelectedIfViewWasBrushing(viewType)\n\n  if (scatterPlotGlyphsSettings) {\n    return (\n      <Box sx={dataDrawerMenuStyle.drawerMenu}>\n        <h1>{SCATTER_PLOT_GLYPHS_MENU_TEXT.header}</h1>\n        {quantitativeAttributesKeys.length >= MIN_SCATTER_PLOT_GLYPHS_ATTRIBUTE_COUNT ? (\n          <>\n            <AttributeChecker\n              viewType={viewType}\n              attributesKeys={quantitativeAttributesKeys}\n              getNewSettings={getNewSettingsForAttributeChecker}\n              setSettings={setSettings}\n              label={SCATTER_PLOT_GLYPHS_MENU_TEXT.attributes}\n              checked={checked}\n              setChecked={setChecked}\n              setAttributesKeys={setQuantitativeAttributesKeys}\n            />\n            <Selector\n              viewType={viewType}\n              value={scatterPlotGlyphsSettings.xAttribute}\n              attributesKeys={quantitativeAttributesKeys}\n              setSettings={setSettings}\n              label={SCATTER_PLOT_GLYPHS_MENU_TEXT.xAttribute}\n              settingsKey={xAttributeKey}\n              handleChangeSettings={handleChangeSettings}\n            />\n            <Selector\n              viewType={viewType}\n              value={scatterPlotGlyphsSettings.yAttribute}\n              attributesKeys={quantitativeAttributesKeys}\n              setSettings={setSettings}\n              label={SCATTER_PLOT_GLYPHS_MENU_TEXT.yAttribute}\n              settingsKey={yAttributeKey}\n              handleChangeSettings={handleChangeSettings}\n            />\n            <CategorySelector\n              viewType={viewType}\n              value={scatterPlotGlyphsSettings.categoryAttribute!}\n              attributesKeys={categoricalAttributes}\n              setSettings={setSettings}\n              label={SCATTER_PLOT_GLYPHS_MENU_TEXT.category}\n            />\n            <Accordion sx={dataDrawerMenuStyle.accordion}>\n              <AccordionSummary expandIcon={<ExpandMore />}>\n                <Typography>{SCATTER_PLOT_GLYPHS_MENU_TEXT.more}</Typography>\n              </AccordionSummary>\n              <AccordionDetails>\n                <MarginInput\n                  margins={scatterPlotGlyphsSettings.margins}\n                  setSettings={setSettings}\n                  viewType={viewType}\n                />\n                <Divider />\n                <NumberInput\n                  value={scatterPlotGlyphsSettings.glyphSize}\n                  valueKey={glyphSizeKey}\n                  setSettings={setSettings}\n                  label={SCATTER_PLOT_GLYPHS_MENU_TEXT.glyphSize}\n                  viewType={viewType}\n                />\n                <Divider />\n                <OpacityInput\n                  header={SCATTER_PLOT_GLYPHS_MENU_TEXT.opacity}\n                  opacity={scatterPlotGlyphsSettings.opacity}\n                  setSettings={setSettings}\n                  viewType={viewType}\n                />\n                <Divider />\n                <PalettePicker\n                  colors={scatterPlotGlyphsSettings.colorCategory}\n                  setSettings={setSettings}\n                  viewType={viewType}\n                />\n              </AccordionDetails>\n            </Accordion>\n          </>\n        ) : (\n          <Box sx={dataDrawerMenuStyle.insufficientAttributeNum}>{SCATTER_PLOT_GLYPHS_MENU_TEXT.unavailable}</Box>\n        )}\n      </Box>\n    )\n  }\n  return null\n}\n","import { SelectableDataType } from '../../data/data'\n\nimport { ViewVisualizationSettings } from './VisualizationSettings'\n\nexport const glyphSizeKey = `glyphSize`\nexport const glyphSpacingKey = `glyphSpacing`\nexport const xAttributeKey = `xAttribute`\nexport const yAttributeKey = `yAttribute`\n\n/**\n * Settings for Scatter Plot Glyphs view\n */\nexport interface ScatterPlotGlyphsSettings extends ViewVisualizationSettings {\n  /**\n   * Size of a glyph\n   */\n  [glyphSizeKey]: number\n\n  /**\n   * Numerical attribute for axis x\n   */\n  [xAttributeKey]: keyof SelectableDataType\n\n  /**\n   * Numerical attribute for axis y\n   */\n  [yAttributeKey]: keyof SelectableDataType\n}\n","import { DataTableSettings } from '../../types/views/settings/DataTableSettings'\n\nexport const MIN_DATA_TABLE_ATTRIBUTE_COUNT = 1\n\nexport const DATA_TABLE_DEFAULT: Pick<DataTableSettings, `rowHeight`> = {\n  rowHeight: 50,\n}\n","import { ViewType } from '../../constants/views/ViewTypes'\nimport { SortType } from '../../helpers/data/comparator'\nimport { MENU_BASE_TEXT, VIEW_NAMES } from './common'\n\nexport const DATA_TABLE_MENU_TEXT = {\n  header: VIEW_NAMES[ViewType.DataTable],\n  unavailable: `The dataset seems to have less than one attribute, which makes him not valid. Please choose different dataset.`,\n  attributes: `Display columns`,\n  rowHeight: `Table row height`,\n  ...MENU_BASE_TEXT,\n}\n\nexport const DATA_TABLE_TEXT = {\n  checkboxTooltip: `Select all`,\n  [SortType.asc]: `Sort ascendant`,\n  [SortType.desc]: `Sort descendant`,\n  unavailable: `The Data Table view cannot be displayed without attributes. To generate a Data Table view, select more attributes from the menu.`,\n}\n","import { VoidFunctionComponent, useCallback, useEffect, useState } from 'react'\nimport { Accordion, AccordionDetails, AccordionSummary, Box, Typography } from '@mui/material'\nimport { ExpandMore } from '@mui/icons-material'\n\nimport { CheckedForSelectableDataType } from '../../../../types/data/data'\nimport { MenuProps } from '../../../../types/views/MenuProps'\nimport { DataTableSettings, rowHeightKey } from '../../../../types/views/settings/DataTableSettings'\n\nimport { getAttributeKeys, getDefaultAllAttributesChecked } from '../../../../helpers/data/data'\n\nimport { ViewType } from '../../../../constants/views/ViewTypes'\nimport { DATA_TABLE_DEFAULT, MIN_DATA_TABLE_ATTRIBUTE_COUNT } from '../../../../constants/views/dataTable'\n\nimport { DATA_TABLE_MENU_TEXT } from '../../../../text/views-and-menus/dataTable'\n\nimport { dataDrawerMenuStyle } from '../../../../components-style/content/data-drawer/dataDrawerMenuStyle'\n\nimport { AttributeChecker } from '../../data-drawer/items/AttributeChecker'\nimport { NumberInput } from '../../data-drawer/items/NumberInput'\n\nexport const DataTableMenu: VoidFunctionComponent<MenuProps> = ({ dataset, settings, setSettings }) => {\n  const viewType = ViewType.DataTable\n  const dataTableSettings = settings[viewType]\n  const [attributesKeys, setAttributesKeys] = useState(getAttributeKeys(dataset))\n  const [checked, setChecked] = useState<CheckedForSelectableDataType>(getDefaultAllAttributesChecked(dataset))\n\n  const getCurrentDisplayAttributes = (currChecked: CheckedForSelectableDataType) =>\n    attributesKeys.filter((key) => currChecked[key])\n\n  const createDataTableMenu = useCallback(() => {\n    const newChecked = getDefaultAllAttributesChecked(dataset)\n    const newKeys = getAttributeKeys(dataset)\n    setChecked(newChecked)\n    setAttributesKeys(newKeys)\n    setSettings((prev) => {\n      const newDataTableSettings: DataTableSettings = {\n        displayAttributes: newKeys.filter((key) => newChecked[key]),\n        ...DATA_TABLE_DEFAULT,\n      }\n      return { ...prev, [ViewType.DataTable]: newDataTableSettings }\n    })\n  }, [setSettings, dataset])\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(() => createDataTableMenu(), [dataset]) // first time empty, call once\n\n  const getNewSettingsForAttributeChecker = (newChecked: CheckedForSelectableDataType): Partial<DataTableSettings> => ({\n    displayAttributes: getCurrentDisplayAttributes(newChecked),\n  })\n\n  if (dataTableSettings) {\n    return (\n      <Box sx={dataDrawerMenuStyle.drawerMenu}>\n        <h1>{DATA_TABLE_MENU_TEXT.header}</h1>\n        {attributesKeys.length >= MIN_DATA_TABLE_ATTRIBUTE_COUNT ? (\n          <>\n            <AttributeChecker\n              viewType={viewType}\n              attributesKeys={attributesKeys}\n              getNewSettings={getNewSettingsForAttributeChecker}\n              setSettings={setSettings}\n              label={DATA_TABLE_MENU_TEXT.attributes}\n              checked={checked}\n              setChecked={setChecked}\n              setAttributesKeys={setAttributesKeys}\n            />\n            <Accordion sx={dataDrawerMenuStyle.accordion}>\n              <AccordionSummary expandIcon={<ExpandMore />}>\n                <Typography>{DATA_TABLE_MENU_TEXT.more}</Typography>\n              </AccordionSummary>\n              <AccordionDetails>\n                <NumberInput\n                  value={dataTableSettings.rowHeight}\n                  valueKey={rowHeightKey}\n                  setSettings={setSettings}\n                  label={DATA_TABLE_MENU_TEXT.rowHeight}\n                  viewType={viewType}\n                />\n              </AccordionDetails>\n            </Accordion>\n          </>\n        ) : (\n          <Box sx={dataDrawerMenuStyle.insufficientAttributeNum}>{DATA_TABLE_MENU_TEXT.unavailable}</Box>\n        )}\n      </Box>\n    )\n  }\n  return null\n}\n","import { VisualizationSettings } from './VisualizationSettings'\n\nexport const rowHeightKey = `rowHeight`\n/**\n * Settings for Data Table view\n */\nexport interface DataTableSettings extends VisualizationSettings {\n  /**\n   * Height of the table row\n   */\n  [rowHeightKey]: number\n}\n","import { Dispatch, VoidFunctionComponent, SetStateAction } from 'react'\nimport { Box, Divider, Drawer, IconButton } from '@mui/material'\nimport { ChevronRight } from '@mui/icons-material'\n\nimport { SelectableDataType } from '../../../types/data/data'\nimport { SideEffectVoid } from '../../../types/basic/functionTypes'\n\nimport { ViewType } from '../../../constants/views/ViewTypes'\n\nimport { dataDrawerStyle } from '../../../components-style/content/data-drawer/dataDrawerStyle'\n\nimport { Settings } from '../../../types/views/settings/Settings'\nimport { GlyphsMenu } from '../views/glyphs/GlyphsMenu'\nimport { ParallelCoordinatesMenu } from '../views/parallel-coordinates/ParallelCoordinatesMenu'\nimport { ScatterPlotMatrixMenu } from '../views/scatter-plot-matrix/ScatterPlotMatrixMenu'\nimport { ScatterPlotGlyphsMenu } from '../views/scatter-plot-glyphs/ScatterPlotGlyphsMenu'\nimport { DataTableMenu } from '../views/data-table/DataTableMenu'\n\nexport interface DataDrawerProps {\n  isOpen: boolean\n  close: SideEffectVoid\n  dataset: ReadonlyArray<SelectableDataType>\n  views: ViewType[]\n  settings: Settings\n  setSettings: Dispatch<SetStateAction<Settings>>\n  cleanSelectedIfViewWasBrushing: (viewType: ViewType) => void\n}\n\nexport const DataDrawer: VoidFunctionComponent<DataDrawerProps> = ({\n  isOpen,\n  close,\n  dataset,\n  views,\n  settings,\n  setSettings,\n  cleanSelectedIfViewWasBrushing,\n}) => {\n  const menus = views.map((view, idx) => {\n    switch (view) {\n      case ViewType.Glyphs:\n        return (\n          <GlyphsMenu\n            dataset={dataset}\n            settings={settings}\n            setSettings={setSettings}\n            cleanSelectedIfViewWasBrushing={cleanSelectedIfViewWasBrushing}\n            key={idx}\n          />\n        )\n      case ViewType.ParallelCoordinates:\n        return (\n          <ParallelCoordinatesMenu\n            dataset={dataset}\n            settings={settings!}\n            setSettings={setSettings}\n            cleanSelectedIfViewWasBrushing={cleanSelectedIfViewWasBrushing}\n            key={idx}\n          />\n        )\n      case ViewType.ScatterPlotMatrix:\n        return (\n          <ScatterPlotMatrixMenu\n            dataset={dataset}\n            settings={settings!}\n            setSettings={setSettings}\n            cleanSelectedIfViewWasBrushing={cleanSelectedIfViewWasBrushing}\n            key={idx}\n          />\n        )\n      case ViewType.ScatterPlotGlyphs:\n        return (\n          <ScatterPlotGlyphsMenu\n            dataset={dataset}\n            settings={settings}\n            setSettings={setSettings}\n            cleanSelectedIfViewWasBrushing={cleanSelectedIfViewWasBrushing}\n            key={idx}\n          />\n        )\n      case ViewType.DataTable:\n        return (\n          <DataTableMenu\n            dataset={dataset}\n            settings={settings}\n            setSettings={setSettings}\n            cleanSelectedIfViewWasBrushing={cleanSelectedIfViewWasBrushing}\n            key={idx}\n          />\n        )\n      default:\n        return null\n    }\n  })\n  return (\n    <Drawer variant=\"persistent\" anchor=\"right\" open={isOpen} sx={dataDrawerStyle.drawer}>\n      <Box sx={dataDrawerStyle.header}>\n        <IconButton onClick={close}>\n          <ChevronRight sx={dataDrawerStyle.chevron} />\n        </IconButton>\n      </Box>\n      <Divider />\n      <Box sx={dataDrawerStyle.menu}>{menus.map((menu) => menu)}</Box>\n    </Drawer>\n  )\n}\n","import { SxProps } from '@mui/system'\n\nimport { HEADER_HEIGHT } from '../../../constants/views/common'\nimport { px } from '../../../helpers/d3/stringGetters'\nimport { VIEW_COLORS } from '../../../styles/colors'\n\nexport const gridItemStyle: Record<string, SxProps> = {\n  gridItem: {\n    height: `100%`,\n    bgcolor: VIEW_COLORS.itemBackground,\n    borderColor: VIEW_COLORS.border,\n    borderWidth: 1,\n    borderStyle: `solid`,\n  },\n  text: {\n    padding: px(0, 8),\n  },\n  header: {\n    height: HEADER_HEIGHT - 2,\n    display: `flex`,\n    alignItems: `center`,\n    justifyContent: `space-between`,\n    cursor: `all-scroll`,\n    bgcolor: VIEW_COLORS.itemBackground,\n    borderColor: VIEW_COLORS.border,\n    borderBottomWidth: 1,\n    borderBottomStyle: `solid`,\n    padding: 0,\n  },\n}\n","import { ViewType } from '../views/ViewTypes'\n\nexport const SAVE_ID: Record<ViewType, string> = {\n  [ViewType.ParallelCoordinates]: `pcSvgId`,\n  [ViewType.ScatterPlotMatrix]: `spmSvgId`,\n  [ViewType.Glyphs]: `glyphSvgId`,\n  [ViewType.ScatterPlotGlyphs]: `spgSvgId`,\n  [ViewType.DataTable]: `dataTableId`,\n}\n\nexport const CONTAINER_SAVE_ID: Record<ViewType, string> = {\n  [ViewType.ParallelCoordinates]: `C_pcSvgId`,\n  [ViewType.ScatterPlotMatrix]: `C_spmSvgId`,\n  [ViewType.Glyphs]: `C_glyphSvgId`,\n  [ViewType.ScatterPlotGlyphs]: `C_spgSvgId`,\n  [ViewType.DataTable]: `C_dataTableId`,\n}\n","import { ViewType } from '../../constants/views/ViewTypes'\nimport { CONTAINER_SAVE_ID, SAVE_ID } from '../../constants/save/save'\n\nexport const saveSvgToFile = (svgEl: Element, fileName: string): void => {\n  svgEl.setAttribute(`xmlns`, `http://www.w3.org/2000/svg`)\n  const svgData = svgEl.outerHTML\n  const preface = `<?xml version=\"1.0\" standalone=\"no\"?>\\r\\n`\n  const svgBlob = new Blob([preface, svgData], { type: `image/svg+xml;charset=utf-8` })\n  const svgUrl = URL.createObjectURL(svgBlob)\n  const downloadLink = document.createElement(`a`)\n  downloadLink.href = svgUrl\n  downloadLink.download = fileName\n  document.body.appendChild(downloadLink)\n  downloadLink.click()\n  document.body.removeChild(downloadLink)\n}\n\nexport const saveSvg = (viewType: ViewType): void => {\n  const svgContainer = document.querySelector(`#${CONTAINER_SAVE_ID[viewType]}`)\n  const svg = document.querySelector(`#${SAVE_ID[viewType]}`)\n  if (!svgContainer || !svg) {\n    // eslint-disable-next-line no-console\n    console.error(`Identifier class missing, saving is not possible`)\n    return\n  }\n\n  const containerClass = Array.from(svgContainer.classList).filter((cls) => !cls.includes(`MuiBox`))[0]\n\n  const newStyleNodes = Array.from(document.querySelectorAll(`style`))\n    .filter((e) => e.innerHTML.includes(`.${containerClass}`))\n    .map((style) => style.innerHTML.replace(`.${containerClass} `, ``))\n    .map((style) => {\n      const node = document.createElement(`style`)\n      node.innerHTML = style\n      svg.insertBefore(node, svg.firstChild)\n      return node\n    })\n  saveSvgToFile(svg, viewType)\n\n  newStyleNodes.forEach((node) => node.remove())\n}\n","import { SxProps } from '@mui/system'\nimport { BUTTON_COLORS } from '../../../styles/colors'\n\nexport const inlineButtonStyles: Record<string, SxProps> = {\n  button: {\n    margin: 0,\n    padding: 0,\n    minWidth: 0,\n    color: BUTTON_COLORS.buttonInlined,\n  },\n}\n","import { VoidFunctionComponent } from 'react'\nimport { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Divider } from '@mui/material'\n\nexport interface InformationDialogProps {\n  isOpen: boolean\n  title?: string\n  description?: string\n  onConfirm: () => void\n  onClose: () => void\n  confirmText: string\n  cancelText: string\n}\n\nexport const ConfirmationDialog: VoidFunctionComponent<InformationDialogProps> = ({\n  isOpen,\n  title,\n  description,\n  onConfirm,\n  onClose,\n  confirmText,\n  cancelText,\n}) => (\n  <Dialog onClose={onClose} open={isOpen}>\n    <DialogTitle>{title}</DialogTitle>\n    <Divider />\n    <DialogContent>\n      <DialogContentText>{description}</DialogContentText>\n    </DialogContent>\n    <DialogActions>\n      <Button onClick={onConfirm} variant=\"contained\" autoFocus>\n        {confirmText}\n      </Button>\n      <Button onClick={onClose} variant=\"outlined\">\n        {cancelText}\n      </Button>\n    </DialogActions>\n  </Dialog>\n)\n","import { useState, VoidFunctionComponent } from 'react'\nimport { Button, Tooltip } from '@mui/material'\nimport { Save } from '@mui/icons-material'\n\nimport { ViewType } from '../../../constants/views/ViewTypes'\n\nimport { saveSvg } from '../../../helpers/d3/saveSvg'\n\nimport { TOP_TOOLBAR_TEXT } from '../../../text/SiteText'\n\nimport { inlineButtonStyles } from '../../../components-style/content/common/inlineButtonStyles'\n\nimport { ConfirmationDialog } from './dialogs/ConfirmationDialog'\n\nexport interface DataSaveButtonProps {\n  viewType: ViewType\n}\n\nexport const DataSaveButton: VoidFunctionComponent<DataSaveButtonProps> = ({ viewType }) => {\n  const [isDialogOpen, setIsDialogOpen] = useState(false)\n  const onConfirm = () => {\n    saveSvg(viewType)\n    setIsDialogOpen(false)\n  }\n\n  return (\n    <>\n      <ConfirmationDialog\n        isOpen={isDialogOpen}\n        title={TOP_TOOLBAR_TEXT.saveText.header}\n        description={TOP_TOOLBAR_TEXT.saveText.description}\n        onConfirm={onConfirm}\n        onClose={() => setIsDialogOpen(false)}\n        confirmText={TOP_TOOLBAR_TEXT.saveText.confirm}\n        cancelText={TOP_TOOLBAR_TEXT.saveText.cancel}\n      />\n      <Button\n        variant=\"text\"\n        onClick={() => setIsDialogOpen(true)}\n        sx={inlineButtonStyles.button}\n        aria-label={TOP_TOOLBAR_TEXT.saveText.save}\n      >\n        <Tooltip title={TOP_TOOLBAR_TEXT.saveText.save}>\n          <Save />\n        </Tooltip>\n      </Button>\n    </>\n  )\n}\n","import { px } from '../../helpers/d3/stringGetters'\n\n/**\n * Class for defining margin for the view.\n * Important especially for the user to be able to reveal axis labels, but also for aesthetic reasons.\n */\nexport class Margin {\n  readonly width: number\n  readonly height: number\n  readonly toString: string\n  constructor(readonly top: number, readonly right: number, readonly bottom: number, readonly left: number) {\n    this.width = this.right + this.left\n    this.height = this.top + this.bottom\n    this.toString = px(this.top, this.right, this.bottom, this.left)\n  }\n}\n\n/**\n * Array of margins - top, right, bottom, left\n */\nexport type MarginArray = [number, number, number, number]\n","export const isInRange = (number: number, range: [number, number]): boolean => number > range[0] && number < range[1]\n\nexport const isInRanges = (ranges: [[number, number], [number, number]], cx: number, cy: number): boolean => {\n  const [x0, x1, y0, y1] = [ranges[0][0], ranges[1][0], ranges[0][1], ranges[1][1]]\n  return x0 <= cx && cx <= x1 && y0 <= cy && cy <= y1\n}\n","import { extent } from 'd3'\n\nimport { ExtentReqForSelectableDataType, SelectableDataType } from '../../types/data/data'\n\nexport const getExtentInDomains = (\n  domains: Array<keyof SelectableDataType>,\n  dataset: ReadonlyArray<SelectableDataType>,\n): ExtentReqForSelectableDataType =>\n  Object.fromEntries(\n    domains.map((key) => {\n      const calculatedExtent = extent(dataset, (d) => Number(d[key]))\n      if (calculatedExtent[0] === undefined) throw new Error(`Invalid prop to create extent from`)\n      return [key, calculatedExtent]\n    }),\n  )\n\nexport const getExtendedExtentInDomains = (\n  domains: Array<keyof SelectableDataType>,\n  dataset: ReadonlyArray<SelectableDataType>,\n  percentDown: number,\n  percentUp = 0,\n): ExtentReqForSelectableDataType =>\n  Object.fromEntries(\n    domains.map((key) => {\n      const calculatedExtent = extent(dataset, (d) => Number(d[key]))\n      if (calculatedExtent[0] === undefined) throw new Error(`Invalid prop to create extent from`)\n      const extentSize = calculatedExtent[1] - calculatedExtent[0]\n      const p = [-(percentDown / 100) * extentSize, (percentUp / 100) * extentSize]\n      const finalExtent: [number, number] = [calculatedExtent[0] + p[0], calculatedExtent[1] + p[1]]\n      return [key, finalExtent]\n    }),\n  )\n","import { ScaleOrdinal } from 'd3'\n\nimport { SelectableDataType } from '../../types/data/data'\n\nexport type GetCategoryColor = (data: SelectableDataType) => string\n\nexport const getCategoryColor =\n  (categoryAttribute: keyof SelectableDataType | undefined, color: ScaleOrdinal<string, string>): GetCategoryColor =>\n  (data) =>\n    categoryAttribute ? color(String(data[categoryAttribute])) : color(`1`)\n","export const HTML = {\n  newLine: `<br/>`,\n}\n","import { SxProps } from '@mui/system'\n\nimport { Opacity } from '../../../../types/styling/Opacity'\n\nimport { important } from '../../../../helpers/d3/stringGetters'\n\nimport { PLOT_COLORS } from '../../../../styles/colors'\nimport { PLOT_FONT } from '../../../../styles/font'\n\nexport const PARALLEL_COORDINATES_CLASS = `parallelCoordinates`\nexport const SELECTED_CLASS = `parallelCoordinatesSelected`\nexport const AXES_TEXT_CLASS = `parallelCoordinatesAxesText`\n\nexport const getParallelCoordinatesStyle = (opacity: Opacity, isBrushActive: boolean): SxProps => ({\n  '& svg': {\n    bgcolor: PLOT_COLORS.backgroundColor,\n    font: `12px sans-serif`,\n  },\n  '& path': {\n    fill: `none`,\n    opacity: !isBrushActive ? opacity[0] / 100 : opacity[2] / 100,\n    '&.parallelCoordinatesSelected': {\n      opacity: opacity[1] / 100,\n      stroke: important(PLOT_COLORS.brushColor),\n    },\n  },\n  '& .parallelCoordinatesAxesText': {\n    textAnchor: `middle`,\n    fontWeight: `bold`,\n    fill: PLOT_COLORS.fontColor,\n    fontSize: PLOT_FONT.fontSize,\n  },\n})\n","import { SxProps } from '@mui/system'\n\nimport { Margin } from '../../../types/styling/Margin'\n\nexport const getViewsNotDisplayStyle = (width: number, height: number, margin: Margin): SxProps => ({\n  width: width - margin.width,\n  height: height - margin.height,\n  padding: margin.toString,\n})\n","import { VoidFunctionComponent, useCallback, useEffect, useMemo, useRef } from 'react'\nimport { Box } from '@mui/material'\nimport { axisLeft, brushY, D3BrushEvent, line, scaleLinear, scaleOrdinal, scalePoint, select, selectAll } from 'd3'\n\nimport { SelectableDataType } from '../../../../types/data/data'\nimport { Brushable } from '../../../../types/brushing/Brushable'\nimport { BrushSelection1d } from '../../../../types/brushing/BrushSelection'\nimport { VisualizationView } from '../../../../types/views/VisualizationView'\nimport { ParallelCoordinatesSettings } from '../../../../types/views/settings/ParallelCoordinatesSettings'\nimport { Margin } from '../../../../types/styling/Margin'\nimport { DataEachG } from '../../../../types/d3-types'\n\nimport { toStringArray } from '../../../../helpers/basic/retype'\nimport { isInRange } from '../../../../helpers/basic/range'\nimport { getExtentInDomains } from '../../../../helpers/d3/extent'\nimport { getDefaultSelectionForAttributes } from '../../../../helpers/data/data'\nimport { getCategoryColor } from '../../../../helpers/d3/attributeGetters'\nimport {\n  getAttributeFormatted,\n  getAttributeValuesWithLabel,\n  getClass,\n  getEverything,\n  getTranslate,\n  px,\n} from '../../../../helpers/d3/stringGetters'\n\nimport { BrushAction } from '../../../../constants/actions/BrushAction'\nimport { ViewType } from '../../../../constants/views/ViewTypes'\nimport { SVG } from '../../../../constants/svg'\nimport { MIN_PARALLEL_COORDINATES_ATTRIBUTE_COUNT } from '../../../../constants/views/parallelCoordinates'\nimport { MouseActions } from '../../../../constants/actions/MouseActions'\nimport { TOOLTIP, TOOLTIP_CLASS } from '../../../../constants/views/tooltip'\nimport { HTML } from '../../../../constants/html'\n\nimport { PARALLEL_COORDINATES_TEXT } from '../../../../text/views-and-menus/parallelCoordinates'\n\nimport {\n  AXES_TEXT_CLASS,\n  getParallelCoordinatesStyle,\n  PARALLEL_COORDINATES_CLASS,\n  SELECTED_CLASS,\n} from '../../../../components-style/content/views/parallel-coordinates/parallelCoordinatesStyle'\nimport { getViewsNotDisplayStyle } from '../../../../components-style/content/views/getViewsNotDisplayStyle'\n\nimport { PLOT_FONT_BOX_SIZE } from '../../../../styles/font'\nimport { CONTAINER_SAVE_ID, SAVE_ID } from '../../../../constants/save/save'\n\nconst BRUSH_WIDTH = 30\nconst BRUSH_RADIUS = BRUSH_WIDTH / 2\nconst BRUSH_OVERLAP = 5\nconst TEXT_Y_SHIFT = 10\n\nconst AXES = `AXES`\nexport const PARALLEL_COORDINATES = `PARALLEL_COORDINATES`\n\nexport interface ParallelCoordinatesProps extends VisualizationView, Brushable, ParallelCoordinatesSettings {}\n\nexport const ParallelCoordinates: VoidFunctionComponent<ParallelCoordinatesProps> = ({\n  width,\n  height,\n  dataset,\n  displayAttributes,\n  categoryAttribute,\n  setDataSelected,\n  registerCleanBrushing,\n  setComponentBrushing,\n  isBrushingActive,\n  isBrushingOnEndOfMove,\n  colorCategory,\n  lineWidth,\n  margins,\n  opacity,\n}) => {\n  const margin = useMemo(() => new Margin(...margins), [margins])\n  const component = useRef<SVGGElement>(null)\n  const color = scaleOrdinal(colorCategory)\n  const upperPadding = TEXT_Y_SHIFT + PLOT_FONT_BOX_SIZE\n  const [innerWidth, innerHeight] = [width - margin.width, height - margin.height - upperPadding]\n\n  const createParallelCoordinates = useCallback(() => {\n    const node = component.current!\n    const svg = select(node)\n    svg.selectAll(getEverything()).remove() // clear\n\n    const extentInDomains = getExtentInDomains(displayAttributes, dataset)\n    const xScale = scalePoint([0, innerWidth]).domain(toStringArray(displayAttributes))\n    const yScales = displayAttributes.map((attribute) =>\n      scaleLinear([innerHeight, 0]).domain(extentInDomains[attribute]),\n    )\n\n    const selections = getDefaultSelectionForAttributes(displayAttributes)\n\n    const setBrushingSelection = () => {\n      setDataSelected((data) =>\n        displayAttributes.every((dimension, idx) => {\n          const selectedRange = selections[dimension]\n          if (selectedRange === null) return true // nothing in dimension selected, do not block\n          const valueOnAxis = yScales[idx](Number(data[dimension]))\n          return isInRange(valueOnAxis, selectedRange)\n        }),\n      )\n    }\n\n    const cleanBrushingSelection = () => {\n      displayAttributes.forEach((key) => (selections[key] = null))\n      setComponentBrushing(null)\n    }\n\n    const brush = brushY<keyof SelectableDataType>()\n      .extent([\n        [-BRUSH_RADIUS, -BRUSH_OVERLAP],\n        [BRUSH_RADIUS, innerHeight + BRUSH_OVERLAP],\n      ])\n      .on(BrushAction.start, () => {\n        setComponentBrushing(ViewType.ParallelCoordinates)\n      })\n      .on(BrushAction.move, (brushEvent: D3BrushEvent<SelectableDataType>, axisName) => {\n        if (!isBrushingOnEndOfMove) {\n          selections[axisName] = brushEvent.selection as BrushSelection1d\n          setBrushingSelection()\n        }\n      })\n      .on(BrushAction.end, (brushEvent: D3BrushEvent<SelectableDataType>, axisName) => {\n        selections[axisName] = brushEvent.selection as BrushSelection1d\n        if (displayAttributes.some((key) => selections[key] !== null)) {\n          return setBrushingSelection()\n        }\n        return cleanBrushingSelection() // nothing is selected\n      })\n\n    const getAxisTransform = (attribute: keyof SelectableDataType) => getTranslate([xScale(String(attribute))!, 0])\n    const addAxes: DataEachG<keyof SelectableDataType> = (attribute, idx, elements) =>\n      select(elements[idx]).call(axisLeft(yScales[idx]))\n\n    const getDataLinePath = (data: SelectableDataType) =>\n      line()(\n        displayAttributes.map((attribute, idx) => [xScale(String(attribute))!, yScales[idx](Number(data[attribute]))]),\n      )\n\n    const tooltip = select(getClass(TOOLTIP_CLASS))\n    // plot data\n    svg\n      .selectAll(PARALLEL_COORDINATES)\n      .data(dataset)\n      .enter()\n      .append(SVG.elements.path)\n      .attr(SVG.attributes.d, getDataLinePath)\n      .attr(SVG.attributes.class, PARALLEL_COORDINATES_CLASS)\n      .attr(SVG.attributes.strokeWidth, lineWidth)\n\n      .on(MouseActions.mouseOver, ({ clientX, clientY }: MouseEvent, data: SelectableDataType) => {\n        tooltip.transition().duration(TOOLTIP.easeIn).style(SVG.style.opacity, TOOLTIP.visible)\n        tooltip\n          .html(getAttributeValuesWithLabel(data).join(HTML.newLine))\n          .style(SVG.style.left, px(clientX))\n          .style(SVG.style.top, px(clientY))\n      })\n      .on(MouseActions.mouseOut, () => {\n        tooltip.transition().duration(TOOLTIP.easeOut).style(SVG.style.opacity, TOOLTIP.invisible)\n      })\n      .style(SVG.style.stroke, getCategoryColor(categoryAttribute, color))\n\n    // plot axes, add brush\n    const brushableAxes = svg\n      .selectAll(AXES)\n      .data(displayAttributes)\n      .enter()\n      .append(SVG.elements.g)\n      .attr(SVG.attributes.transform, getAxisTransform)\n      .each(addAxes)\n      .call(brush)\n\n    // add text to axes\n    brushableAxes\n      .append(SVG.elements.text)\n      .attr(SVG.attributes.y, -TEXT_Y_SHIFT)\n      .text(getAttributeFormatted)\n      .attr(SVG.attributes.class, AXES_TEXT_CLASS)\n\n    registerCleanBrushing(() => {\n      brushableAxes.each((attribute, idx, elements) => {\n        const axis = select(elements[idx])\n        brushY().clear(axis)\n      })\n    })\n  }, [\n    dataset,\n    innerWidth,\n    innerHeight,\n    setDataSelected,\n    setComponentBrushing,\n    categoryAttribute,\n    displayAttributes,\n    registerCleanBrushing,\n    isBrushingOnEndOfMove,\n    lineWidth,\n    color,\n  ])\n\n  useEffect(\n    () => createParallelCoordinates(),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [displayAttributes, categoryAttribute, innerWidth, innerHeight, lineWidth, isBrushingOnEndOfMove, colorCategory],\n  )\n\n  // selected coloring\n  selectAll(getClass(PARALLEL_COORDINATES_CLASS)).classed(SELECTED_CLASS, (d) => (d as SelectableDataType).selected)\n\n  if (displayAttributes.length >= MIN_PARALLEL_COORDINATES_ATTRIBUTE_COUNT) {\n    return (\n      <Box\n        sx={getParallelCoordinatesStyle(opacity, isBrushingActive)}\n        id={CONTAINER_SAVE_ID[ViewType.ParallelCoordinates]}\n      >\n        <svg width={width} height={height} id={SAVE_ID[ViewType.ParallelCoordinates]}>\n          <g\n            ref={component}\n            width={innerWidth}\n            height={innerHeight}\n            transform={getTranslate([margin.left, margin.top + upperPadding])}\n          />\n        </svg>\n      </Box>\n    )\n  }\n  return <Box sx={getViewsNotDisplayStyle(width, height, margin)}>{PARALLEL_COORDINATES_TEXT.unavailable}</Box>\n}\n","export const toStringArray = <T>(values: Array<T>): Array<string> => values.map((v) => String(v))\n","import { SelectableDataType } from '../../types/data/data'\nimport { MatrixItem } from '../../types/data/MatrixData'\nimport { Dimensions } from '../../types/basic/dimensions'\nimport { getTranslate } from './stringGetters'\n\nexport const getMatrix = (keys: Array<keyof SelectableDataType>): MatrixItem[] =>\n  keys.map((rowKey, rowIdx) => keys.map((colKey, colIdx) => ({ rowIdx, colIdx, rowKey, colKey }))).flat()\n\nexport const getCellInnerSize = (length: number, spacing: number): number => length - 2 * spacing\n\nexport const getCellTranslateInMatrix =\n  (rect: Dimensions, maxIdx: number): ((matrixItem: MatrixItem) => string) =>\n  ({ rowIdx, colIdx }) =>\n    getTranslate([(maxIdx - rowIdx) * rect.width, colIdx * rect.height])\n","import { SxProps } from '@mui/system'\n\nimport { Opacity } from '../../../../types/styling/Opacity'\n\nimport { important } from '../../../../helpers/d3/stringGetters'\n\nimport { PLOT_COLORS } from '../../../../styles/colors'\nimport { PLOT_FONT } from '../../../../styles/font'\n\nexport const DATA_POINT_CLASS = `scatterPlotMatrixPoint`\nexport const DUPLICATES_CLASS = `scatterPlotMatrixDuplicates`\nexport const AXIS_CLASS = `scatterPlotMatrixAxis`\nexport const RECT_CLASS = `scatterPlotMatrixRect`\nexport const CELL_CLASS = `scatterPlotMatrixCell`\nexport const SELECTED_CLASS = `scatterPlotMatrixSelected`\n\nexport const getScatterPlotMatrixStyle = (opacity: Opacity, isBrushingActive: boolean): SxProps => ({\n  '& svg': {\n    fontSize: PLOT_FONT.fontSize,\n    bgcolor: PLOT_COLORS.backgroundColor,\n    font: `12px sans-serif`,\n  },\n  '& .scatterPlotMatrixAxis': {\n    shapeRendering: `crispEdges`,\n    '& line': {\n      stroke: PLOT_COLORS.axisLines,\n    },\n    '& path': {\n      display: `none`,\n    },\n  },\n  '& .scatterPlotMatrixRect': {\n    shapeRendering: `crispEdges`,\n    fill: `none`,\n    stroke: PLOT_COLORS.dataBox,\n  },\n  '& .scatterPlotMatrixCell': {\n    '& text': {\n      fontWeight: `bold`,\n      fill: `black`,\n    },\n  },\n  '& .scatterPlotMatrixPoint': {\n    fillOpacity: !isBrushingActive ? opacity[0] / 100 : opacity[2] / 100,\n    '&.scatterPlotMatrixSelected': {\n      fill: important(PLOT_COLORS.brushColor),\n      fillOpacity: opacity[1] / 100,\n    },\n  },\n  '& .scatterPlotMatrixDuplicates': {\n    opacity: 0,\n  },\n})\n","import { VoidFunctionComponent, useCallback, useEffect, useMemo, useRef } from 'react'\nimport {\n  Axis,\n  axisBottom,\n  axisLeft,\n  brush,\n  D3BrushEvent,\n  NumberValue,\n  ScaleLinear,\n  scaleLinear,\n  scaleOrdinal,\n  select,\n  selectAll,\n} from 'd3'\nimport { Box } from '@mui/material'\n\nimport { SelectableDataType } from '../../../../types/data/data'\nimport { VisualizationView } from '../../../../types/views/VisualizationView'\nimport { Brushable } from '../../../../types/brushing/Brushable'\nimport { ScatterPlotMatrixSettings } from '../../../../types/views/settings/ScatterPlotMatrixSettings'\nimport { Margin } from '../../../../types/styling/Margin'\nimport { Dimensions } from '../../../../types/basic/dimensions'\nimport { MatrixItem, MatrixPosition } from '../../../../types/data/MatrixData'\nimport { BrushSelection2d } from '../../../../types/brushing/BrushSelection'\nimport { DataEachCircle, DataEachG } from '../../../../types/d3-types'\n\nimport {\n  getAttributeFromMatrixFormatted,\n  getAttributeValuesWithLabel,\n  getClass,\n  getEverything,\n  getTranslate,\n  px,\n} from '../../../../helpers/d3/stringGetters'\nimport { getExtentInDomains } from '../../../../helpers/d3/extent'\nimport { getCellInnerSize, getCellTranslateInMatrix, getMatrix } from '../../../../helpers/d3/matrix'\nimport { isInRanges } from '../../../../helpers/basic/range'\nimport { getCategoryColor } from '../../../../helpers/d3/attributeGetters'\nimport { displayDetails } from '../../../../helpers/d3/displayDetails'\n\nimport { BrushAction } from '../../../../constants/actions/BrushAction'\nimport { ViewType } from '../../../../constants/views/ViewTypes'\nimport { SVG } from '../../../../constants/svg'\nimport { MIN_SCATTER_PLOT_MATRIX_ATTRIBUTE_COUNT } from '../../../../constants/views/scatterPlotMatrix'\nimport { MouseActions } from '../../../../constants/actions/MouseActions'\nimport { TOOLTIP, TOOLTIP_CLASS } from '../../../../constants/views/tooltip'\nimport { HTML } from '../../../../constants/html'\n\nimport { SCATTER_PLOT_MATRIX_TEXT } from '../../../../text/views-and-menus/scatterPlotMatrix'\n\nimport {\n  AXIS_CLASS,\n  getScatterPlotMatrixStyle,\n  DATA_POINT_CLASS,\n  RECT_CLASS,\n  SELECTED_CLASS,\n  DUPLICATES_CLASS,\n  CELL_CLASS,\n} from '../../../../components-style/content/views/scatter-plot-matrix/scatterPlotMatrixStyle'\nimport { CONTAINER_SAVE_ID, SAVE_ID } from '../../../../constants/save/save'\nimport { getViewsNotDisplayStyle } from '../../../../components-style/content/views/getViewsNotDisplayStyle'\nimport { PLOT_FONT_BOX_SIZE } from '../../../../styles/font'\n\nexport interface ScatterPlotMatrixProps extends VisualizationView, Brushable, ScatterPlotMatrixSettings {}\n\nexport const DATA_POINT = `DATA_POINT`\nexport const AXIS_X = `AXIS_X`\nexport const AXIS_Y = `AXIS_Y`\nexport const CELL = `CELL`\nexport const CELL_DUPLICATES = `CELL_DUPLICATES`\n\nexport const SPACING = {\n  HORIZONTAL: 12,\n  VERTICAL: 12,\n}\nexport const TICKS = {\n  X: 6,\n  Y: 6,\n}\n\nexport const ScatterPlotMatrix: VoidFunctionComponent<ScatterPlotMatrixProps> = ({\n  width,\n  height,\n  dataset,\n  setDataSelected,\n  displayAttributes,\n  categoryAttribute,\n  registerCleanBrushing,\n  setComponentBrushing,\n  isBrushingActive,\n  isDetailsVisible,\n  isBrushingOnEndOfMove,\n  colorCategory,\n  pointSize,\n  margins,\n  opacity,\n}) => {\n  const margin = useMemo(() => new Margin(...margins), [margins])\n  const component = useRef<SVGGElement>(null)\n  const color = scaleOrdinal(colorCategory)\n\n  const [innerWidth, innerHeight] = [width - margin.width, height - margin.height]\n\n  const createScatterPlotMatrix = useCallback(() => {\n    const node = component.current!\n    const svg = select(node)\n    svg.selectAll(getEverything()).remove() // clear\n\n    const attributesCount = displayAttributes.length\n    const rect: Dimensions = {\n      width: innerWidth / attributesCount,\n      height: innerHeight / attributesCount,\n    }\n    const extentInDomains = getExtentInDomains(displayAttributes, dataset)\n\n    const [xScale, yScale] = [\n      scaleLinear([SPACING.HORIZONTAL, rect.width - SPACING.HORIZONTAL]),\n      scaleLinear([rect.height - SPACING.HORIZONTAL, SPACING.HORIZONTAL]),\n    ]\n\n    const [xAxis, yAxis] = [axisBottom(xScale), axisLeft(yScale)]\n    xAxis.ticks(TICKS.X).tickSize(innerHeight)\n    yAxis.ticks(TICKS.Y).tickSize(-innerWidth)\n\n    const setAxis =\n      (a: ScaleLinear<number, number>, axis: Axis<NumberValue>): DataEachG<keyof SelectableDataType> =>\n      (attribute, index, elements) => {\n        a.domain(extentInDomains[attribute])\n        select(elements[index]).call(axis)\n      }\n    const getTransformX: DataEachG<keyof SelectableDataType, string> = (attribute, idx) =>\n      getTranslate([(attributesCount - 1 - idx) * rect.width, 0])\n    const getTransformY: DataEachG<keyof SelectableDataType, string> = (attribute, idx) =>\n      getTranslate([0, idx * rect.height])\n\n    // axes on X (horizontal)\n    svg\n      .selectAll(AXIS_X)\n      .data(displayAttributes)\n      .enter()\n      .append(SVG.elements.g)\n      .attr(SVG.attributes.class, AXIS_CLASS)\n      .attr(SVG.attributes.transform, getTransformX)\n      .each(setAxis(xScale, xAxis))\n\n    // axes on Y (vertical)\n    svg\n      .selectAll(AXIS_Y)\n      .data(displayAttributes)\n      .enter()\n      .append(SVG.elements.g)\n      .attr(SVG.attributes.class, AXIS_CLASS)\n      .attr(SVG.attributes.transform, getTransformY)\n      .each(setAxis(yScale, yAxis))\n\n    const tooltip = select(getClass(TOOLTIP_CLASS))\n    const plotMatrixItem: DataEachG<MatrixItem> = (matrixItem, idx, elements) => {\n      // set domains\n      xScale.domain(extentInDomains[matrixItem.rowKey])\n      yScale.domain(extentInDomains[matrixItem.colKey])\n\n      const cell = select(elements[idx])\n      const getCx: DataEachCircle<SelectableDataType, number> = (data) => xScale(Number(data[matrixItem.rowKey]))\n      const getCy: DataEachCircle<SelectableDataType, number> = (data) => yScale(Number(data[matrixItem.colKey]))\n\n      // make rectangle surrounding data\n      cell\n        .append(SVG.elements.rect)\n        .attr(SVG.attributes.class, RECT_CLASS)\n        .attr(SVG.attributes.x, SPACING.HORIZONTAL)\n        .attr(SVG.attributes.y, SPACING.VERTICAL)\n        .attr(SVG.attributes.width, getCellInnerSize(rect.width, SPACING.HORIZONTAL))\n        .attr(SVG.attributes.height, getCellInnerSize(rect.height, SPACING.VERTICAL))\n\n      // make data points\n      cell\n        .selectAll(DATA_POINT)\n        .data(dataset)\n        .enter()\n        .append(SVG.elements.circle)\n        .attr(SVG.attributes.cx, getCx)\n        .attr(SVG.attributes.cy, getCy)\n        .attr(SVG.attributes.r, pointSize)\n        .attr(SVG.attributes.class, DATA_POINT_CLASS)\n        .on(MouseActions.mouseOver, ({ clientX, clientY }: MouseEvent, data: SelectableDataType) => {\n          tooltip.transition().duration(TOOLTIP.easeIn).style(SVG.style.opacity, TOOLTIP.visible)\n          tooltip\n            .html(getAttributeValuesWithLabel(data).join(HTML.newLine))\n            .style(SVG.style.left, px(clientX))\n            .style(SVG.style.top, px(clientY))\n        })\n        .on(MouseActions.mouseOut, () => {\n          tooltip.transition().duration(TOOLTIP.easeOut).style(SVG.style.opacity, TOOLTIP.invisible)\n        })\n        .style(SVG.style.fill, getCategoryColor(categoryAttribute, color))\n    }\n\n    const cell = svg\n      .selectAll(CELL)\n      .data(getMatrix(displayAttributes))\n      .enter()\n      .append(SVG.elements.g)\n      .attr(SVG.attributes.class, CELL_CLASS)\n      .attr(SVG.attributes.transform, getCellTranslateInMatrix(rect, attributesCount - 1))\n      .each(plotMatrixItem)\n\n    // add labels to diagonal\n    cell\n      .filter((matrixItem) => matrixItem.rowIdx === matrixItem.colIdx)\n      .append(SVG.elements.text)\n      .attr(SVG.attributes.x, 1.5 * SPACING.HORIZONTAL)\n      .attr(SVG.attributes.y, SPACING.VERTICAL + PLOT_FONT_BOX_SIZE)\n      .text(getAttributeFromMatrixFormatted)\n\n    const brushing: { cell: MatrixPosition | null } = {\n      cell: null,\n    }\n\n    const clearBrush = () => {\n      cell.each((d, idx, elements) => {\n        brush().clear(select(elements[idx]))\n      })\n    }\n\n    const setBrushingSelection = ({ rowKey, colKey }: MatrixItem, selection: BrushSelection2d) => {\n      if (selection) {\n        setDataSelected((data) => isInRanges(selection, xScale(Number(data[rowKey])), yScale(Number(data[colKey]))))\n      }\n    }\n\n    const makeBrush = brush<MatrixItem>()\n      .on(BrushAction.start, (_: D3BrushEvent<SelectableDataType>, { rowIdx, colIdx, rowKey, colKey }: MatrixItem) => {\n        setComponentBrushing(ViewType.ScatterPlotMatrix)\n        if (!brushing.cell || brushing.cell.rowIdx !== rowIdx || brushing.cell.colIdx !== colIdx) {\n          clearBrush()\n          brushing.cell = { rowIdx, colIdx }\n          xScale.domain(extentInDomains[rowKey])\n          yScale.domain(extentInDomains[colKey])\n        }\n      })\n      .on(BrushAction.move, ({ selection }: D3BrushEvent<SelectableDataType>, matrixItem: MatrixItem) => {\n        if (!isBrushingOnEndOfMove) {\n          const brushSelection = selection as BrushSelection2d\n          setBrushingSelection(matrixItem, brushSelection)\n        }\n      })\n      .on(BrushAction.end, ({ selection }: D3BrushEvent<SelectableDataType>, matrixItem: MatrixItem) => {\n        const brushSelection = selection as BrushSelection2d\n        setBrushingSelection(matrixItem, brushSelection)\n        if (!brushSelection) {\n          setComponentBrushing(null)\n        }\n      })\n      .extent([\n        [0, 0],\n        [rect.width, rect.height],\n      ])\n\n    registerCleanBrushing(() => {\n      clearBrush()\n      brushing.cell = null\n    })\n\n    cell.call(makeBrush)\n\n    // make points in second layer so details can be displayed\n    svg\n      .selectAll(CELL_DUPLICATES)\n      .data(getMatrix(displayAttributes))\n      .enter()\n      .append(SVG.elements.g)\n      .attr(SVG.attributes.class, DUPLICATES_CLASS)\n      .attr(SVG.attributes.transform, getCellTranslateInMatrix(rect, attributesCount - 1))\n      .each(plotMatrixItem)\n  }, [\n    dataset,\n    innerWidth,\n    innerHeight,\n    setDataSelected,\n    categoryAttribute,\n    displayAttributes,\n    setComponentBrushing,\n    registerCleanBrushing,\n    isBrushingOnEndOfMove,\n    pointSize,\n    color,\n  ])\n\n  useEffect(\n    () => createScatterPlotMatrix(),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [displayAttributes, categoryAttribute, innerWidth, innerHeight, pointSize, isBrushingOnEndOfMove, colorCategory],\n  )\n\n  selectAll(getClass(DATA_POINT_CLASS)).classed(SELECTED_CLASS, (d) => (d as SelectableDataType).selected)\n\n  displayDetails(isDetailsVisible, DUPLICATES_CLASS)\n\n  if (displayAttributes.length >= MIN_SCATTER_PLOT_MATRIX_ATTRIBUTE_COUNT) {\n    return (\n      <Box sx={getScatterPlotMatrixStyle(opacity, isBrushingActive)} id={CONTAINER_SAVE_ID[ViewType.ScatterPlotMatrix]}>\n        <svg width={width} height={height} id={SAVE_ID[ViewType.ScatterPlotMatrix]}>\n          <g ref={component} transform={getTranslate([margin.left, margin.top])} />\n        </svg>\n      </Box>\n    )\n  }\n  return <Box sx={getViewsNotDisplayStyle(width, height, margin)}>{SCATTER_PLOT_MATRIX_TEXT.unavailable}</Box>\n}\n","import { SxProps } from '@mui/system'\n\nimport { Opacity } from '../../../../types/styling/Opacity'\n\nimport { important } from '../../../../helpers/d3/stringGetters'\nimport { PLOT_COLORS } from '../../../../styles/colors'\n\nexport const GLYPHS_CLASS = `glyphs`\nexport const SELECTED_CLASS = `glyphsSelected`\n\nexport const getGlyphsStyle = (opacity: Opacity, isBrushActive: boolean): SxProps => ({\n  '& svg': {\n    bgcolor: PLOT_COLORS.backgroundColor,\n    font: `12px sans-serif`,\n  },\n  '& .glyphs': {\n    opacity: !isBrushActive ? opacity[0] / 100 : opacity[2] / 100,\n    cursor: `pointer`,\n    '&.glyphsSelected': {\n      fill: important(PLOT_COLORS.brushColor),\n      opacity: opacity[1] / 100,\n    },\n  },\n})\n","import { VoidFunctionComponent, useCallback, useEffect, useMemo, useRef } from 'react'\nimport { lineRadial, scaleLinear, scaleOrdinal, scaleRadial, select, selectAll } from 'd3'\nimport { Box } from '@mui/material'\n\nimport { SelectableDataType } from '../../../../types/data/data'\nimport { Brushable } from '../../../../types/brushing/Brushable'\nimport { VisualizationView } from '../../../../types/views/VisualizationView'\nimport { GlyphsSettings } from '../../../../types/views/settings/GlyphsSettings'\nimport { Margin } from '../../../../types/styling/Margin'\n\nimport { getExtendedExtentInDomains } from '../../../../helpers/d3/extent'\nimport { getCategoryColor } from '../../../../helpers/d3/attributeGetters'\nimport {\n  getAttributeValuesWithLabel,\n  getClass,\n  getEverything,\n  getTranslate,\n  px,\n} from '../../../../helpers/d3/stringGetters'\nimport { getComparator } from '../../../../helpers/data/comparator'\n\nimport { SVG } from '../../../../constants/svg'\nimport { MIN_GLYPHS_ATTRIBUTE_COUNT } from '../../../../constants/views/glyphs'\nimport { TOOLTIP, TOOLTIP_CLASS } from '../../../../constants/views/tooltip'\nimport { MouseActions } from '../../../../constants/actions/MouseActions'\nimport { HTML } from '../../../../constants/html'\nimport { CONTAINER_SAVE_ID, SAVE_ID } from '../../../../constants/save/save'\nimport { ViewType } from '../../../../constants/views/ViewTypes'\n\nimport { GLYPHS_TEXT } from '../../../../text/views-and-menus/glyphs'\n\nimport {\n  getGlyphsStyle,\n  GLYPHS_CLASS,\n  SELECTED_CLASS,\n} from '../../../../components-style/content/views/glyphs/glyphsStyle'\nimport { getViewsNotDisplayStyle } from '../../../../components-style/content/views/getViewsNotDisplayStyle'\n\nexport interface GlyphsProps extends VisualizationView, Brushable, GlyphsSettings {}\n\nconst GLYPHS = `GLYPHS`\n\nexport const Glyphs: VoidFunctionComponent<GlyphsProps> = ({\n  dataset,\n  width,\n  height,\n  displayAttributes,\n  categoryAttribute,\n  isBrushingActive,\n  setComponentBrushing,\n  setDataSelected,\n  sortAttribute,\n  sortType,\n  colorCategory,\n  glyphSize,\n  glyphSpacing,\n  margins,\n  opacity,\n}) => {\n  const margin = useMemo(() => new Margin(...margins), [margins])\n  const component = useRef<SVGGElement>(null)\n\n  const sortableDataset = useMemo<SelectableDataType[]>(() => [...dataset], [dataset])\n  const sortedDataset = useMemo(\n    () => sortableDataset.sort(getComparator(sortType, sortAttribute)),\n    [sortableDataset, sortAttribute, sortType],\n  )\n\n  const color = scaleOrdinal(colorCategory)\n\n  const innerWidth = width - margin.width\n  const glyphSizeWithSpacing = glyphSize + glyphSpacing\n  const glyphsCountPerLine = Math.floor(innerWidth / glyphSizeWithSpacing)\n  const glyphsCountPerHeight = Math.ceil(dataset.length / glyphsCountPerLine)\n  const innerHeight = glyphsCountPerHeight * glyphSizeWithSpacing\n  const glyphRadius = glyphSize / 2\n\n  // selected coloring\n  selectAll(getClass(GLYPHS_CLASS)).classed(SELECTED_CLASS, (d) => (d as SelectableDataType).selected)\n\n  const createGlyphs = useCallback(() => {\n    const node = component.current!\n    const svg = select(node)\n    svg.selectAll(getEverything()).remove() // clear\n\n    const [xScale, yScale] = [\n      scaleLinear([0, innerWidth]).domain([0, glyphsCountPerLine]),\n      scaleLinear([innerHeight, 0]).domain([0, glyphsCountPerHeight]),\n    ]\n\n    const extentInDomains = getExtendedExtentInDomains(displayAttributes, dataset, 5)\n\n    const lineRadialGenerator = lineRadial()\n    const radialScales = displayAttributes.map((attribute) =>\n      scaleRadial([0, glyphRadius]).domain(extentInDomains[attribute]),\n    )\n\n    // functions setting attributes\n    const getTransform = (data: SelectableDataType) => {\n      const idx = sortedDataset.indexOf(data)\n      return getTranslate([\n        xScale(idx % glyphsCountPerLine) + glyphRadius,\n        yScale(glyphsCountPerHeight - Math.floor(idx / glyphsCountPerLine)) + glyphRadius,\n      ])\n    }\n    const getGlyphPath = (data: SelectableDataType) =>\n      lineRadialGenerator(\n        displayAttributes.map((key, idx) => [\n          (2 * Math.PI * idx) / displayAttributes.length,\n          radialScales[idx](Number(data[key])),\n        ]),\n      )\n\n    const tooltip = select(getClass(TOOLTIP_CLASS))\n    svg\n      .selectAll(GLYPHS)\n      .data(dataset)\n      .enter()\n      .each((data, idx, elements) => {\n        select(elements[idx])\n          .append(SVG.elements.g)\n          .selectAll(SVG.elements.path)\n          .data([data])\n          .enter()\n          .append(SVG.elements.path)\n          .attr(SVG.attributes.class, GLYPHS_CLASS)\n          .attr(SVG.attributes.d, getGlyphPath)\n          .attr(SVG.attributes.transform, getTransform)\n          .on(MouseActions.mouseOver, ({ clientX, clientY }: MouseEvent, data: SelectableDataType) => {\n            tooltip.transition().duration(TOOLTIP.easeIn).style(SVG.style.opacity, TOOLTIP.visible)\n            tooltip\n              .html(getAttributeValuesWithLabel(data).join(HTML.newLine))\n              .style(SVG.style.left, px(clientX))\n              .style(SVG.style.top, px(clientY))\n          })\n          .on(MouseActions.mouseOut, () => {\n            tooltip.transition().duration(TOOLTIP.easeOut).style(SVG.style.opacity, TOOLTIP.invisible)\n          })\n          .on(MouseActions.click, (_: MouseEvent, changedData: SelectableDataType) => {\n            const selected = dataset.map((data) => (data === changedData ? !data.selected : data.selected))\n            if (selected.every((value) => !value)) {\n              setComponentBrushing(null)\n              return\n            }\n            setComponentBrushing(ViewType.Glyphs)\n            setDataSelected((data, idx) => selected[idx])\n          })\n          .style(SVG.style.fill, getCategoryColor(categoryAttribute, color))\n      })\n    selectAll(getClass(GLYPHS_CLASS)).classed(SELECTED_CLASS, (d) => (d as SelectableDataType).selected)\n  }, [\n    dataset,\n    sortedDataset,\n    innerWidth,\n    innerHeight,\n    setDataSelected,\n    setComponentBrushing,\n    glyphsCountPerLine,\n    glyphsCountPerHeight,\n    glyphRadius,\n    displayAttributes,\n    categoryAttribute,\n    color,\n  ])\n\n  useEffect(\n    () => createGlyphs(),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [displayAttributes, categoryAttribute, sortAttribute, sortType, innerWidth, innerHeight, colorCategory],\n  )\n\n  if (displayAttributes.length >= MIN_GLYPHS_ATTRIBUTE_COUNT) {\n    return (\n      <Box sx={getGlyphsStyle(opacity, isBrushingActive)} id={CONTAINER_SAVE_ID[ViewType.Glyphs]}>\n        <svg width={width} height={innerHeight + margin.height} id={SAVE_ID[ViewType.Glyphs]}>\n          <g ref={component} transform={getTranslate([margin.left, margin.top])} />\n        </svg>\n      </Box>\n    )\n  }\n  return <Box sx={getViewsNotDisplayStyle(width, height, margin)}>{GLYPHS_TEXT.unavailable}</Box>\n}\n","import { SxProps } from '@mui/system'\nimport { Opacity } from '../../../../types/styling/Opacity'\n\nimport { important } from '../../../../helpers/d3/stringGetters'\nimport { PLOT_COLORS } from '../../../../styles/colors'\n\nexport const SCATTER_PLOT_GLYPHS_CLASS = `scatterPlotGlyphs`\nexport const SELECTED_CLASS = `scatterPlotGlyphsSelected`\nexport const AXIS_CLASS = `scatterPlotAxis`\nexport const DUPLICATES_CLASS = `scatterPlotGlyphsDuplicates`\n\nexport const getScatterPlotGlyphsStyle = (opacity: Opacity, isBrushingActive: boolean): SxProps => ({\n  '& svg': {\n    bgcolor: PLOT_COLORS.backgroundColor,\n    font: `12px sans-serif`,\n  },\n  '& .scatterPlotGlyphs': {\n    opacity: !isBrushingActive ? opacity[0] / 100 : opacity[2] / 100,\n    '&.scatterPlotGlyphsSelected': {\n      fill: important(PLOT_COLORS.brushColor),\n      opacity: opacity[1] / 100,\n    },\n  },\n  '& .scatterPlotGlyphsDuplicates': {\n    opacity: 0,\n  },\n  '& .scatterPlotAxis': {\n    shapeRendering: `crispEdges`,\n    '& line, path': {\n      stroke: PLOT_COLORS.axisLinesDark,\n    },\n  },\n})\n","import { VoidFunctionComponent, useCallback, useEffect, useMemo, useRef } from 'react'\nimport {\n  axisBottom,\n  axisLeft,\n  brush,\n  D3BrushEvent,\n  lineRadial,\n  scaleLinear,\n  scaleOrdinal,\n  scaleRadial,\n  select,\n  selectAll,\n} from 'd3'\nimport { Box } from '@mui/material'\n\nimport { SelectableDataType } from '../../../../types/data/data'\nimport { VisualizationView } from '../../../../types/views/VisualizationView'\nimport { Brushable } from '../../../../types/brushing/Brushable'\nimport { ScatterPlotGlyphsSettings } from '../../../../types/views/settings/ScatterPlotGlyphsSettings'\nimport { Margin } from '../../../../types/styling/Margin'\nimport { BrushSelection2d } from '../../../../types/brushing/BrushSelection'\n\nimport {\n  getAttributeValuesWithLabel,\n  getClass,\n  getEverything,\n  getTranslate,\n  px,\n} from '../../../../helpers/d3/stringGetters'\nimport { displayDetails } from '../../../../helpers/d3/displayDetails'\nimport { getExtentInDomains } from '../../../../helpers/d3/extent'\nimport { getCategoryColor } from '../../../../helpers/d3/attributeGetters'\nimport { isInRanges } from '../../../../helpers/basic/range'\n\nimport { ViewType } from '../../../../constants/views/ViewTypes'\nimport { CONTAINER_SAVE_ID, SAVE_ID } from '../../../../constants/save/save'\nimport { SVG } from '../../../../constants/svg'\nimport { MouseActions } from '../../../../constants/actions/MouseActions'\nimport { TOOLTIP, TOOLTIP_CLASS } from '../../../../constants/views/tooltip'\nimport { HTML } from '../../../../constants/html'\nimport { BrushAction } from '../../../../constants/actions/BrushAction'\nimport { MIN_SCATTER_PLOT_GLYPHS_ATTRIBUTE_COUNT } from '../../../../constants/views/scatterPlotGlyphs'\n\nimport { SCATTER_PLOT_GLYPHS_TEXT } from '../../../../text/views-and-menus/scatterPlotGlyphs'\n\nimport {\n  AXIS_CLASS,\n  DUPLICATES_CLASS,\n  getScatterPlotGlyphsStyle,\n  SCATTER_PLOT_GLYPHS_CLASS,\n  SELECTED_CLASS,\n} from '../../../../components-style/content/views/scatter-plot-glyphs/scatterPlotGlyphsStyle'\nimport { getViewsNotDisplayStyle } from '../../../../components-style/content/views/getViewsNotDisplayStyle'\n\nconst SCATTER_PLOT_GLYPHS = `SCATTER_PLOT_GLYPHS`\nconst AXIS_X = `axisX`\nconst AXIS_Y = `axisY`\n\nexport interface ScatterPlotGlyphsProps extends VisualizationView, Brushable, ScatterPlotGlyphsSettings {}\n\nexport const ScatterPlotGlyphs: VoidFunctionComponent<ScatterPlotGlyphsProps> = ({\n  width,\n  height,\n  dataset,\n  setDataSelected,\n  displayAttributes,\n  xAttribute,\n  yAttribute,\n  categoryAttribute,\n  registerCleanBrushing,\n  setComponentBrushing,\n  isBrushingActive,\n  isDetailsVisible,\n  isBrushingOnEndOfMove,\n  colorCategory,\n  glyphSize,\n  margins,\n  opacity,\n}) => {\n  const margin = useMemo(() => new Margin(...margins), [margins])\n  const component = useRef<SVGGElement>(null)\n  const color = scaleOrdinal(colorCategory)\n\n  const [innerWidth, innerHeight] = [width - margin.width - glyphSize, height - margin.height - glyphSize]\n\n  const createScatterPlotGlyphs = useCallback(() => {\n    const node = component.current!\n    const svg = select(node)\n    svg.selectAll(getEverything()).remove() // clear\n\n    const extentInDomains = getExtentInDomains([...displayAttributes, xAttribute, yAttribute], dataset)\n\n    const [xScale, yScale] = [\n      scaleLinear([0, innerWidth]).domain(extentInDomains[xAttribute]),\n      scaleLinear([innerHeight, 0]).domain(extentInDomains[yAttribute]),\n    ]\n\n    const lineRadialGenerator = lineRadial()\n    const radialScales = displayAttributes.map((attribute) =>\n      scaleRadial([0, glyphSize / 2]).domain(extentInDomains[attribute]),\n    )\n\n    const getGlyphPath = (data: SelectableDataType) =>\n      lineRadialGenerator(\n        displayAttributes.map((key, idx) => [\n          (2 * Math.PI * idx) / displayAttributes.length,\n          radialScales[idx](Number(data[key])),\n        ]),\n      )\n\n    const tooltip = select(getClass(TOOLTIP_CLASS))\n    const makeGlyphs = (className: string) =>\n      svg\n        .selectAll(SCATTER_PLOT_GLYPHS)\n        .data(dataset)\n        .enter()\n        .each((data, idx, elements) => {\n          select(elements[idx])\n            .append(SVG.elements.g)\n            .selectAll(SVG.elements.path)\n            .data([data])\n            .enter()\n            .append(SVG.elements.path)\n            .attr(SVG.attributes.class, className)\n            .attr(SVG.attributes.d, getGlyphPath)\n            .attr(\n              SVG.attributes.transform,\n              getTranslate([xScale(Number(data[xAttribute])), yScale(Number(data[yAttribute]))]),\n            )\n            .on(MouseActions.mouseOver, ({ clientX, clientY }: MouseEvent, data: SelectableDataType) => {\n              tooltip.transition().duration(TOOLTIP.easeIn).style(SVG.style.opacity, TOOLTIP.visible)\n              tooltip\n                .html(getAttributeValuesWithLabel(data).join(HTML.newLine))\n                .style(SVG.style.left, px(clientX))\n                .style(SVG.style.top, px(clientY))\n            })\n            .on(MouseActions.mouseOut, () => {\n              tooltip.transition().duration(TOOLTIP.easeOut).style(SVG.style.opacity, TOOLTIP.invisible)\n            })\n            .style(SVG.style.fill, getCategoryColor(categoryAttribute, color))\n        })\n    makeGlyphs(SCATTER_PLOT_GLYPHS_CLASS)\n\n    const axisX = svg\n      .selectAll(AXIS_X)\n      .data(dataset)\n      .enter()\n      .append(SVG.elements.g)\n      .attr(SVG.attributes.transform, getTranslate([0, innerHeight]))\n      .attr(SVG.attributes.class, AXIS_CLASS)\n    axisX.call(axisBottom(xScale))\n    svg\n      .selectAll(AXIS_Y)\n      .data(dataset)\n      .enter()\n      .append(SVG.elements.g)\n      .attr(SVG.attributes.class, AXIS_CLASS)\n      .call(axisLeft(yScale))\n    const setBrushingSelection = (selection: BrushSelection2d) => {\n      if (selection) {\n        setDataSelected((data) =>\n          isInRanges(selection, xScale(Number(data[xAttribute])), yScale(Number(data[yAttribute]))),\n        )\n      }\n    }\n\n    const makeBrush = brush()\n      .on(BrushAction.start, () => {\n        setComponentBrushing(ViewType.ScatterPlotGlyphs)\n      })\n      .on(BrushAction.move, ({ selection }: D3BrushEvent<SelectableDataType>) => {\n        if (!isBrushingOnEndOfMove) {\n          const brushSelection = selection as BrushSelection2d\n          setBrushingSelection(brushSelection)\n        }\n      })\n      .on(BrushAction.end, ({ selection }: D3BrushEvent<SelectableDataType>) => {\n        const brushSelection = selection as BrushSelection2d\n        setBrushingSelection(brushSelection)\n        if (!brushSelection) {\n          setComponentBrushing(null)\n        }\n      })\n      .extent([\n        [-glyphSize / 2, -glyphSize / 2],\n        [innerWidth + glyphSize / 2, innerHeight + glyphSize / 2],\n      ])\n    svg.call(makeBrush)\n\n    // make duplicates for brushing/tooltip\n    makeGlyphs(DUPLICATES_CLASS)\n    registerCleanBrushing(() => {\n      brush().clear(svg)\n    })\n  }, [\n    dataset,\n    innerWidth,\n    innerHeight,\n    setDataSelected,\n    setComponentBrushing,\n    xAttribute,\n    yAttribute,\n    displayAttributes,\n    categoryAttribute,\n    glyphSize,\n    color,\n    registerCleanBrushing,\n    isBrushingOnEndOfMove,\n  ])\n\n  useEffect(\n    () => createScatterPlotGlyphs(),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [\n      displayAttributes,\n      categoryAttribute,\n      innerWidth,\n      innerHeight,\n      glyphSize,\n      isBrushingOnEndOfMove,\n      colorCategory,\n      xAttribute,\n      yAttribute,\n    ],\n  )\n\n  selectAll(getClass(SCATTER_PLOT_GLYPHS_CLASS)).classed(SELECTED_CLASS, (d) => (d as SelectableDataType).selected)\n\n  displayDetails(isDetailsVisible, DUPLICATES_CLASS)\n\n  if (displayAttributes.length >= MIN_SCATTER_PLOT_GLYPHS_ATTRIBUTE_COUNT) {\n    return (\n      <Box sx={getScatterPlotGlyphsStyle(opacity, isBrushingActive)} id={CONTAINER_SAVE_ID[ViewType.ScatterPlotGlyphs]}>\n        <svg width={width} height={height} id={SAVE_ID[ViewType.ScatterPlotGlyphs]}>\n          <g ref={component} transform={getTranslate([margin.left + glyphSize / 2, margin.top + glyphSize / 2])} />\n        </svg>\n        <Box className={TOOLTIP_CLASS} />\n      </Box>\n    )\n  }\n  return <Box sx={getViewsNotDisplayStyle(width, height, margin)}>{SCATTER_PLOT_GLYPHS_TEXT.unavailable}</Box>\n}\n","interface FormType {\n  checkbox: `checkbox`\n}\n\nexport const FORM: FormType = {\n  checkbox: `checkbox`,\n}\n","import { SxProps } from '@mui/system'\nimport { PLOT_COLORS, TABLE_COLORS } from '../../../../styles/colors'\nimport { important } from '../../../../helpers/d3/stringGetters'\n\nexport const getDataTableRowStyle = (rowHeight: number, selected: boolean): SxProps => ({\n  height: rowHeight,\n  bgcolor: selected ? PLOT_COLORS.brushColorTable : ``,\n  '& .MuiTableCell-root, .MuiCheckbox-root': {\n    paddingTop: 0,\n    paddingBottom: 0,\n  },\n})\n\nexport const dataTableStyle: Record<string, SxProps> = {\n  tableHead: {\n    height: 30,\n    bgcolor: TABLE_COLORS.headerBackground,\n    fontWeight: `bold`,\n    '& .MuiTableCell-root, .MuiCheckbox-root': {\n      color: TABLE_COLORS.headerFont,\n    },\n    '& .MuiTableSortLabel-root.Mui-active, .MuiTableSortLabel-root:hover, .MuiTableSortLabel-icon': {\n      color: important(TABLE_COLORS.headerFontActive),\n    },\n  },\n  tableBody: {\n    bgcolor: TABLE_COLORS.rowsBackground,\n  },\n  notDisplayed: {\n    padding: 10,\n  },\n}\n","import { useMemo, useState, VoidFunctionComponent } from 'react'\nimport {\n  Box,\n  Checkbox,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  TableSortLabel,\n  Tooltip,\n} from '@mui/material'\n\nimport { VisualizationView } from '../../../../types/views/VisualizationView'\nimport { Brushable } from '../../../../types/brushing/Brushable'\nimport { DataTableSettings } from '../../../../types/views/settings/DataTableSettings'\nimport { IndexedSelectableDataType, SelectableDataType } from '../../../../types/data/data'\n\nimport { dataToReadable, otherCasesToWhitespaces } from '../../../../helpers/data/formatText'\nimport { getComparator, SortType } from '../../../../helpers/data/comparator'\n\nimport { ViewType } from '../../../../constants/views/ViewTypes'\nimport { MIN_DATA_TABLE_ATTRIBUTE_COUNT } from '../../../../constants/views/dataTable'\nimport { FORM } from '../../../../constants/form'\n\nimport { DATA_TABLE_TEXT } from '../../../../text/views-and-menus/dataTable'\nimport {\n  dataTableStyle,\n  getDataTableRowStyle,\n} from '../../../../components-style/content/views/data-table/dataTableStyle'\n\nexport interface DataTableProps extends VisualizationView, Brushable, DataTableSettings {}\n\nexport const DataTable: VoidFunctionComponent<DataTableProps> = ({\n  dataset,\n  displayAttributes,\n  setDataSelected,\n  setComponentBrushing,\n  rowHeight,\n}) => {\n  const [order, setOrder] = useState<SortType>(SortType.asc)\n  const [orderBy, setOrderBy] = useState<keyof SelectableDataType>(displayAttributes[0])\n  const sortableDataset = useMemo<IndexedSelectableDataType[]>(\n    () => dataset.map((data: SelectableDataType, index) => ({ ...data, index })),\n    [dataset],\n  )\n\n  const sortedDataset = useMemo(\n    () => sortableDataset.sort(getComparator(order, orderBy)),\n    [sortableDataset, order, orderBy],\n  )\n\n  const handleSelectClick = (index: number) => {\n    if (dataset.filter((data) => data.selected).length === 1 && dataset[index].selected) {\n      setComponentBrushing(null)\n      return\n    }\n    setComponentBrushing(ViewType.DataTable)\n    setDataSelected((data, idx) => (idx === index ? !data.selected : data.selected))\n  }\n\n  const handleSelectAllClick = (checked: boolean) => {\n    if (!checked) {\n      setComponentBrushing(null)\n      return\n    }\n    setComponentBrushing(ViewType.DataTable)\n    setDataSelected(() => true)\n  }\n\n  const handleRequestSort = (property: keyof SelectableDataType) => {\n    const isAsc = orderBy === property && order === SortType.asc\n    setOrder(isAsc ? SortType.desc : SortType.asc)\n    setOrderBy(property)\n  }\n\n  const createSortHandler = (property: keyof SelectableDataType) => () => {\n    handleRequestSort(property)\n  }\n  const sortTooltipTitle = (headCellId: keyof SelectableDataType) =>\n    orderBy === headCellId\n      ? DATA_TABLE_TEXT[order === SortType.asc ? SortType.desc : SortType.asc]\n      : DATA_TABLE_TEXT[SortType.asc]\n\n  const numSelected = dataset.filter((data) => data.selected).length\n  const someSelected = numSelected > 0 && numSelected < dataset.length\n  const allSelected = numSelected === dataset.length\n\n  if (displayAttributes.length >= MIN_DATA_TABLE_ATTRIBUTE_COUNT) {\n    return (\n      <TableContainer>\n        <Table>\n          <TableHead sx={dataTableStyle.tableHead}>\n            <TableRow>\n              <TableCell padding={FORM.checkbox}>\n                <Tooltip title={DATA_TABLE_TEXT.checkboxTooltip}>\n                  <Checkbox\n                    sx={dataTableStyle.checkAll}\n                    indeterminate={someSelected}\n                    checked={allSelected}\n                    onChange={(event) => handleSelectAllClick(event.target.checked)}\n                  />\n                </Tooltip>\n              </TableCell>\n              {displayAttributes.map((attribute) => {\n                const orderedByActive = orderBy === attribute\n                return (\n                  <TableCell key={attribute} sortDirection={orderedByActive ? order : false}>\n                    <Tooltip title={sortTooltipTitle(attribute)}>\n                      <TableSortLabel\n                        active={orderedByActive}\n                        direction={orderedByActive ? order : SortType.asc}\n                        onClick={createSortHandler(attribute)}\n                      >\n                        {otherCasesToWhitespaces(attribute)}\n                      </TableSortLabel>\n                    </Tooltip>\n                  </TableCell>\n                )\n              })}\n            </TableRow>\n          </TableHead>\n          <TableBody sx={dataTableStyle.tableBody}>\n            {sortedDataset.map((dataCopy, idx) => {\n              const selected = dataset[dataCopy.index].selected\n              return (\n                <TableRow\n                  hover\n                  onClick={() => handleSelectClick(dataCopy.index)}\n                  key={idx}\n                  sx={getDataTableRowStyle(rowHeight, selected)}\n                >\n                  <TableCell padding={FORM.checkbox}>\n                    <Checkbox checked={selected} />\n                  </TableCell>\n                  {displayAttributes.map((attribute) => (\n                    <TableCell key={`${idx}-${attribute}`}>{dataToReadable(dataCopy[attribute])}</TableCell>\n                  ))}\n                </TableRow>\n              )\n            })}\n          </TableBody>\n        </Table>\n      </TableContainer>\n    )\n  }\n  return <Box sx={dataTableStyle.notDisplayed}>{DATA_TABLE_TEXT.unavailable}</Box>\n}\n","import { VoidFunctionComponent } from 'react'\nimport { Box } from '@mui/material'\n\nimport { VisualizationView } from '../../../types/views/VisualizationView'\nimport { Brushable } from '../../../types/brushing/Brushable'\nimport { ParallelCoordinatesSettings } from '../../../types/views/settings/ParallelCoordinatesSettings'\nimport { ScatterPlotMatrixSettings } from '../../../types/views/settings/ScatterPlotMatrixSettings'\nimport { GlyphsSettings } from '../../../types/views/settings/GlyphsSettings'\nimport { ScatterPlotGlyphsSettings } from '../../../types/views/settings/ScatterPlotGlyphsSettings'\nimport { DataTableSettings } from '../../../types/views/settings/DataTableSettings'\n\nimport { ViewType } from '../../../constants/views/ViewTypes'\nimport { VIEW_BORDER_SIZE } from '../../../constants/views/common'\n\nimport { getViewBoxStyle } from '../../../components-style/content/views/viewStyle'\n\nimport { Settings, SettingsType } from '../../../types/views/settings/Settings'\nimport { ParallelCoordinates } from './parallel-coordinates/ParallelCoordinates'\nimport { ScatterPlotMatrix } from './scatter-plot-matrix/ScatterPlotMatrix'\nimport { Glyphs } from './glyphs/Glyphs'\nimport { ScatterPlotGlyphs } from './scatter-plot-glyphs/ScatterPlotGlyphs'\nimport { DataTable } from './data-table/DataTable'\n\nexport interface ViewProps extends Brushable, VisualizationView {\n  component: ViewType\n  settings: Settings\n}\n\ntype ViewElementFunction = (props: Brushable & VisualizationView, settings: SettingsType) => JSX.Element\n\nconst options: Record<ViewType, ViewElementFunction> = {\n  [ViewType.Glyphs]: (p, s) => <Glyphs {...p} {...(s as GlyphsSettings)} />,\n  [ViewType.ParallelCoordinates]: (p, s) => <ParallelCoordinates {...p} {...(s as ParallelCoordinatesSettings)} />,\n  [ViewType.ScatterPlotMatrix]: (p, s) => <ScatterPlotMatrix {...p} {...(s as ScatterPlotMatrixSettings)} />,\n  [ViewType.ScatterPlotGlyphs]: (p, s) => <ScatterPlotGlyphs {...p} {...(s as ScatterPlotGlyphsSettings)} />,\n  [ViewType.DataTable]: (p, s) => <DataTable {...p} {...(s as DataTableSettings)} />,\n}\n\nexport const View: VoidFunctionComponent<ViewProps> = ({ width, height, component, settings, ...dataProps }) => {\n  const graph = options[component]\n  const settingsCurr = settings[component]\n  if (!settingsCurr) return null\n  return (\n    <Box sx={getViewBoxStyle(width, height)}>\n      {graph({ width, height: height - VIEW_BORDER_SIZE, ...dataProps }, settingsCurr)}\n    </Box>\n  )\n}\n","import { SxProps } from '@mui/system'\n\nexport const getViewBoxStyle = (w: number, h: number): SxProps => ({\n  width: w,\n  height: h,\n  overflowX: `hidden`,\n  overflowY: `auto`,\n})\n","import React, { VoidFunctionComponent, ComponentProps } from 'react'\nimport { useSize } from 'react-use'\nimport { Box, IconButton, Typography } from '@mui/material'\nimport { Close } from '@mui/icons-material'\n\nimport { ViewType } from '../../../constants/views/ViewTypes'\nimport { DRAG_HANDLE, HEADER_HEIGHT, VIEW_DEFAULT_SIZE } from '../../../constants/views/common'\n\nimport { gridItemStyle } from '../../../components-style/content/views/gridItemStyle'\n\nimport { DataSaveButton } from '../common/DataSaveButton'\nimport { View } from './View'\n\ntype Props = Omit<ComponentProps<typeof View>, `width` | `height`> & {\n  title: string\n  onRemove: () => void\n  isDragFinished: boolean\n}\n\nexport const GridItem: VoidFunctionComponent<Props> = ({ onRemove, title, isDragFinished, ...rest }) => {\n  const [sized] = useSize(\n    ({ width, height }) => (\n      <Box sx={gridItemStyle.gridItem}>\n        <Box sx={gridItemStyle.header} className={DRAG_HANDLE}>\n          <Typography sx={gridItemStyle.text}>{title}</Typography>\n          <Box>\n            {rest.component !== ViewType.DataTable && <DataSaveButton viewType={rest.component} />}\n            <IconButton onClick={onRemove}>\n              <Close />\n            </IconButton>\n          </Box>\n        </Box>\n        {isDragFinished && <View width={width} height={height - HEADER_HEIGHT} {...rest} />}\n      </Box>\n    ),\n    VIEW_DEFAULT_SIZE,\n  )\n\n  return sized\n}\n","import { Dispatch, VoidFunctionComponent, SetStateAction, useCallback, useState } from 'react'\nimport GridLayout, { WidthProvider } from 'react-grid-layout'\nimport { Box } from '@mui/material'\nimport { AddCircle } from '@mui/icons-material'\n\nimport { Brushable } from '../../../types/brushing/Brushable'\nimport { SelectableDataType } from '../../../types/data/data'\nimport { SideEffectVoid } from '../../../types/basic/functionTypes'\nimport { GridLayoutItem, LayoutArray } from '../../../types/views/Grid'\nimport { Settings } from '../../../types/views/settings/Settings'\n\nimport { getClass } from '../../../helpers/d3/stringGetters'\nimport { displayDetails } from '../../../helpers/d3/displayDetails'\n\nimport { isViewType, ViewType } from '../../../constants/views/ViewTypes'\nimport {\n  COLUMNS_COUNT,\n  DEFAULT_GRID_LAYOUT,\n  DEFAULT_VIEW_DIMENSIONS,\n  DRAG_HANDLE,\n  ROW_HEIGHT,\n  VIEW_LIMITS,\n} from '../../../constants/views/common'\nimport { TOOLTIP_CLASS } from '../../../constants/views/tooltip'\nimport { TOP_TOOLBAR_TEXT } from '../../../text/SiteText'\nimport { VIEW_NAMES } from '../../../text/views-and-menus/common'\n\nimport { viewGridStyle } from '../../../components-style/content/views/viewGridStyle'\n\nimport { DataDrawer } from '../data-drawer/DataDrawer'\nimport { SelectionDialog } from '../common/dialogs/SelectionDialog'\nimport { GridItem } from './GridItem'\n\nexport interface ViewGridDataProps extends Brushable {\n  dataset: ReadonlyArray<SelectableDataType>\n}\n\nexport interface ViewGridProps extends ViewGridDataProps {\n  isDrawerOpen: boolean\n  isDetailsVisible: boolean\n  closeDrawer: SideEffectVoid\n  cleanSelectedIfViewWasBrushing: (viewType: ViewType) => void\n  settings: Settings\n  setSettings: Dispatch<SetStateAction<Settings>>\n  isAddViewDialogOpen: boolean\n  setIsAddViewDialogOpen: Dispatch<SetStateAction<boolean>>\n}\n\nconst ReactGridLayout = WidthProvider(GridLayout)\n\nexport const ViewGrid: VoidFunctionComponent<ViewGridProps> = ({\n  isDrawerOpen,\n  closeDrawer,\n  cleanSelectedIfViewWasBrushing,\n  settings,\n  setSettings,\n  isAddViewDialogOpen,\n  setIsAddViewDialogOpen,\n  ...viewProps\n}) => {\n  const [isGridChanging, setIsGridResizing] = useState(false)\n  const [layout, setLayout] = useState<GridLayoutItem[]>(DEFAULT_GRID_LAYOUT)\n\n  const views = layout.map((item) => item.i)\n\n  const updateLayout = useCallback((newLayout: LayoutArray) => {\n    if (!newLayout) return\n    const filteredLayout = newLayout.filter((item) => isViewType(item.i))\n    setLayout(filteredLayout as GridLayoutItem[])\n  }, [])\n\n  const addView = useCallback(\n    (viewType: ViewType) => {\n      setIsAddViewDialogOpen(false)\n      setLayout((layout) => {\n        if (layout.find((item) => item.i === viewType)) return layout\n        const posY = layout.reduce((max, item) => Math.max(item.y, max), 0) + 1\n        return [...layout, { i: viewType, x: 0, y: posY, ...DEFAULT_VIEW_DIMENSIONS[viewType], ...VIEW_LIMITS }]\n      })\n    },\n    [setIsAddViewDialogOpen],\n  )\n\n  const removeView = useCallback((viewType: ViewType) => {\n    setLayout((layout) => layout.filter((item) => item.i !== viewType))\n  }, [])\n\n  const availableViews = Object.values(ViewType).filter((viewType) => !views.includes(viewType))\n  displayDetails(viewProps.isDetailsVisible, TOOLTIP_CLASS)\n\n  const dialogOptions = availableViews.map((key) => ({ key, label: VIEW_NAMES[key], icon: <AddCircle /> }))\n  return (\n    <Box>\n      <SelectionDialog\n        isOpen={isAddViewDialogOpen}\n        onClose={() => setIsAddViewDialogOpen(false)}\n        title={TOP_TOOLBAR_TEXT.addViewDialogTitle}\n        options={dialogOptions}\n        noOptionText={TOP_TOOLBAR_TEXT.noOption}\n        handleListItemClick={addView}\n      />\n      <DataDrawer\n        isOpen={isDrawerOpen}\n        close={closeDrawer}\n        dataset={viewProps.dataset}\n        views={views}\n        settings={settings}\n        setSettings={setSettings}\n        cleanSelectedIfViewWasBrushing={cleanSelectedIfViewWasBrushing}\n      />\n      <Box sx={viewGridStyle.tooltip} className={TOOLTIP_CLASS} />\n      <ReactGridLayout\n        onLayoutChange={updateLayout}\n        draggableHandle={getClass(DRAG_HANDLE)}\n        onResizeStart={() => setIsGridResizing(true)}\n        onResizeStop={() => setIsGridResizing(false)}\n        cols={COLUMNS_COUNT}\n        rowHeight={ROW_HEIGHT}\n        isResizable\n      >\n        {layout.map((view) => (\n          <Box key={view.i} data-grid={view}>\n            <GridItem\n              isDragFinished={!isGridChanging}\n              title={VIEW_NAMES[view.i]}\n              onRemove={() => {\n                cleanSelectedIfViewWasBrushing(view.i)\n                removeView(view.i)\n              }}\n              component={view.i}\n              settings={settings}\n              {...viewProps}\n            />\n          </Box>\n        ))}\n      </ReactGridLayout>\n    </Box>\n  )\n}\n","import { SxProps } from '@mui/system'\nimport { px } from '../../../helpers/d3/stringGetters'\nimport { SITE_COLORS } from '../../../styles/colors'\n\nexport const emptyDataStyle: Record<string, SxProps> = {\n  site: {\n    paddingTop: px(20),\n    color: SITE_COLORS.font,\n  },\n}\n","import { VoidFunctionComponent } from 'react'\nimport { Box } from '@mui/material'\n\nimport { EMPTY_DATA_TEXT } from '../../../text/SiteText'\n\nimport { emptyDataStyle } from '../../../components-style/content/no-data/emptyDataStyle'\n\nexport const EmptyData: VoidFunctionComponent = () => <Box sx={emptyDataStyle.site}>{EMPTY_DATA_TEXT.content}</Box>\n","import { SxProps } from '@mui/system'\nimport { px } from '../../../helpers/d3/stringGetters'\n\nexport const loadingStyle: Record<string, SxProps> = {\n  load: {\n    paddingTop: px(40),\n  },\n}\n","import { VoidFunctionComponent } from 'react'\nimport { Box } from '@mui/material'\n\nimport { loadingStyle } from '../../../components-style/content/no-data/loadingStyle'\nimport { EMPTY_DATA_TEXT } from '../../../text/SiteText'\n\nexport const Loading: VoidFunctionComponent = () => <Box sx={loadingStyle.load}>{EMPTY_DATA_TEXT.loading}</Box>\n","import { useState, VoidFunctionComponent } from 'react'\n\nimport { SelectableDataType } from '../../../types/data/data'\nimport { SideEffectVoid } from '../../../types/basic/functionTypes'\nimport { SetComponentBrushing } from '../../../types/brushing/Brushable'\n\nimport { useUpdatedRef } from '../../../helpers/react/useUpdatedRef'\n\nimport { DataLoadState } from '../../../constants/data/dataLoadState'\nimport { ViewType } from '../../../constants/views/ViewTypes'\n\nimport { TopToolbar } from '../top-toolbar/TopToolbar'\nimport { ViewGrid } from '../views/ViewGrid'\nimport { Settings } from '../../../types/views/settings/Settings'\nimport { EmptyData } from '../no-data/EmptyData'\nimport { Loading } from '../no-data/Loading'\n\nexport const DataContext: VoidFunctionComponent = () => {\n  const [dataLoadState, setDataLoadState] = useState(DataLoadState.NoData)\n\n  const [dataset, setDataset] = useState<ReadonlyArray<SelectableDataType> | null>(null)\n  const [settings, setSettings] = useState<Settings>({})\n\n  const [componentBrushing, setCurrentComponentBrushing] = useState<null | ViewType>(null)\n  const [cleanBrushing, setCleanBrushing] = useState<SideEffectVoid[]>([])\n  const [redrawTime, setRedrawTime] = useState(Date.now())\n\n  const [isDrawerOpen, setDrawerOpen] = useState<boolean>(false)\n  const [isDetailsVisible, setIsDetailsVisible] = useState(true)\n  const [isBrushingOnEndOfMove, setIsBrushingOnEndOfMove] = useState(false)\n\n  const [isAddViewDialogOpen, setIsAddViewDialogOpen] = useState(false)\n\n  const cleanBrushingRef = useUpdatedRef(cleanBrushing)\n  const componentBrushingRef = useUpdatedRef(componentBrushing)\n\n  const setDatasetAndRemoveBrushing = (data: ReadonlyArray<SelectableDataType> | null) => {\n    setSettings({})\n    setDataset(data)\n    setCurrentComponentBrushing(null)\n  }\n\n  const setDataSelected = (setFunction: (data: SelectableDataType, idx: number) => boolean): void => {\n    if (dataset) {\n      dataset.forEach((data, idx) => {\n        data.selected = setFunction(data, idx)\n      })\n      setRedrawTime(Date.now()) // redraw component\n    }\n  }\n\n  const cleanAllBrushes = (deletePrevSelection = true) => {\n    if (deletePrevSelection) {\n      setDataSelected((data) => (data.selected = false))\n    }\n    cleanBrushingRef.current.forEach((f) => f())\n  }\n\n  const clearBrushesOnButton = () => {\n    setCurrentComponentBrushing(null)\n    cleanAllBrushes()\n  }\n\n  const setComponentBrushing: SetComponentBrushing = (newComponent) => {\n    if (componentBrushingRef.current !== newComponent) {\n      cleanAllBrushes(newComponent !== ViewType.DataTable && newComponent !== ViewType.Glyphs)\n    }\n    setCurrentComponentBrushing(newComponent)\n  }\n\n  const registerCleanBrushing = (cleanBrushing: SideEffectVoid) => {\n    setCleanBrushing((prev) => [...prev, cleanBrushing])\n  }\n\n  const cleanSelectedIfViewWasBrushing = (component: ViewType) => {\n    if (componentBrushingRef.current === component) {\n      cleanAllBrushes()\n      setCurrentComponentBrushing(null)\n    }\n  }\n\n  const setIsBrushingOnEndOfMoveAndRemoveBrushing = (newIsBrushingOnEndOfMove: boolean) => {\n    cleanAllBrushes()\n    setCurrentComponentBrushing(null)\n    setIsBrushingOnEndOfMove(newIsBrushingOnEndOfMove)\n  }\n\n  const isBrushingActive = componentBrushingRef.current !== null\n\n  const viewProps = {\n    registerCleanBrushing,\n    setComponentBrushing,\n    setDataSelected,\n    redrawTime,\n    isBrushingActive,\n    isBrushingOnEndOfMove,\n  }\n\n  const getViewGrid = () => {\n    if (dataLoadState === DataLoadState.NoData) {\n      return <EmptyData />\n    }\n    if (dataLoadState === DataLoadState.Loading || !dataset) {\n      return <Loading />\n    }\n    return (\n      <ViewGrid\n        isDrawerOpen={isDrawerOpen}\n        isDetailsVisible={isDetailsVisible}\n        closeDrawer={() => setDrawerOpen(false)}\n        cleanSelectedIfViewWasBrushing={cleanSelectedIfViewWasBrushing}\n        settings={settings}\n        setSettings={setSettings}\n        dataset={dataset}\n        isAddViewDialogOpen={isAddViewDialogOpen}\n        setIsAddViewDialogOpen={setIsAddViewDialogOpen}\n        {...viewProps}\n      />\n    )\n  }\n\n  return (\n    <>\n      <TopToolbar\n        openDrawer={() => setDrawerOpen(true)}\n        isToolsDisabled={dataset === null}\n        isDetailsVisible={isDetailsVisible}\n        setIsDetailsVisible={setIsDetailsVisible}\n        isBrushingOnEndOfMove={isBrushingOnEndOfMove}\n        setIsBrushingOnEndOfMove={setIsBrushingOnEndOfMoveAndRemoveBrushing}\n        isBrushingActive={isBrushingActive}\n        clearBrushes={clearBrushesOnButton}\n        setDataset={setDatasetAndRemoveBrushing}\n        setDataLoadState={setDataLoadState}\n        setIsAddViewDialogOpen={setIsAddViewDialogOpen}\n      />\n      {getViewGrid()}\n    </>\n  )\n}\n","import { SxProps } from '@mui/system'\n\nexport const appStyle: Record<string, SxProps> = {\n  app: {\n    textAlign: `center`,\n    minHeight: `100vh`,\n    display: `flex`,\n    flexDirection: `column`,\n    alignItems: `center`,\n  },\n  content: {\n    flexGrow: 1,\n    width: `100%`,\n  },\n}\n","import { VoidFunctionComponent } from 'react'\nimport { Box } from '@mui/material'\n\nimport { Header } from './components/header/Header'\nimport { Footer } from './components/footer/Footer'\nimport { DataContext } from './components/content/context/DataContext'\n\nimport { appStyle } from './appStyle'\n\nexport const App: VoidFunctionComponent = () => (\n  <Box sx={appStyle.app}>\n    <Header />\n    <Box sx={appStyle.content}>\n      <DataContext />\n    </Box>\n    <Footer />\n  </Box>\n)\n","import { StrictMode } from 'react'\nimport ReactDOM from 'react-dom'\nimport 'react-grid-layout/css/styles.css'\nimport 'react-resizable/css/styles.css'\n\nimport { App } from './app/App'\nimport './index.css'\n\nReactDOM.render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n  document.getElementById(`root`),\n)\n"],"sourceRoot":""}